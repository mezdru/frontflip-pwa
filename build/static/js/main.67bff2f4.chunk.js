(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{116:function(e,t,n){},160:function(e,t,n){"use strict";var a=n(5),r=n(7),o=n(4),i=n(38),s=n(18),c=n(62),l=n(69),u=n(208),p=n(66),g=function(){function e(){Object(a.a)(this,e),this.inProgress=!1,this.errors=null,this.values={email:"",password:"",orgTag:"",invitationCode:"",temporaryToken:null}}return Object(r.a)(e,[{key:"setEmail",value:function(e){this.values.email=e}},{key:"setTemporaryToken",value:function(e){this.values.temporaryToken=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"setOrgTag",value:function(e){this.values.orgTag=e}},{key:"setInvitationCode",value:function(e){this.values.invitationCode=e}},{key:"reset",value:function(){this.values.email="",this.values.password="",this.values.orgTag="",this.values.invitationCode="",this.values.temporaryToken=null}},{key:"isAuth",value:function(){return!(!s.a.getAccessToken()&&!s.a.getRefreshToken())}},{key:"login",value:function(){var e=this;return this.inProgress=!0,this.errors=null,i.a.Auth.login(this.values.email,this.values.password).then(function(t){return t&&t.access_token?(p.a.notifyError(e.values.email+" logged in with email and password.","61","quentin","auth.store.js"),s.a.setAuthTokens(t),c.a.getCurrentUser().then(function(){return 200})):403}).catch(Object(o.d)(function(t){throw e.errors=t.response&&t.response.body&&t.response.body.errors,t})).finally(Object(o.d)(function(){e.inProgress=!1}))}},{key:"googleCallbackLogin",value:function(){var e=this;return this.values.temporaryToken?(this.inProgress=!0,this.errors=null,i.a.Auth.googleCallbackLogin(this.values.temporaryToken).then(function(t){return t&&t.access_token?(p.a.notifyError(e.values.email+" google callback login successful.","90","quentin","auth.store.js"),s.a.setAuthTokens(t),c.a.getCurrentUser().then(function(){return 200})):403}).catch(Object(o.d)(function(t){throw e.errors=t.response&&t.response.body&&t.response.body.errors,t})).finally(Object(o.d)(function(){e.inProgress=!1}))):Promise.reject()}},{key:"register",value:function(){var e=this;return this.inProgress=!0,this.errors=null,i.a.Auth.register(this.values.email,this.values.password).then(function(t){return e.login(e.values.email,e.values.password).then(function(e){return u.a.confirmLoginEmail(null).then(function(e){return!0})})}).catch(Object(o.d)(function(t){throw e.errors=t.response&&t.response.body&&t.response.body.errors,t})).finally(Object(o.d)(function(){e.inProgress=!1}))}},{key:"registerToOrg",value:function(){var e=this;if(l.a.values.organisation._id)return this.inProgress=!0,this.errors=null,i.a.Auth.registerToOrg(l.a.values.organisation._id,this.values.invitationCode).then(function(e){return e}).catch(Object(o.d)(function(t){throw e.errors=t.response&&t.response.body&&t.response.body.errors,t})).finally(Object(o.d)(function(){e.inProgress=!1}))}},{key:"passwordForgot",value:function(){var e=this;return this.inProgress=!0,this.errors=null,i.a.Email.passwordForgot(this.values.email).then(function(e){return e}).catch(Object(o.d)(function(t){throw e.errors=t,t})).finally(Object(o.d)(function(){e.inProgress=!1}))}},{key:"updatePassword",value:function(e,t){var n=this;return this.inProgress=!0,this.errors=null,i.a.Email.updatePassword(e,t,this.values.password).then(function(e){return n.setEmail(e.email),n.login()}).catch(function(e){throw n.errors=e,e}).finally(Object(o.d)(function(){n.inProgress=!1}))}},{key:"logout",value:function(){return s.a.removeAuthTokens(),s.a.removeCookie("algoliaKey"),s.a.removeCookie("algoliaKeyOrganisation"),c.a.forgetUser(),Promise.resolve()}},{key:"getUser",value:function(){return i.a.Test.getUser().then(function(e){return e})}}]),e}();Object(o.g)(g,{inProgress:o.l,errors:o.l,values:o.l,setEmail:o.d,setPassword:o.d,setOrgTag:o.d,setInvitationCode:o.d,reset:o.d,login:o.d,logout:o.d,register:o.d,registerToOrg:o.d}),t.a=new g},18:function(e,t,n){"use strict";var a=n(5),r=n(7),o=n(4),i=new(n(478).a),s=function(){function e(){var t=this;Object(a.a)(this,e),this.locale="en-UK",this.searchFilters=[],this.getAccessToken=function(){return t.getCookie("accessToken")},this.getRefreshToken=function(){return t.getCookie("refreshToken")},this.setSearchFilters=function(e){return t.setCookie("searchFilters",JSON.stringify(e))},this.getSearchFilters=function(){return t.getCookie("searchFilters")},this.getCookie=function(e){return i.get(e)},this.init()}return Object(r.a)(e,[{key:"init",value:function(){this.accessToken=this.getCookie("accessToken"),this.refreshToken=this.getCookie("refreshToken"),this.algoliaKey=this.getCookie("algoliaKey"),this.algoliaKeyOrganisation=this.getCookie("algoliaKeyOrganisation"),this.searchFilters=this.getCookie("searchFilters"),this.populateLocale()}},{key:"populateLocale",value:function(){var e=this,t=["en","fr"];this.locale=window.location.pathname.split("/")[1],t.some(function(t){return t===e.locale})||(this.locale=this.getCookie("locale")),this.locale||(this.locale=navigator.language||navigator.userLanguage||"en",t.some(function(t){return t===e.locale})?this.setCookie("locale",this.locale):this.setCookie("locale","en"))}},{key:"getLocalStorage",value:function(e,t){return t?JSON.parse(localStorage.getItem(e)):localStorage.getItem(e)}},{key:"setLocalStorage",value:function(e,t,n){return Promise.resolve().then(function(){n?localStorage.setItem(e,JSON.stringify(t)):localStorage.setItem(e,t)})}},{key:"setCookie",value:function(e,t,n){i.set(e,t,n?{expires:n,path:"/",domain:"wingzy.com"}:{path:"/",domain:"wingzy.com"}),this.init()}},{key:"removeCookie",value:function(e){var t={};t={path:"/",domain:"wingzy.com"},i.remove(e,t),this.init()}},{key:"removeAuthTokens",value:function(){var e={};e={path:"/",domain:"wingzy.com"},i.remove("accessToken",e),i.remove("refreshToken",e),this.init()}},{key:"setAuthTokens",value:function(e){if(e){var t=new Date;if(t.setMinutes(t.getMinutes()+55),this.accessToken=e.access_token,this.setCookie("accessToken",this.accessToken,t),e.refresh_token&&"undefined"!==e.refresh_token){var n=new Date;n.setFullYear(n.getFullYear()+1),this.refreshToken=e.refresh_token,this.setCookie("refreshToken",this.refreshToken,n)}}this.init()}},{key:"setAlgoliaKey",value:function(e,t){this.algoliaKey=e.value;var n=new Date(e.valid_until);this.setCookie("algoliaKey",this.algoliaKey,n),this.setCookie("algoliaKeyOrganisation",t,n),this.init()}}]),e}();Object(o.g)(s,{appName:o.l,accessToken:o.l,refreshToken:o.l,algoliaKey:o.l,algoliaKeyOrganisation:o.l,searchFilters:o.l,locale:o.l,setToken:o.d,setAlgoliaKey:o.d,getCookie:o.d,setCookie:o.d,removeCookie:o.d,removeAuthTokens:o.d,setSearchFilters:o.d,getSearchFilters:o.d}),t.a=new s},208:function(e,t,n){"use strict";var a=n(5),r=n(7),o=n(38),i=function(){function e(){Object(a.a)(this,e),this.inProgress=!1,this.errors=null}return Object(r.a)(e,[{key:"confirmLoginEmail",value:function(e){var t=this;return this.inProgress=!0,this.errors=null,o.a.Email.confirmLoginEmail(e).then(function(e){return console.log(JSON.stringify(e)),!0}).catch(function(e){throw console.log(e),console.log(e.status),t.errors=e.response&&e.response.body&&e.response.body.errors,e}).finally(function(){t.inProgress=!1})}}]),e}();t.a=new i},289:function(e,t,n){e.exports=n.p+"static/media/fly_away.bad63307.jpg"},35:function(e,t,n){"use strict";var a=n(5),r=n(7),o=n(18),i=function(){function e(){Object(a.a)(this,e)}return Object(r.a)(e,[{key:"checkEnv",value:function(){this.env="production",-1!==window.location.href.search("staging")&&(this.env="staging")}},{key:"checkLocale",value:function(){this.locale="production"===this.env||"staging"===this.env?o.a.getCookie("locale")||o.a.locale:"en-UK"}},{key:"checkHttp",value:function(){"production"===this.env?this.httpType="https://":this.httpType="http://"}},{key:"createUrl",value:function(e,t,n,a){return this.checkEnv(),this.checkLocale(),this.checkHttp(),"production"===this.env?this.url=n?this.httpType+n+"."+e+"/"+this.locale+t+(a?"?"+a:""):this.httpType+e+"/"+this.locale+t+(a?"?"+a:""):this.url=n?this.httpType+e+"/"+this.locale+t+"?subdomains="+n+(a?"&"+a:""):this.httpType+e+"/"+this.locale+t+(a?"?"+a:""),this.url}}]),e}();t.a=new i},38:function(e,t,n){"use strict";(function(e){var a=n(461),r=n.n(a),o=n(462),i=n.n(o),s=n(160),c=n(18),l=n(35),u=r()(i.a,e.Promise),p=c.a.getCookie("locale")||c.a.locale,g="auth-staging.wingzy.com",d="wingzy-staging.wingzy.com/"+p,h=function(e){return e&&e.response&&401===e.response.status&&(s.a.logout(),window.location.href=l.a.createUrl(window.location.host,"/signin",null)),e},m=function(e){return e.body},f=function(e){(c.a.getAccessToken()||c.a.accessToken)&&e.set("Authorization","Bearer "+(c.a.getAccessToken()||c.a.accessToken))},b=function(e){return S().then(function(){return u.del("https://"+"".concat(e)).timeout({response:3e4}).use(f).end(h).then(m)})},v=function(e){return S().then(function(){return u.get("https://"+"".concat(e)).timeout({response:3e4}).use(f).end(h).then(m)})},y=function(e,t){return S().then(function(){return u.put("https://"+"".concat(e),t).timeout({response:3e4}).use(f).end(h).then(m)})},w=function(e,t){return S().then(function(){return u.post("https://"+"".concat(e),t).timeout({response:3e4}).use(f).end(h).then(m)})},S=function(){return c.a.getRefreshToken()&&!c.a.getAccessToken()?new Promise(function(e,t){u.post("https://"+"".concat(g,"/locale"),{client_id:"frontflip",client_secret:"abcd1234",grant_type:"refresh_token",refresh_token:c.a.getRefreshToken()}).timeout({response:3e4}).end(h).then(function(t){c.a.setAuthTokens(JSON.parse(t.text)),e()}).catch(function(e){s.a.logout(),window.location.href=l.a.createUrl(window.location.host,"/signin",null)})}):Promise.resolve()},E={login:function(e,t){return w("".concat(g,"/locale"),{username:e,password:t,client_id:"frontflip",client_secret:"abcd1234",grant_type:"password"})},googleCallbackLogin:function(e){return w(g+"/locale/exchange",{token:e,client_id:"frontflip",client_secret:"abcd1234"})},register:function(e,t){return w("".concat(g,"/register"),{email:e,password:t})},registerToOrg:function(e,t){return w("".concat(g,"/register/organisation/")+e+"/"+(t||""))}},k={getCurrent:function(){return v(d+"/api/users/current")},welcomeUser:function(e,t){return y(d+"/api/users/welcome/"+e+"/organisation/"+t)},update:function(e,t){return y(d+"/api/users/"+e,{user:t})}},O={get:function(e){return v(d+"/api/profiles/"+e)},getByTag:function(e,t){return v(d+"/api/profiles/tag/"+e+"/organisation/"+t)},getByUser:function(e,t){return v(d+"/api/profiles/user/"+e+"/organisation/"+t)},post:function(e,t){return w(d+"/api/profiles/",{orgId:e,record:t})},put:function(e,t,n){return y(d+"/api/profiles/"+t,{orgId:e,record:n})},delete:function(e){return b(d+"/api/profiles/"+e)}},C={getForPublic:function(e){return v(d+"/api/organisations/"+e+"/forpublic")},getAlgoliaKey:function(e,t){return v(d+"/api/organisations/"+e+"/algolia/"+(t?"public":"private"))},get:function(e){return v(d+"/api/organisations/"+e)}},A={confirmLoginEmail:function(e){return w(d+"/api/emails/confirmation/"+(e||""))},passwordForgot:function(e){return w(d+"/api/emails/password",{userEmail:e})},updatePassword:function(e,t,n){return w(g+"/password/reset/"+e+"/"+t,{password:n})}},j={getUser:function(){return v("/test/secure")}};t.a={Auth:E,Test:j,Record:O,Organisation:C,User:k,Email:A}}).call(this,n(32))},446:function(e,t,n){},452:function(e,t,n){},456:function(e,t){},458:function(e,t,n){e.exports=n.p+"static/media/g.09aea0f5.svg"},464:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAYAAAA+VemSAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gMXDzY1ycUXtAAABRhJREFUeNrt3cFtGlEQBuCdHHEL0Ae+uRBcEG4jjeCT3YdpAY5+PrCSL4lklCXMvPd9FViz+zPzB4nExM211lrGvysiotgcV9M0nczw2y/xGlO18M5OnpwAgwADAqz/ck3/VUMEGP3XBgYEGBDgvL3tYAqLzHGthvzl7/B63PTFa148c7SBAQEGAUb/1X/T1BAdWG8zx8JztIHBCQ0IsP6L/qsD62367yhztIHBCQ0IcB/n894U9F8dWP/Vf83RBgYnNCDA+i8/nOPW+awD623zh3RENHPsM8A2cOeqhRcBBgFG/9V/c5/POrD+a47FA2wD6784oQEB1n/1X+ezDqy36b+jBNgG1n9xQgMCXPN83pmC/qsD679LeoiIszn2H2AbuM/+ezYFJzQgwPov9eZY5WeIdGD91xwLB9gG1n9xQgMCrLeZo/NZB9Z/zXGUANvA+i9OaECA65x9W1PQf3Vg/Vf/FWAbGP3XCQ0IsP6L/qsD623X2UTE0RwFGC+eOTqhAQHWf3udY7rf0a64fZ3Q+q85CrAAe/HM0QkNCPANt8baFPTfLk/o+eX+8HqCDQwIMAgwIMCAAAMCDAIMCDAgwCDAgAADAgwIMAgwIMCAAAMCDAIMCDAgwCDAgAADAgwIMAgwIMCAAIMAGwEIMCDAgACDAAMCDAgwIMDQlTCCaWqttXQPJiLMccw52sDghB5m+269BovM8WAKTmhn3/zBGhHNHJ3PNnDFT9Vi4UWAAQG++uzbeQW6rSE6sBdPbzNHGxgQYECAv8++g8ev/+rAXjz91xxtYECAQYCdz5ijAKO3maMAAwIMAqy3YY4CjP5rjgIMNjAgwHqbOSLAehvmKMAgwPCn89nFIMB62+y14Cg/xSZRdRBgvc0cbWBAgEm+fVemIMDOvouXgqM8iYwOLMD6r/5rAwPdB9j3lovN0X/DKsB3kfF7y+eCc3wTFx1Yb9N/9V8bGOg+wL63XGyO/htWJ7Szb/YYEe/m6IQWYL3NHJ3QgADn2xq+t1xmjntTcEI7+y42EXE0Rye0AOtt5ogODAKcb2v43nKZOR5MIfkJ7Td+4b9a9N9BnNDghAYEGBBgEGBAgAEBBgQYBBgQYECAQYABAQYEGBBgEGBAgAEBBgQYBBgQYECAQYABAQYEGBBgEGBAgAEBBgQYBBgQYECAQYABAQZuLCr+0a21lm6QEWGOY87RBoaLVyPoPMCttZ3HtsgcDwm375Mn0/kJnfHsm6bpISLO5uh8toErfgoWCy8CDAiw/qv/Op+H6cD6r/6LE1r/RYABAb7m7Nt6XPovRTtw0v67iYij/ivAAuzFM0d0YBBg/bfX/ru3fZ3Qzj79V4AF2ItnjgKsA4MA67/6r+3rhNZ/zVGABdiLZ47owCDAd94aa49I/6XoCa3/Op8RYP3XHJ3QgADrv/qv7TvCCZ20/z5GxLvzWYAF2ItnjujAIMD6b6/9N93vaNu+A5zQ+q/zGQHWf83RCQ0IsP6r/9q+I5zQ+q/zGQHWf83RCQ0I8DVbY+WR6L/U3cCnhDN6Lvhcf3u1dWC9Tf+1gW1goPsA67+LzTHd72jbvmNsYP13GW9eax1Yb9N/bWAbGOg+wPqv/kvtDaz/6r9U7cB6mzmiA4MA32Fr+ITWfym8gT/1X/2Xoh1YbzNHdGAQYP23bP9N9ztitu8YGzhj/30p+Bw/vMo6sN6m/9rANjDQfYD1X/2X2htY/9V/qdqB9TZz5N99AbWj7JsZ3ObQAAAAAElFTkSuQmCC"},467:function(e,t,n){e.exports=n.p+"static/media/chat.28c98f63.png"},468:function(e,t,n){e.exports=n.p+"static/media/colleagues.204f9a60.png"},469:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE4AAABZCAIAAAAfG4VpAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wMZDhIfydfxZQAAA5RJREFUeNrt3F1MU2cYwPH/abG0UMoBViYgA0KcVTeETseMRl02PzKyr5uh0RCNF5txWcwuhmbLkiVG3ca+4i7Ikm3JsmwXJmYmSiQS2RQ2ZCEbIwZRC6JRQGphME7p59mNXMwZLbQltDzP5TnP+578ct7z5nnPl6LrOvMjDMybmEfUlNk8mFvjkxbcGsUq725IXqp7gqNt1F8gGCYjlWwLeyqTkerW+PYPvmxjdBJgIsDBZlQL1U9gMCTRterRONbFpy14tLtbdJ2BcfY30nCZQDhZqCNefuqm7jyD4//ZrsP1UWobaXYRCCU+dcxH4xXqWugbxWRkkW3qqArFKsClYQ6c4febs6GNI3XCT5OLD8/RM8wCA+V5HFh/d5clhboXyLehw5+3qD1N52DctfGiegM09/LxebqGMCgsz+W9Z1lTNDUZGtmymCObyLagQ9sN3m/i4u34auNC9QVp6eeLX+m4CToOO++s57lSUqfmewXSTby6jA+eJ8tCSOdsL4d+psdNMJw41GCY367zeSut/YTCPP4Ib6+laglpC+7NtKayfQW161DN+EM0XOajc7g8hPREoIZ1LtzgaBu/9DEZojSHNyp5eSkZpvvnq2Z2OtlTiWpG83Oim89acd0hrM9talin4xb17TRdZSJASRa7n+K1J8m2PKhVbjqvr2KnE5uZMR/Huqhvp2+EmK+4YkbVdboG+aqdhh7GfBSp1FSwo5yF1oe3fUxl7zNsK0M14/HyQydfd9A/GmNt7M6qwsA4F4fweCmwUV1GTQUFtkhbl2bz5mpeXEpmKkP/0DmAx4uizMkaWAGHnaolpBgpz2OXk5Ks6fWwPJe3VqP5uaPxkoNFmXO43C/OosbJ04U8asVhn0kPKwvYtwZ/kBV55KTN7ZVNYSaF0Z2NtUVyF0KoQhXqPIkHzcCneoimXMnPwJkfafLZXrRAVBKriQ0lM6W+8n1US6qtZfxYHWny7uNcG4mK6rDTvU8GcOQlhDMfk3HaXS/OmUZyRV5EC4P/x9+TdA/HjnpiR+wr0nvi+PYZNmxysfEbmYGFKlShClWoQhWqUIUqVKEKVahCFapQhSpUoQpVqLP7Qrs9ncObAczGZKfmpLF/nQxgoQpVqEIVqlCFKlShClWoQhWqUIUqVKEKVahCFapQhRphRPQgo+q7mXyRMTsx5osp9a9BGcBJM4BP1pBAv4izmh6SoMgf74SayPEvY8QJ961F2JoAAAAASUVORK5CYII="},475:function(e){e.exports={test:"testFR",Password:"Mot de passe","I don't have my password":"Je n'ai pas mon mot de passe",or:"ou","Sign in with Google":"Connexion avec Google","Sign up with Google":"Inscription avec Google","Sign In":"Connexion","Sign Up":"Inscription","If you have an account on Wingzy, we have send you an email to reset your password.":"Si vous \xeates inscrit sur Wingzy, nous vous avons envoy\xe9 un mail pour cr\xe9er un nouveau mot de passe.","You forgot your password or didn't have one yet ? Don't worry ! You can ask for a reset":"Vous avez oubli\xe9 votre mot de passe ou vous n'en avez pas ? Pas d'inqui\xe9tude ! Vous pouvez nous demander d'en recr\xe9er un","password.forgot.send":"Envoyez l'email","You can now choose a new password":"Vous pouvez choisir un nouveau mot de passe","Change password":"Modifiez votre mot de passe","Why Wingzy ?":"Pourquoi Wingzy ?",Pricing:"Tarifs","signin.error.generic":"D\xe9sol\xe9, nous n'avons pas pu vous connecter. V\xe9rifiez votre email et mot de passe :)","signin.error.unknown":"Nous ne connaissons pas cet email, d\xe9sol\xe9...","signin.error.wrongPassword":"Mauvais mot de passe, pouvez-vous r\xe9essayez ou <a href={forgotPasswordLink}>cr\xe9ez un nouveau mot de passe</a> ?","signin.error.noPassword":"Bienvenue! Pour vous connecter en s\xe9curit\xe9 \xe0 Wingzy, pouvez-vous <a href={forgotPasswordLink}>cr\xe9er un nouveau mot de passe</a> ?","signin.error.useGoogle":"Vous \xeates d\xe9j\xe0 inscrit avec Google, essayez <strong>Connexion avec Google</strong> ?","signup.error.wrongEmail":"Votre email n'a pas l'air juste, vous pouvez r\xe9essayer ?","signup.error.shortPassword":"Votre mot de passe est trop court, vous pouvez en faire un de plus de 6 caract\xe8res ?","signup.error.dumbPassword":"Votre mot de passe est trop simple : <strong>{dumbCount}</strong> personnes ont le m\xeame ! Faites-le plus compliqu\xe9 \xe0 deviner.","signup.warning.forbiddenOrg":"<strong>D\xe9sol\xe9</strong>, vous ne pouvez pas rejoindre le Wingzy de {orgName}. Vous avez besoin d'une invitation, ou du bon domaine email.<br/>Merci pour l'inscription quand m\xeame ! Nous venons de vous envoyer un email pour confirmer votre adresse, v\xe9rifiez votre boite de r\xe9ception...","signup.success":"<strong>Merci</strong> pour l'inscription ! Nous venons de vous envoyer un email pour confirmer votre adresse, v\xe9rifiez votre boite de r\xe9ception...","signup.error.generic":"Mince. Il y a eu une erreur impr\xe9vue de notre part. Essayez de rafraichir la page s'il vous plait.","signup.error.userExists":"Un utilisateur existe d\xe9j\xe0 avec cette adresse email. Essayez de vous connecter ou <a href={forgotPasswordLink}>cr\xe9ez un nouveau mot de passe</a>","password.forgot.intro":"Pas de mot de passe&nbsp;? Mot de passe oubli\xe9&nbsp;? Nous allons vous envoyer un email pour cr\xe9er un nouveau mot de passe.","password.new.intro":"Cr\xe9ez un nouveau mot de passe pour s\xe9curiser votre compte Wingzy <strong>{userEmail}</strong>.","password.forgot.success":"Nous vous avons envoy\xe9 un email pour cr\xe9er un nouveau mot de passe.","password.new.create":"Cr\xe9er un nouveau mot de passe","password.create.intro":"Pour commencer, cr\xe9ez un mot de passe pour s\xe9curiser votre compte","password.create.next":"Suivant","password.create.title.orgTag":"Bienvenue sur le Wingzy de <strong>{orgTag}</strong>","password.create.title.noOrgTag":"Bienvenue sur Wingzy","algolia.noOptions":"Pas de r\xe9sultats pour {input}","algolia.typeSomething":"\xc9crivez quelque-chose pour commencer ...","algolia.search":"Recherchez ...","algolia.onboard":"Ajoutez des Wings","algolia.createOption":'Recherchez "{input}"',"algolia.createWing":'Cr\xe9ez la Wing "{input}"',"menu.organisation.welcome":"Bienvenue sur {name}","menu.drawer.profile":"Mon profil","menu.drawer.availability":"Disponibilit\xe9","menu.drawer.whyWingzy":"Pourquoi Wingzy ?","menu.drawer.pricing":"Nos tarifs","menu.drawer.terms":"Conditions d'utilisation","menu.drawer.protectingYourData":"Protection des donn\xe9es","menu.drawer.logout":"D\xe9connexion","menu.drawer.organisationAdmin":"Configuration","menu.drawer.contactUsPremium":"Contactez nous","menu.drawer.contactUs":"Contactez nous pour devenir Premium !","menu.drawer.organisationInfoPremium":"Wingzy premium","menu.drawer.organisationInfo":"Votre Wingzy est gratuit et le restera toujours jusqu'\xe0 1000 recherches par mois.","menu.drawer.listOrgTitle":"Allez \xe0 ...","menu.drawer.invite":"Invitez vos coll\xe8gues","profile.aboutMe":"\xc0 propos de moi","profile.addWings":"Ajoutez des Wings","profile.updateCover":"Changez votre couverture","profile.addContacts":"Ajoutez","errorPage.emailNotValidated":"Votre adresse mail n'a pas encore \xe9t\xe9 valid\xe9e. Nous vous avons renvoy\xe9 un mail de confirmation \xe0 l'adresse : <strong>{email}</strong>","errorPage.organisationNotFound":"Nous ne connaissons pas l'organisation (<strong>{orgTag}</strong>) que vous recherchez. <a href='{newOrgLink}'>Cliquez ici pour cr\xe9er le Wingzy de {orgTag}</a>","errorPage.unhandledError":"Une erreur inconnue s'est produite. Si le probl\xe8me persiste, veuillez nous contacter.","search.showMore":"Voir plus","delete profile":"Supprimez le profil","profile.editIntro":"Editez l'intro","profile.editAboutMe":"Editez \xe0 propos de moi","onboard.whoAreYou":"Qui \xeates vous ?","onboard.yourContact":"Comment vous joindre ?","onboard.addMoreContact":"Ajoutez une info de contact","onboard.chooseYourFirstWings":"R\xe9v\xe9lez vos premi\xe8res Wings","onboard.chooseYourWings":"R\xe9v\xe9lez toutes vos Wings","onboard.stepperBack":"Retour","onboard.stepperNext":"Suivant","onboard.stepperFinish":"Fin","onboard.welcome":"Bienvenue dans le Wingzy de ","onboard.start":"Cr\xe9ez votre profil","onboard.intro.name":"Pr\xe9nom et nom","onboard.intro.intro":"Votre r\xf4le chez {organisationName}","onboard.userWings":"Vos {wingsCount} Wings","onboard.noWings":"Vos Wings sont tous vos talents, comp\xe9tences, \xe9nergies que vous voulez partagez avec vos coll\xe8gues. S\xe9lectionnez des Wings existantes ou cr\xe9ez vos propres Wings !","onboard.welcome.text":"Wingzy est l'annuaire des talents de {organisationName}. Une app minimaliste pour trouver vos coll\xe8gues gr\xe2ce \xe0 leurs Wings : leurs talents, comp\xe9tences et \xe9nergies. Cr\xe9ez votre profil et r\xe9v\xe9lez vos Wings en juste 3 minutes !",wingsSuggestions:"Suggestions","onboard.end.cta":"Recherchez dans {organisationName}","onboard.end.text":"Votre profil est dans l'annuaire des talents de {organisationName}.","onboard.end.title":"G\xe9nial","onboard.edit.save":"Sauver","pwa.install.ios":"Installez cette app sur votre iPhone ! Cliquez sur {img} puis 'Sur l'\xe9cran d'accueil'.","action.addWings.add":"Ajoutez \xe0 votre profil","action.addWings.search":"Cherchez dans {organisationName}","action.addWings.text":"Vous avez trouv\xe9 {wingsCount} Wings !","nobody.searchList":"Il n'y a personne ... pour le moment !"}},476:function(e){e.exports={test:"testEN",Password:"Password","I don't have my password":"I don't have my password",or:"or","Sign in with Google":"Sign in with Google","Sign up with Google":"Sign up with Google","Sign In":"Sign In","Sign Up":"Sign Up","If you have an account on Wingzy, we have send you an email to reset your password.":"If you have an account on Wingzy, we have send you an email to reset your password.","You forgot your password or didn't have one yet ? Don't worry ! You can ask for a reset":"You forgot your password or didn't have one yet ? Don't worry ! You can ask for a reset","password.forgot.send":"Send the email","You can now choose a new password":"You can now choose a new password","Change password":"Change password","Why Wingzy ?":"Why Wingzy ?",Pricing:"Pricing","signin.error.generic":"Sorry, we could not sign you in. Please check your email and password :)","signin.error.unknown":"We don't know this email, sorry...","signin.error.wrongPassword":"Wrong password, can you try again or <a href={forgotPasswordLink}>create a new password</a>?","signin.error.noPassword":"Please <a href={forgotPasswordLink}>create a new password</a> to secure your account!","signin.error.useGoogle":"You already signed up with Google, try <strong>Sign in with Google</strong>?","signup.error.wrongEmail":"Your email does not seem right, can you try again?","signup.error.shortPassword":"Your password is too short, can you make it 6 signs or more?","signup.error.dumbPassword":"Your password is too simple: <strong>{dumbCount}</strong> people have the same! Can you make it harder to guess?","signup.warning.forbiddenOrg":"<strong>Sorry</strong>, you cannot join the Wingzy of {orgName}. You need an invitation, or the right email domain.<br/>Anyway, thank you for signing up! We just sent you an email to confirm your address, check your inbox...","signup.success":"<strong>Thank you</strong> for signing up! We just sent you an email to confirm your address, check your inbox...","signup.error.generic":"Oh. That was an unexpected error from us. Please, try to refresh the page.","signup.error.userExists":"An user already exists with this email. Try to sign in or <a href={forgotPasswordLink}>create a new password</a>","password.forgot.intro":"No password&nbsp;? Password forgotten&nbsp;? We will send you an email to create a new password.","password.new.intro":"Create a new password to secure your Wingzy account <strong>{userEmail}</strong>.","password.create.intro":"First, create a password to secure your account","password.create.next":"Next","password.create.title.orgTag":"Welcome to the Wingzy of <strong>{orgTag}</strong>","password.create.title.noOrgTag":"Welcome to Wingzy","password.forgot.success":"We have sent you an email to create a new password","password.new.create":"Create new password","algolia.noOptions":"No results found for {input}","algolia.typeSomething":"Type something to begin ...","algolia.search":"Search ...","algolia.onboard":"Add your Wings","algolia.createOption":'Search "{input}"',"algolia.createWing":'Create Wing "{input}"',"menu.organisation.welcome":"Welcome to {name}","menu.drawer.profile":"My profile","menu.drawer.availability":"Availability","menu.drawer.whyWingzy":"Why Wingzy?","menu.drawer.pricing":"Pricing","menu.drawer.terms":"Terms","menu.drawer.protectingYourData":"Protecting your data","menu.drawer.logout":"Sign Out","menu.drawer.organisationAdmin":"Setup","menu.drawer.contactUsPremium":"Contact us","menu.drawer.contactUs":"Contact us to go Premium!","menu.drawer.organisationInfoPremium":"Wingzy premium","menu.drawer.organisationInfo":"Your Wingzy is free and will forever be free up to 1000 searches by month.","menu.drawer.listOrgTitle":"Switch to...","menu.drawer.invite":"Invite Coworkers","profile.aboutMe":"About me","profile.addWings":"Add Wings","profile.updateCover":"Change cover","profile.addContacts":"Add","errorPage.emailNotValidated":"Your email address isn't validated yet. We just sent you an email at <strong>{email}</strong> to confirm your address, check your inbox...","errorPage.organisationNotFound":"We don't know the organisation (<strong>{orgTag}</strong>) you are looking for. <a href='{newOrgLink}'>Click here to create the Wingzy of {orgTag}</a>","errorPage.unhandledError":"An unexpected error happened. Contact us if the problem persists.","search.showMore":"Show more","delete profile":"Delete profile","profile.editIntro":"Edit the intro","profile.editAboutMe":"Edit about me","onboard.whoAreYou":"Who are You?","onboard.yourContact":"How can we reach you?","onboard.addMoreContact":"Add contact info","onboard.chooseYourFirstWings":"Reveal your first Wings","onboard.chooseYourWings":"Reveal all your Wings","onboard.stepperBack":"Back","onboard.stepperNext":"Next","onboard.stepperFinish":"Finish","onboard.welcome":"Welcome to the Wingzy of ","onboard.start":"Create your profile","onboard.intro.name":"First and last name","onboard.intro.intro":"Your role at {organisationName}","onboard.userWings":"Your {wingsCount} Wings","onboard.noWings":"Your Wings are your talents, skills and energies you want to share with your coworkers. Pick existing Wings or create your own Wings!","onboard.welcome.text":"Wingzy is the talent directory of {organisationName}. A minimalistic app to find your coworkers through their Wings : their talents, skills and energies. Create your profile and reveal your Wings in just 3 minutes!",wingsSuggestions:"Suggestions","onboard.end.cta":"Search {organisationName}","onboard.end.text":"Your profile is now in the talent directory of {organisationName}","onboard.end.title":"Awesome","onboard.edit.save":"Save","pwa.install.ios":"Install this app on your iPhone! Tap {img} and then 'Add to homescreen'.","action.addWings.add":"Add to my profile","action.addWings.search":"Search {organisationName}","action.addWings.text":"You found {wingsCount} Wings!","nobody.searchList":"No one here ... yet !"}},5729:function(e,t,n){e.exports=n(6242)},5764:function(e,t,n){},5774:function(e,t){},5780:function(e,t){},5975:function(e,t,n){},5999:function(e,t){},6001:function(e,t){},6033:function(e,t){},6034:function(e,t){},6100:function(e,t){},62:function(e,t,n){"use strict";var a=n(5),r=n(7),o=n(4),i=n(38),s=n(82),c=n(69),l=function(){function e(){Object(a.a)(this,e),this.inProgress=!1,this.errors=null,this.values={currentUser:{}}}return Object(r.a)(e,[{key:"setCurrentUser",value:function(e){this.values.currentUser=e}},{key:"getCurrentUser",value:function(){var e=this;return this.inProgress=!0,this.errors=null,i.a.User.getCurrent().then(function(t){return e.values.currentUser=t?t.user:{},e.syncRecord(),e.values.currentUser}).catch(Object(o.d)(function(t){throw e.errors=t.response&&t.response.body&&t.response.body.errors,t})).finally(Object(o.d)(function(){e.inProgress=!1}))}},{key:"welcomeCurrentUser",value:function(e){var t=this;return this.inProgress=!0,this.errors=null,i.a.User.welcomeUser(this.values.currentUser._id,e).then(function(e){return t.values.currentUser=e?e.user:{},t.syncRecord(),t.values.currentUser}).catch(Object(o.d)(function(e){throw t.errors=e.response&&e.response.body&&e.response.body.errors,e})).finally(Object(o.d)(function(){t.inProgress=!1}))}},{key:"syncRecord",value:function(){if(!s.a.values.record._id&&c.a.values.organisation._id){var e=this.values.currentUser.orgsAndRecords.find(function(e){return e.organisation===c.a.values.organisation._id});e&&(s.a.setRecordId(e.record),s.a.getRecord())}}},{key:"forgetUser",value:function(){this.currentUser=void 0}}]),e}();Object(o.g)(l,{inProgress:o.l,errors:o.l,values:o.l,getCurrentUser:o.d,updateUser:o.d,forgetUser:o.d}),t.a=new l},6216:function(e,t,n){},6222:function(e,t,n){},6242:function(e,t,n){"use strict";n.r(t);var a=n(295),r=(n(5730),n(5751),n(5753),n(0)),o=n.n(r),i=n(36),s=n.n(i),c=(n(5764),n(5)),l=n(7),u=n(12),p=n(10),g=n(11),d=n(6245),h=n(16),m=n.n(h),f=n(24),b=n(6247),v=n(6244),y=n(6246),w=n(6248),S=n(35),E=n(6),k=n(1),O=n(48),C=n(8),A=n(9),j=n(4),x=n(204),T=n.n(x),P=n(6243),_=n(130),I=n(458),R=n.n(I),N=Object(O.withStyles)(function(e){return{root:{"&:not(:hover)":{backgroundColor:"white"},"&:hover":{backgroundColor:"#d5d5d5",color:"black"}}}})(function(e){var t=e.id,n=Object(_.a)(e,["id"]);return o.a.createElement(k.c,Object.assign({},n,{className:n.classes.root}),o.a.createElement("img",{src:R.a,style:{width:"25px",height:"25px",position:"absolute",left:"13px"},alt:"google"}),o.a.createElement(A.b,{id:t}))}),L=n(13),U=n.n(L),W=n(197),z=n.n(W),D=n(199),B=n.n(D),M=n(200),F=n.n(M),H=n(101),G=n.n(H),K=n(288),Y=n.n(K),q=n(124),V=n.n(q),Q=n(198),X=n.n(Q),Z={success:z.a,warning:X.a,error:B.a,info:F.a},J=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={open:!0},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,a=(e.onClose,e.variant),r=e.message,i=Object(_.a)(e,["classes","className","onClose","variant","message"]),s=Z[a];return this.state.open&&o.a.createElement(V.a,Object.assign({className:U()(t[a],n,t.verticalCenter,t.root),"aria-describedby":"client-snackbar",message:o.a.createElement("span",{id:"client-snackbar",className:t.message},o.a.createElement(s,{className:U()(t.icon,t.iconVariant)}),o.a.createElement("span",{dangerouslySetInnerHTML:{__html:r}}))},i))}}]),t}(o.a.Component),$=Object(O.withStyles)(function(e){return{success:{backgroundColor:G.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:Y.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"},verticalCenter:{position:"relative",left:0,right:0,margin:"auto"},root:{maxWidth:604}}})(J),ee=n(25);ee.a.initialize(Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_ROOT_AUTH:"auth-staging.wingzy.com",REACT_APP_API_ROOT:"wingzy-staging.wingzy.com",REACT_APP_HOST_BACKFLIP:"wingzy-staging.wingzy.com",REACT_APP_ALGOLIA_APPLICATION_ID:"RSXBUBL0PB",REACT_APP_ALGOLIA_INDEX:"world",REACT_APP_CLIENT_ID:"frontflip",REACT_APP_CLIENT_SECRET:"abcd1234",REACT_APP_GOOGLE_CLIENT_ID:"949146759338-80qp26enlj58hd3d5u2ieikrdv9o0t6a.apps.googleusercontent.com"}).REACT_APP_GOOGLE_ANALYTICS_ID);var te=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).handleEmailChange=function(e){n.props.authStore.setEmail(e.target.value)},n.handlePasswordChange=function(e){n.props.authStore.setPassword(e.target.value)},n.handleSubmitForm=function(e){e.preventDefault(),n.props.authStore.login().then(function(e){200===e?(ee.a.event({category:"User",action:"Login with password"}),n.setState({redirectTo:"/"+n.state.locale+(n.props.organisationStore.values.orgTag?"/"+n.props.organisationStore.values.orgTag:"")})):n.setState({loginErrors:n.props.intl.formatMessage({id:"signin.error.generic"})})}).catch(function(e){var t;404===e.status?t=n.props.intl.formatMessage({id:"signin.error.unknown"}):403===e.status&&(t="Wrong password."===e.response.body.error_description?n.props.intl.formatMessage({id:"signin.error.wrongPassword"},{forgotPasswordLink:"/"+n.state.locale+"/password/forgot"}):"User use Google Auth."===e.response.body.error_description?n.props.intl.formatMessage({id:"signin.error.useGoogle"}):n.props.intl.formatMessage({id:"signin.error.noPassword"},{forgotPasswordLink:"/"+n.state.locale+"/password/forgot"})),t||(t=n.props.intl.formatMessage({id:"signin.error.generic"})),n.setState({loginErrors:t})})},n.state={value:0,redirectTo:null,loginErrors:null,locale:n.props.commonStore.getCookie("locale")||n.props.commonStore.locale,isAuth:n.props.authStore.isAuth()},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.authStore,t=e.values,n=e.inProgress,a=this.props.organisationStore.values.orgTag,r=this.state,i=r.loginErrors,s=r.locale,c=r.redirectTo,l=r.isAuth,u=this.props.intl;return c?o.a.createElement(y.a,{push:!0,to:c}):l?o.a.createElement(y.a,{push:!0,to:"/"+s+(a?"/"+a:"")}):o.a.createElement("form",{onSubmit:this.handleSubmitForm},o.a.createElement(k.n,{container:!0,item:!0,direction:"column",spacing:16},i&&o.a.createElement(k.n,{item:!0},o.a.createElement($,{variant:"warning",message:i})),o.a.createElement(k.n,{item:!0},o.a.createElement(N,{fullWidth:!0,onClick:this.props.handleGoogleAuth,id:"Sign in with Google"})),o.a.createElement(k.n,{item:!0},o.a.createElement(k.H,{style:{fontSize:"1rem",color:"#7c7c7c",textAlign:"center"}},o.a.createElement(A.b,{id:"or"}))),o.a.createElement(k.n,{item:!0},o.a.createElement(k.E,{label:"Email",type:"email",autoComplete:"email",fullWidth:!0,variant:"outlined",value:t.email,onChange:this.handleEmailChange,required:!0})),o.a.createElement(k.n,{item:!0},o.a.createElement(k.E,{label:u.formatMessage({id:"Password"}),type:"password",autoComplete:"current-password",fullWidth:!0,variant:"outlined",value:t.password,onChange:this.handlePasswordChange,required:!0})),o.a.createElement(k.n,{item:!0,container:!0,justify:"center"},n&&o.a.createElement(k.i,{color:"secondary"}),!n&&o.a.createElement(k.c,{fullWidth:!0,color:"secondary",type:"submit"},o.a.createElement(A.b,{id:"Sign In"}))),o.a.createElement(k.n,{item:!0},o.a.createElement(k.c,{component:P.a,to:"/"+s+(a?"/"+a:"")+"/password/forgot",variant:"text",fullWidth:!0},o.a.createElement(A.b,{id:"I don't have my password"})))))}}]),t}(o.a.Component),ne=Object(E.b)("authStore","userStore","organisationStore","commonStore")(Object(A.e)(Object(E.c)(te))),ae=n(18);ee.a.initialize(Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_ROOT_AUTH:"auth-staging.wingzy.com",REACT_APP_API_ROOT:"wingzy-staging.wingzy.com",REACT_APP_HOST_BACKFLIP:"wingzy-staging.wingzy.com",REACT_APP_ALGOLIA_APPLICATION_ID:"RSXBUBL0PB",REACT_APP_ALGOLIA_INDEX:"world",REACT_APP_CLIENT_ID:"frontflip",REACT_APP_CLIENT_SECRET:"abcd1234",REACT_APP_GOOGLE_CLIENT_ID:"949146759338-80qp26enlj58hd3d5u2ieikrdv9o0t6a.apps.googleusercontent.com"}).REACT_APP_GOOGLE_ANALYTICS_ID);var re=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).handleEmailChange=function(e){n.props.authStore.setEmail(e.target.value)},n.handlePasswordChange=function(e){n.props.authStore.setPassword(e.target.value)},n.handleSubmitForm=function(e){e.preventDefault(),n.props.authStore.register().then(function(){ee.a.event({category:"User",action:"Register with password"}),n.props.organisationStore.values.orgTag?n.props.authStore.registerToOrg().then(function(){ee.a.event({category:"User",action:"Register to Organisation"}),n.setState({registerSuccess:!0}),n.setState({registerSuccessMessage:n.props.intl.formatMessage({id:"signup.success"})})}).catch(function(e){n.setState({registerSuccess:!0}),n.setState({registerSuccessMessage:n.props.intl.formatMessage({id:"signup.warning.forbiddenOrg"},{orgName:n.props.organisationStore.values.organisation.name})})}):(n.setState({registerSuccessMessage:n.props.intl.formatMessage({id:"signup.success"})}),n.setState({registerSuccess:!0}))}).catch(function(e){var t;422===e.status?e.response.body.errors.forEach(function(e){"password"===e.param?t="dumb"===e.type?(t?t+"<br/>":"")+n.props.intl.formatMessage({id:"signup.error.dumbPassword"},{dumbCount:(3e4*parseInt(e.msg)).toLocaleString()}):(t?t+"<br/>":"")+n.props.intl.formatMessage({id:"signup.error.shortPassword"}):"email"===e.param&&(t=(t?t+"<br/>":"")+n.props.intl.formatMessage({id:"signup.error.wrongEmail"}))}):400===e.status&&"User already exists."===e.response.body.message&&(t=n.props.intl.formatMessage({id:"signup.error.userExists"},{forgotPasswordLink:"/"+n.state.locale+"/password/forgot"})),t||(t=n.props.intl.formatMessage({id:"signup.error.generic"})),n.setState({registerErrors:t})})},n.state={value:0,registerErrors:null,registerSuccess:!1,registerSuccessMessage:"",locale:ae.a.locale||ae.a.getCookie("locale")},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.authStore,t=e.values,n=e.inProgress,a=this.state,r=a.registerErrors,i=a.registerSuccess,s=a.registerSuccessMessage,c=this.props.intl;return i?o.a.createElement(k.n,{container:!0,item:!0,direction:"column",spacing:16},o.a.createElement(k.n,{item:!0},o.a.createElement($,{variant:"success",message:s}))):o.a.createElement("form",{onSubmit:this.handleSubmitForm},o.a.createElement(k.n,{container:!0,item:!0,direction:"column",spacing:16},r&&o.a.createElement(k.n,{item:!0},o.a.createElement($,{variant:"warning",message:r})),o.a.createElement(k.n,{item:!0},o.a.createElement(N,{fullWidth:!0,onClick:this.props.handleGoogleAuth,id:"Sign up with Google"})),o.a.createElement(k.n,{item:!0},o.a.createElement(k.H,{style:{fontSize:"1rem",color:"#7c7c7c",textAlign:"center"}},o.a.createElement(A.b,{id:"or"}))),o.a.createElement(k.n,{item:!0},o.a.createElement(k.E,{label:"Email",type:"email",autoComplete:"email",variant:"outlined",fullWidth:!0,value:t.email,onChange:this.handleEmailChange,required:!0})),o.a.createElement(k.n,{item:!0},o.a.createElement(k.E,{label:c.formatMessage({id:"Password"}),type:"password",autoComplete:"current-password",variant:"outlined",fullWidth:!0,value:t.password,onChange:this.handlePasswordChange,required:!0})),o.a.createElement(k.n,{item:!0,container:!0,justify:"center"},n&&o.a.createElement(k.i,{color:"secondary"}),!n&&o.a.createElement(k.c,{fullWidth:!0,type:"submit",color:"secondary"},o.a.createElement(A.b,{id:"Sign Up"})))))}}]),t}(o.a.Component),oe=Object(E.b)("authStore","userStore","organisationStore","commonStore")(Object(A.e)(Object(E.c)(re)));ee.a.initialize(Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_ROOT_AUTH:"auth-staging.wingzy.com",REACT_APP_API_ROOT:"wingzy-staging.wingzy.com",REACT_APP_HOST_BACKFLIP:"wingzy-staging.wingzy.com",REACT_APP_ALGOLIA_APPLICATION_ID:"RSXBUBL0PB",REACT_APP_ALGOLIA_INDEX:"world",REACT_APP_CLIENT_ID:"frontflip",REACT_APP_CLIENT_SECRET:"abcd1234",REACT_APP_GOOGLE_CLIENT_ID:"949146759338-80qp26enlj58hd3d5u2ieikrdv9o0t6a.apps.googleusercontent.com"}).REACT_APP_GOOGLE_ANALYTICS_ID);var ie=n(5968),se=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).handleGoogleCallback=function(){var e=Object(f.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.token){e.next=2;break}return e.abrupt("return",Promise.reject("No token"));case 2:return n.props.authStore.setTemporaryToken(t.token),e.abrupt("return",n.props.authStore.googleCallbackLogin());case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(e,t){n.setState({value:t})},n.handleChangeIndex=function(e){n.setState({value:e})},n.handleGoogleAuth=function(){var e={};n.props.organisationStore.values.orgTag&&(e.orgTag=n.props.organisationStore.values.orgTag),n.props.organisationStore.values.organisation.tag&&(e.orgTag=n.props.organisationStore.values.organisation.tag),n.props.authStore.values.invitationCode&&(e.invitationCode=n.props.authStore.values.invitationCode),window.location.href="https://auth-staging.wingzy.com/google?state="+JSON.stringify(e)},n.state={value:n.props.initialTab,queryParams:ie.parse(window.location.search),displayLoader:!1,redirectTo:null,locale:n.props.commonStore.getCookie("locale")||n.props.commonStore.locale,observer:function(){}},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;ee.a.pageview(window.location.pathname),this.props.authStore.values.invitationCode&&this.setState({value:1}),this.setState({observer:Object(j.m)(this.props.authStore.values,"invitationCode",function(t){e.setState({value:1})})}),this.handleGoogleCallback(this.state.queryParams).then(function(){var t=e.state.queryParams.state?JSON.parse(e.state.queryParams.state):null;e.props.userStore.getCurrentUser().then(function(n){ee.a.event({category:"User",action:"Login with Google"}),t&&t.invitationCode&&e.props.authStore.setInvitationCode(t.invitationCode),n.superadmin?e.setState({redirectTo:"/"+e.state.locale+(e.props.organisationStore.values.organisation.tag?"/"+e.props.organisationStore.values.organisation.tag:"")}):e.props.authStore.registerToOrg().then(function(t){var n=t.organisation,a=e.props.userStore.values.currentUser.orgsAndRecords.find(function(e){return e.organisation===n._id});a&&e.props.recordStore.setRecordId(a.record),e.props.recordStore.getRecord().then(function(){return e.setState({redirectTo:"/"+e.state.locale+"/"+e.props.organisationStore.values.organisation.tag})}).catch(function(){return window.location.href=S.a.createUrl("wingzy-staging.wingzy.com","/onboard/welcome",n.tag)})}).catch(function(t){return e.setState({redirectTo:"/"+e.state.locale+"/"+e.props.organisationStore.values.organisation.tag})})}).catch(function(t){return e.setState({redirectTo:"/"+e.state.locale})})}).catch(function(e){})}},{key:"componentWillUnmount",value:function(){this.state.observer()}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.theme,a=this.state.redirectTo,r=this.props.intl;return a?o.a.createElement(y.a,{push:!0,to:a}):o.a.createElement(k.n,{container:!0,spacing:16},o.a.createElement(k.n,{item:!0,xs:12,className:t.tabs},o.a.createElement(k.D,{value:this.state.value,onChange:this.handleChange,indicatorColor:"secondary",textColor:"secondary",variant:"fullWidth"},o.a.createElement(k.C,{label:r.formatMessage({id:"Sign In"}),className:t.leftTabs}),o.a.createElement(k.C,{label:r.formatMessage({id:"Sign Up"}),className:t.rightTabs}))),o.a.createElement(k.n,{item:!0,xs:12},o.a.createElement(T.a,{axis:"rtl"===n.direction?"x-reverse":"x",index:this.state.value,onChangeIndex:this.handleChangeIndex},o.a.createElement(ne,{handleGoogleAuth:this.handleGoogleAuth}),o.a.createElement(oe,{handleGoogleAuth:this.handleGoogleAuth}))))}}]),t}(o.a.Component),ce=Object(E.b)("authStore","organisationStore","commonStore","userStore","recordStore")(Object(O.withTheme)()(Object(O.withStyles)(function(e){return{tabs:Object(C.a)({marginTop:-8},e.breakpoints.down("xs"),{padding:"8px 0 8px 0!important"}),leftTabs:Object(C.a)({paddingLeft:8,textAlign:"left"},e.breakpoints.down("xs"),{paddingLeft:16}),rightTabs:Object(C.a)({paddingRight:8,textAlign:"right"},e.breakpoints.down("xs"),{paddingRight:16})}},{withTheme:!0})(Object(A.e)(Object(E.c)(se))))),le=n(67),ue=n(289),pe=n.n(ue),ge=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={type:n.props.type||"organisation",source:null,observer:function(){}},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;"organisation"===this.state.type&&(this.setState({source:this.props.organisationStore.values.organisation.cover&&this.props.organisationStore.values.organisation.cover.url?this.props.organisationStore.values.organisation.cover.url:pe.a}),this.setState({observer:Object(j.m)(this.props.organisationStore.values,"organisation",function(t){var n=e.props.organisationStore.values.organisation;e.setState({source:n.cover&&n.cover.url?n.cover.url:pe.a})})}))}},{key:"componentWillUnmount",value:function(){this.state.observer()}},{key:"render",value:function(){var e=this.state.source;return o.a.createElement("div",{className:this.props.classes.root},o.a.createElement("div",{style:Object(le.a)({backgroundImage:"url(".concat(this.props.source||e,")")},this.props.style),className:this.props.classes.rootBanner}),this.props.children)}}]),t}(o.a.Component),de=Object(E.b)("organisationStore")(Object(E.c)(Object(O.withStyles)(function(e){return{root:Object(C.a)({width:"100%",height:222},e.breakpoints.up("md"),{height:416}),rootBanner:Object(C.a)({position:"absolute",width:"100%",height:222,boxShadow:"rgba(0, 0, 0, 0.2) 0px 1px 8px 0px, rgba(0, 0, 0, 0.14) 0px 3px 4px 0px, rgba(0, 0, 0, 0.12) 0px 3px 3px -2px",backgroundColor:"white",backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat"},e.breakpoints.up("md"),{height:416})}},{withTheme:!0})(ge))),he=(n(116),function(e){return{root:{display:"flex",width:"100%",textAlign:"center",position:"absolute"},menuLink:{minWidth:"130px",height:"30px",marginRight:8,color:e.palette.secondary.main,backgroundColor:"white",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2), 0px 6px 10px 0px rgba(0,0,0,0.14), 0px 1px 18px 0px rgba(0,0,0,0.12)","&:hover":{color:e.palette.secondary.main,backgroundColor:"#d5d5d5"}},title:Object(C.a)({lineHeight:"50%"},e.breakpoints.down("sm"),{display:"none"}),sectionDesktop:Object(C.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(C.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),background:"transparent",boxShadow:"none",zIndex:"999"},appBarShift:{width:"100%",marginLeft:0,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},hide:{display:"none"},drawer:{width:300,flexShrink:0},drawerPaper:{backgroundColor:e.palette.primary.dark,width:300,padding:"0 !important"},drawerHeader:Object(le.a)({display:"flex",alignItems:"center"},e.mixins.toolbar,{justifyContent:"flex-end"}),drawerIconButton:{padding:0,background:"white",margin:"8px 16px",opacity:.7,"&:hover":{backgroundColor:"white",opacity:1}},drawerIcon:{color:e.palette.secondary.main,fontSize:40},content:{flexGrow:1,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-300,padding:0},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},fixToRight:{position:"absolute",right:0},leftSubmenuLogo:{height:30,width:30,position:"relative",top:"50%",transform:"translateY(-50%)"},toolbar:{padding:0},divider:{backgroundColor:"rgba(255,255,255,.12)",margin:"8px 0"},menuButton:{padding:0,cursor:"pointer",height:48,width:48,backgroundColor:"white","&:hover":{backgroundColor:"white"}},logoBorder:{backgroundCOlor:"white",border:"2px solid white"}}}),me=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.auth,n=e.classes,a=this.props.commonStore.locale,r=this.props.organisationStore.values.orgTag||this.props.organisationStore.values.organisation.tag;return o.a.createElement("div",{className:n.fixToRight},o.a.createElement("div",{className:n.grow}),o.a.createElement("div",{className:n.sectionDesktop},!t&&o.a.createElement(k.c,{variant:"text",to:"/"+a+(r?"/"+r:"")+"/signin",component:P.a,className:n.menuLink},o.a.createElement(A.b,{id:"Sign In"}))))}}]),t}(r.Component),fe=Object(E.b)("commonStore","organisationStore")(Object(E.c)(Object(O.withStyles)(he,{withTheme:!0})(me))),be="https://pbs.twimg.com/profile_images/981455890342694912/fXaclV2Y_400x400.jpg",ve=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={type:n.props.type||"organisation",source:null,observer:function(){}},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;"organisation"===this.state.type&&(this.setState({source:this.props.organisationStore.values.organisation.logo&&this.props.organisationStore.values.organisation.logo.url?this.props.organisationStore.values.organisation.logo.url:be}),this.setState({observer:Object(j.m)(this.props.organisationStore.values,"organisation",function(t){var n=e.props.organisationStore.values.organisation;e.setState({source:n.logo&&n.logo.url?n.logo.url:be})})}))}},{key:"componentWillUnmount",value:function(){this.state.observer()}},{key:"render",value:function(){var e=this.state.source;return o.a.createElement(k.b,{src:e||this.props.src,alt:"org-logo",className:this.props.className,style:{backgroundColor:"white"}})}}]),t}(o.a.Component),ye=Object(E.b)("organisationStore")(Object(E.c)(ve)),we=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.auth;return o.a.createElement(k.F,{className:t.toolbar},o.a.createElement(k.m,{variant:"extended",className:t.menuButton,onClick:this.props.handleDrawerOpen,children:o.a.createElement(ye,null)}),!n&&o.a.createElement(fe,{auth:n}))}}]),t}(r.Component),Se=Object(E.b)("authStore","organisationStore")(Object(E.c)(Object(O.withStyles)(he,{withTheme:!0})(we))),Ee=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.open,a=e.auth;return o.a.createElement(k.a,{position:"fixed",color:"default",className:U()(t.appBar,Object(C.a)({},t.appBarShift,n))},o.a.createElement(Se,{handleDrawerOpen:this.props.handleDrawerOpen,open:n,auth:a}))}}]),t}(r.Component),ke=Object(O.withStyles)(he,{withTheme:!0})(Ee),Oe=n(40),Ce=n(43),Ae=(n(5975),Object(E.b)("recordStore")(Object(E.c)(function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={current:"unspecified",labels:{left:"unavailable",middle:"unspecified",right:"available"},observer:function(){}},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.recordStore.values.record&&this.props.recordStore.values.record.personAvailability?this.setState({current:this.props.recordStore.values.record.personAvailability}):this.setState({current:this.state.labels.middle}),this.setState({observer:Object(j.m)(this.props.recordStore.values,"record",function(t){e.setState({current:t.newValue.personAvailability||"unspecified"})})})}},{key:"componentWillUnmount",value:function(){this.state.observer()}},{key:"handleAvailabilityClick",value:function(e){this.setState({current:e}),this.props.recordStore.values.record&&(this.props.recordStore.values.record.personAvailability=e,this.props.recordStore.updateRecord())}},{key:"render",value:function(){var e=this,t=this.state.labels,n=this.state.current;return o.a.createElement("div",{id:"userStatusToggle",className:"menu-status-".concat(n)},o.a.createElement("a",{title:t.left,className:"u",onClick:function(){return e.handleAvailabilityClick(t.left)}}),o.a.createElement("a",{title:t.middle,className:"n",onClick:function(){return e.handleAvailabilityClick(t.middle)}}),o.a.createElement("a",{title:t.right,className:"a",onClick:function(){return e.handleAvailabilityClick(t.right)}}),o.a.createElement("div",null))}}]),t}(o.a.Component)))),je=n(65),xe=n.n(je),Te=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.organisationStore.getCurrentUserOrganisations().then(function(){e.forceUpdate()})}},{key:"render",value:function(){var e=this.props.organisationStore.values,t=e.currentUserOrganisations,n=e.orgTag,a=this.props.commonStore.locale,r=this.props.classes;return o.a.createElement(k.s,{className:r.orgsContainer},t.map(function(e,t){return e&&e.tag!==n?o.a.createElement(k.t,{button:!0,component:P.a,to:"/"+a+"/"+e.tag,key:e._id,className:r.orgItem},o.a.createElement(ye,{type:"smallOrg",alt:e.name,src:(e.logo?e.logo.url:null)||"https://pbs.twimg.com/profile_images/981455890342694912/fXaclV2Y_400x400.jpg",className:r.itemLogo}),o.a.createElement("div",{className:r.itemName},e.name)):null}))}}]),t}(o.a.Component),Pe=Object(E.b)("organisationStore","commonStore")(Object(E.c)(Object(O.withStyles)(function(e){return{orgItem:{position:"relative",display:"inline-block",width:"33.33%",textAlign:"center",padding:8},orgsContainer:{position:"relative",width:"100%",listStyleType:"none",textAlign:"left"},itemLogo:{position:"relative",left:0,right:0,margin:"auto",border:"2px solid white"},itemName:{textTransform:"uppercase",fontSize:"0.675rem",fontWeight:"600",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",marginTop:8,color:"white"}}},{withTheme:!0})(Te))),_e=new(0,n(249).XmlEntities),Ie=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={locale:n.props.commonStore.getCookie("locale")||n.props.commonStore.locale},n.handleLogout=n.handleLogout.bind(Object(Oe.a)(Object(Oe.a)(n))),n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"getPicturePath",value:function(e){return e&&e.path?null:e&&e.url?e.url:e&&e.uri?e.uri:null}},{key:"handleLogout",value:function(e){var t=this;e.preventDefault(),this.props.handleDrawerClose(),this.props.authStore.logout().then(function(){window.location.href=S.a.createUrl(window.location.host,"/"+t.props.organisationStore.values.orgTag||!1,null)})}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.auth,r=t.open,i=t.intl,s=t.theme,c=this.props.recordStore.values.record,l=this.props.organisationStore.values.organisation,u=this.props.userStore.values.currentUser,p=this.state.locale,g=u&&u.orgsAndRecords?u.orgsAndRecords.find(function(e){return e.organisation===l._id}):null;return c.name=_e.decode(c.name),l.name=_e.decode(l.name),o.a.createElement(k.B,{className:n.drawer,anchor:"left",open:r,onOpen:this.props.handleDrawerOpen,onClose:this.props.handleDrawerClose,classes:{paper:n.drawerPaper}},o.a.createElement("div",{tabIndex:0,role:"button",onClick:this.handleDrawerClose,onKeyDown:this.handleDrawerClose},o.a.createElement("div",{className:n.drawerHeader},o.a.createElement(k.q,{onClick:this.props.handleDrawerClose,className:n.drawerIconButton},o.a.createElement(Ce.d,{className:n.drawerIcon}))),o.a.createElement("div",{className:"leftMenu"},a&&l&&l._id&&o.a.createElement(o.a.Fragment,null,c&&c._id&&o.a.createElement(o.a.Fragment,null,o.a.createElement(k.s,{className:"leftSubmenu"},o.a.createElement(k.t,null,o.a.createElement(k.u,null,o.a.createElement(ye,{type:"person",src:this.getPicturePath(c.picture)||xe.a,alt:c.name||c.tag,className:n.logoBorder})),o.a.createElement(k.w,{primary:c.name||c.tag,primaryTypographyProps:{variant:"button",noWrap:!0,style:{fontWeight:"bold",color:"white"}}})),o.a.createElement(k.t,{button:!0,component:P.a,to:"/"+p+"/"+l.tag+"/"+c.tag,onClick:function(t){e.props.handleDisplayProfile(t,{tag:c.tag})}},o.a.createElement(k.w,{primary:i.formatMessage({id:"menu.drawer.profile"})})),o.a.createElement(k.t,null,o.a.createElement(k.w,{primary:i.formatMessage({id:"menu.drawer.availability"})}),o.a.createElement(k.v,null,o.a.createElement(Ae,null)))),o.a.createElement(k.l,{className:n.divider})),o.a.createElement(k.s,{className:"leftSubmenu"},o.a.createElement(k.t,{onClick:this.props.handleDrawerClose,component:P.a,to:"/"+p+"/"+l.tag},o.a.createElement(k.u,null,o.a.createElement(ye,{type:"organisation",alt:l.name,className:n.logoBorder})),o.a.createElement(k.w,{primary:l.name||l.tag,primaryTypographyProps:{variant:"button",noWrap:!0,style:{fontWeight:"bold",color:"white"}}})),l.canInvite&&o.a.createElement(k.t,{button:!0,component:"a",href:S.a.createUrl("wingzy-staging.wingzy.com","/invite",l.tag)},o.a.createElement(k.w,{primary:i.formatMessage({id:"menu.drawer.invite"}),primaryTypographyProps:{style:{fontWeight:"bold",color:s.palette.primary.main,textTransform:"uppercase"}}})),(u.superadmin||g&&g.admin)&&o.a.createElement(k.t,{button:!0,component:"a",href:S.a.createUrl("wingzy-staging.wingzy.com","/admin/organisation",l.tag),target:"_blank"},o.a.createElement(k.w,{primary:i.formatMessage({id:"menu.drawer.organisationAdmin"})})),o.a.createElement(k.t,null,o.a.createElement(k.w,{primary:l.premium?i.formatMessage({id:"menu.drawer.organisationInfoPremium"}):i.formatMessage({id:"menu.drawer.organisationInfo"})})),o.a.createElement(k.t,{button:!0,component:"a",href:"mailto:premium@wingzy.io",target:"_blank"},o.a.createElement(k.w,{primary:l.premium?i.formatMessage({id:"menu.drawer.contactUsPremium"}):i.formatMessage({id:"menu.drawer.contactUs"})})),u.orgsAndRecords&&u.orgsAndRecords.length>1&&o.a.createElement(o.a.Fragment,null,o.a.createElement(k.l,{className:n.divider}),o.a.createElement(k.t,null,o.a.createElement(k.w,{primary:i.formatMessage({id:"menu.drawer.listOrgTitle"}),primaryTypographyProps:{noWrap:!0,style:{fontWeight:"bold"}}})),o.a.createElement(Pe,null)),u.superadmin&&o.a.createElement(o.a.Fragment,null,o.a.createElement(k.l,{className:n.divider}),o.a.createElement(k.t,{button:!0,component:P.a,to:"/"+p+"/"+l.tag+"/onboard"},o.a.createElement(k.w,{primary:"Onboard"})))),o.a.createElement(k.l,{className:n.divider})),o.a.createElement(k.s,{className:"leftSubmenu"},!a&&o.a.createElement(o.a.Fragment,null,o.a.createElement(k.t,{button:!0,component:P.a,to:"/"+p+(l.tag?"/"+l.tag:"")+"/signin"},o.a.createElement(k.w,{primary:i.formatMessage({id:"Sign In"})})),o.a.createElement(k.l,{className:n.divider})),o.a.createElement(k.t,{button:!0,component:"a",href:S.a.createUrl("wingzy-staging.wingzy.com","/",void 0),target:"_blank"},o.a.createElement(k.w,{primary:i.formatMessage({id:"menu.drawer.whyWingzy"})})),!l.premium&&o.a.createElement(k.t,{button:!0,component:"a",href:S.a.createUrl("wingzy-staging.wingzy.com","/pricing",void 0),target:"_blank"},o.a.createElement(k.w,{primary:i.formatMessage({id:"menu.drawer.pricing"})})),o.a.createElement(k.t,{button:!0,component:"a",href:S.a.createUrl("wingzy-staging.wingzy.com","/terms",void 0),target:"_blank"},o.a.createElement(k.w,{primary:i.formatMessage({id:"menu.drawer.terms"})})),o.a.createElement(k.t,{button:!0,component:"a",href:S.a.createUrl("wingzy-staging.wingzy.com","/protectingYourData",l&&l.tag?l.tag:void 0),target:"_blank"},o.a.createElement(k.w,{primary:i.formatMessage({id:"menu.drawer.protectingYourData"})})),a&&o.a.createElement(o.a.Fragment,null,o.a.createElement(k.l,{className:n.divider}),o.a.createElement(k.t,{button:!0,onClick:this.handleLogout},o.a.createElement(k.w,{primary:i.formatMessage({id:"menu.drawer.logout"})})))))))}}]),t}(r.Component),Re=Object(E.b)("authStore","organisationStore","recordStore","commonStore","userStore")(Object(A.e)(Object(w.a)(Object(E.c)(Object(O.withStyles)(he,{withTheme:!0})(Ie))))),Ne=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).handleDrawerOpen=function(){n.setState({open:!0})},n.handleDrawerClose=function(){n.setState({open:!1})},n.handleLogout=function(){n.props.authStore.logout().then(n.setState({successLogout:!0}))},n.handleDisplayProfile=function(e,t){n.handleDrawerClose(),n.props.handleDisplayProfile(e,t)},n.state={successLogout:!1,open:!1,auth:n.props.authStore.isAuth()},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.open,n=e.successLogout,a=e.auth,r=this.props.classes;return n?o.a.createElement(y.a,{to:"/"}):o.a.createElement("div",{className:r.root},o.a.createElement(k.k,null),o.a.createElement(ke,{handleDrawerOpen:this.handleDrawerOpen,open:t,auth:a}),o.a.createElement(Re,{handleDrawerOpen:this.handleDrawerOpen,handleDrawerClose:this.handleDrawerClose,open:t,auth:a,handleDisplayProfile:this.handleDisplayProfile}),o.a.createElement("div",{className:r.drawerHeader}))}}]),t}(r.Component),Le=Object(E.b)("commonStore","userStore","authStore","organisationStore")(Object(E.c)(Object(O.withStyles)(he,{withTheme:!0})(Ne))),Ue=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.match&&this.props.match.params&&this.props.match.params.invitationCode&&this.props.authStore.setInvitationCode(this.props.match.params.invitationCode)}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.initialTab;return o.a.createElement("div",null,o.a.createElement(Le,null),o.a.createElement("main",null,o.a.createElement(k.n,{container:!0,direction:"column",justify:"space-around",alignItems:"center"},o.a.createElement(k.n,{container:!0,item:!0,alignItems:"stretch"},o.a.createElement(de,null)),o.a.createElement(k.n,{item:!0,container:!0,justify:"center"},o.a.createElement(ye,{type:"organisation",alt:"org-logo",className:t.logo})),o.a.createElement(k.n,{container:!0,item:!0,xs:12,sm:6,lg:4},o.a.createElement(ce,{initialTab:n||0})))))}}]),t}(o.a.Component),We=Object(E.b)("authStore")(Object(O.withStyles)({logo:{width:"6.6rem",height:"6.6rem",boxShadow:"0 5px 15px -1px darkgrey, 0 0 0 5px transparent",bottom:"3.2rem",marginBottom:"-7rem",zIndex:2,border:"4px solid white"}})(Object(E.c)(Ue)));ee.a.initialize(Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_ROOT_AUTH:"auth-staging.wingzy.com",REACT_APP_API_ROOT:"wingzy-staging.wingzy.com",REACT_APP_HOST_BACKFLIP:"wingzy-staging.wingzy.com",REACT_APP_ALGOLIA_APPLICATION_ID:"RSXBUBL0PB",REACT_APP_ALGOLIA_INDEX:"world",REACT_APP_CLIENT_ID:"frontflip",REACT_APP_CLIENT_SECRET:"abcd1234",REACT_APP_GOOGLE_CLIENT_ID:"949146759338-80qp26enlj58hd3d5u2ieikrdv9o0t6a.apps.googleusercontent.com"}).REACT_APP_GOOGLE_ANALYTICS_ID);var ze=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).handleEmailChange=function(e){n.props.authStore.setEmail(e.target.value)},n.handleSubmitForm=function(e){e.preventDefault(),n.props.authStore.passwordForgot().then(function(e){n.setState({successPasswordReset:!0})}).catch(function(e){n.setState({emailError:n.props.intl.formatMessage({id:"signin.error.unknown"})}),n.setState({successPasswordReset:!1})})},n.state={successPasswordReset:!1,emailError:null},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){ee.a.pageview(window.location.pathname),this.props.match&&this.props.match.params&&this.props.match.params.organisationTag&&(this.props.organisationStore.setOrgTag(this.props.match.params.organisationTag),this.props.organisationStore.getOrganisationForPublic())}},{key:"render",value:function(){var e=this.state,t=e.successPasswordReset,n=e.emailError,a=this.props,r=a.classes,i=a.intl;return o.a.createElement(k.n,{container:!0,direction:"column",justify:"space-around"},o.a.createElement(k.n,{container:!0,item:!0},o.a.createElement(Le,null)),o.a.createElement(k.n,{container:!0,item:!0,alignItems:"stretch"},o.a.createElement(de,null)),o.a.createElement(k.n,{container:!0,item:!0,justify:"center"},o.a.createElement(ye,{type:"organisation",alt:"org-logo",className:r.logo})),o.a.createElement(k.n,{container:!0,item:!0,justify:"center",className:r.container},t&&o.a.createElement(k.n,{container:!0,item:!0,xs:12,sm:6,lg:4,spacing:16},o.a.createElement(k.n,{item:!0,container:!0},o.a.createElement($,{variant:"success",message:i.formatMessage({id:"password.forgot.success"})}))),!t&&o.a.createElement("form",{onSubmit:this.handleSubmitForm,className:r.form},o.a.createElement(k.n,{item:!0,container:!0,direction:"column",xs:12,sm:6,lg:4,spacing:16},o.a.createElement(k.H,{variant:"h6",className:r.intro},o.a.createElement(A.a,{id:"password.forgot.intro"})),n&&o.a.createElement(k.n,{item:!0},o.a.createElement($,{variant:"warning",message:n})),o.a.createElement(k.n,{item:!0},o.a.createElement(k.E,{label:"Email",type:"email",autoComplete:"email",variant:"outlined",fullWidth:!0,onChange:this.handleEmailChange,required:!0})),o.a.createElement(k.n,{item:!0},o.a.createElement(k.c,{fullWidth:!0,type:"submit",color:"primary"},o.a.createElement(A.b,{id:"password.forgot.send"})))))))}}]),t}(o.a.Component),De=Object(E.b)("authStore","organisationStore")(Object(A.e)(Object(E.c)(Object(O.withStyles)(function(e){return{logo:Object(C.a)({width:110,height:110,boxShadow:"0 5px 15px -1px darkgrey, 0 0 0 5px transparent",bottom:60,zIndex:2,marginBottom:-50},e.breakpoints.down("xs"),{marginBottom:-56}),container:Object(C.a)({},e.breakpoints.down("xs"),{padding:8}),intro:Object(C.a)({textAlign:"center"},e.breakpoints.down(400),{padding:5}),form:{width:"100%"}}})(ze))));ee.a.initialize(Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_ROOT_AUTH:"auth-staging.wingzy.com",REACT_APP_API_ROOT:"wingzy-staging.wingzy.com",REACT_APP_HOST_BACKFLIP:"wingzy-staging.wingzy.com",REACT_APP_ALGOLIA_APPLICATION_ID:"RSXBUBL0PB",REACT_APP_ALGOLIA_INDEX:"world",REACT_APP_CLIENT_ID:"frontflip",REACT_APP_CLIENT_SECRET:"abcd1234",REACT_APP_GOOGLE_CLIENT_ID:"949146759338-80qp26enlj58hd3d5u2ieikrdv9o0t6a.apps.googleusercontent.com"}).REACT_APP_GOOGLE_ANALYTICS_ID);var Be=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).handlePasswordChange=function(e){n.props.authStore.setPassword(e.target.value)},n.handleSubmitForm=function(e){e.preventDefault(),n.props.authStore.updatePassword(n.props.match.params.token,n.props.match.params.hash).then(function(e){n.setState({redirectTo:"/"+n.props.commonStore.locale+(n.props.organisationStore.values.orgTag?"/"+n.props.organisationStore.values.orgTag:"")})}).catch(function(e){var t;422===e.status&&e.response.body.errors.forEach(function(e){"password"===e.param&&(t="dumb"===e.type?(t?t+"<br/>":"")+n.props.intl.formatMessage({id:"signup.error.dumbPassword"},{dumbCount:(3e4*parseInt(e.msg)).toLocaleString()}):(t?t+"<br/>":"")+n.props.intl.formatMessage({id:"signup.error.shortPassword"}))}),t||n.props.intl.formatMessage({id:"signup.error.generic"}),n.setState({passwordErrors:t})})},n.state={passwordErrors:null,locale:n.props.commonStore.getCookie("locale")||n.props.commonStore.locale,userEmail:n.props.match.params&&n.props.match.params.email?n.props.match.params.email:null,redirectTo:null},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){ee.a.pageview(window.location.pathname),this.props.match&&this.props.match.params&&this.props.match.params.organisationTag&&(this.props.organisationStore.setOrgTag(this.props.match.params.organisationTag),this.props.organisationStore.getOrganisationForPublic())}},{key:"render",value:function(){var e=this.props.authStore,t=e.values,n=e.inProgress,a=this.state,r=a.passwordErrors,i=a.userEmail,s=a.redirectTo,c=this.props,l=c.classes,u=c.intl;return s?o.a.createElement(y.a,{push:!0,to:s}):o.a.createElement(k.n,{container:!0,direction:"column",justify:"space-around"},o.a.createElement(k.n,{container:!0,item:!0},o.a.createElement(Le,null)),o.a.createElement(k.n,{container:!0,item:!0,alignItems:"stretch"},o.a.createElement(de,null)),o.a.createElement(k.n,{container:!0,item:!0,justify:"center"},o.a.createElement(ye,{type:"organisation",alt:"org-logo",className:l.logo})),o.a.createElement(k.n,{container:!0,item:!0,justify:"center",className:l.container},o.a.createElement("form",{onSubmit:this.handleSubmitForm,className:l.form},o.a.createElement(k.n,{item:!0,container:!0,direction:"column",xs:12,sm:6,lg:4,spacing:16},!i&&o.a.createElement(k.H,{variant:"h6",className:l.intro},o.a.createElement(A.a,{id:"password.new.intro",values:{userEmail:t.email}})),i&&o.a.createElement("div",null,o.a.createElement(k.n,{item:!0},o.a.createElement(k.H,{variant:"h4",className:l.title},this.props.organisationStore.values.orgTag&&o.a.createElement(A.a,{id:"password.create.title.orgTag",values:{orgTag:this.props.organisationStore.values.orgTag}}),!this.props.organisationStore.values.orgTag&&o.a.createElement(A.a,{id:"password.create.title.noOrgTag"}))),o.a.createElement(k.H,{variant:"h6",className:l.intro},o.a.createElement(A.a,{id:"password.create.intro",values:{userEmail:t.email}}))),r&&o.a.createElement(k.n,{item:!0},o.a.createElement($,{variant:"warning",message:r})),i&&o.a.createElement(k.n,{item:!0},o.a.createElement(k.E,{label:"Email",fullWidth:!0,variant:"outlined",disabled:!0,value:i})),o.a.createElement(k.n,{item:!0},o.a.createElement(k.E,{label:u.formatMessage({id:"Password"}),type:"password",fullWidth:!0,variant:"outlined",onChange:this.handlePasswordChange,required:!0})),o.a.createElement(k.n,{item:!0},n&&o.a.createElement(k.i,{color:"secondary"}),!n&&o.a.createElement(k.c,{fullWidth:!0,type:"submit",color:"secondary"},!i&&o.a.createElement(A.b,{id:"password.new.create"}),i&&o.a.createElement(A.b,{id:"password.create.next"}))),o.a.createElement(k.n,{item:!0,container:!0,direction:"row",justify:"space-between"},o.a.createElement(k.n,{item:!0,lg:6},o.a.createElement(k.c,{className:l.term,variant:"text",fullWidth:!0,component:"a",target:"_blank",href:S.a.createUrl("wingzy-staging.wingzy.com","/terms",void 0)},o.a.createElement(A.b,{id:"menu.drawer.terms"}))),o.a.createElement(k.n,{item:!0,lg:6},o.a.createElement(k.c,{className:l.protectingData,variant:"text",fullWidth:!0,component:"a",target:"_blank",href:S.a.createUrl("wingzy-staging.wingzy.com","/protectingYourData",void 0)},o.a.createElement(A.b,{id:"menu.drawer.protectingYourData",style:{justifyContent:"flex-end!important"}}))))))))}}]),t}(o.a.Component),Me=Object(E.b)("authStore","organisationStore","commonStore")(Object(A.e)(Object(E.c)(Object(O.withStyles)(function(e){return{logo:Object(C.a)({width:110,height:110,boxShadow:"0 5px 15px -1px darkgrey, 0 0 0 5px transparent",bottom:60,zIndex:2,marginBottom:-50},e.breakpoints.down("xs"),{marginBottom:-56}),container:Object(C.a)({},e.breakpoints.down("xs"),{padding:8}),intro:Object(C.a)({textAlign:"center"},e.breakpoints.down(400),{padding:5}),title:Object(C.a)({textAlign:"center",color:"unset",paddingTop:16,paddingBottom:16},e.breakpoints.down(400),{padding:5}),form:{width:"100%"},term:Object(C.a)({},e.breakpoints.down("md"),{justifyContent:"end",padding:"8px 16px"}),protectingData:Object(C.a)({},e.breakpoints.down("md"),{justifyContent:"flex-end",padding:"8px 16px"})}})(Be)))),Fe=n(90),He=n.n(Fe),Ge=n(208),Ke=n(211),Ye=(n(446),n(463)),qe=n(464),Ve=n.n(qe),Qe=new(function(){function e(){Object(c.a)(this,e),this.EXTRA_LINK_LIMIT=20,this.makeHightlighted=function(e){if(e){var t=ae.a.getSearchFilters()||ae.a.searchFilters;t&&t.length>0&&e.hashtags&&e.hashtags.length>0&&e.hashtags.forEach(function(n,a){n.tag&&t.find(function(e){return e.value.toLowerCase()===n.tag.toLowerCase()})&&(e.hashtags[a].class="highlighted")})}},this.orderHashtags=function(e){if(e&&e.hashtags){var t=[],n=[];e.hashtags.forEach(function(e){"highlighted"===e.class?t.push(e):n.push(e)}),e.hashtags=t.concat(n)}},this.htmlDecode=function(e){var t=document.createElement("textarea");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue}}return Object(l.a)(e,[{key:"setExtraLinkLimit",value:function(e){this.EXTRA_LINK_LIMIT=e}},{key:"getProfileType",value:function(e){return"#"===e.charAt(0)?"hashtag":"@"===e.charAt(0)?"person":null}},{key:"getDefaultPictureByType",value:function(e){return"hashtag"===e?Ve.a:"person"===e?xe.a:null}},{key:"transformLinks",value:function(e){e&&(e.links=e.links||[],e.links.forEach(function(e,t,n){this.makeLinkDisplay(e),this.makeLinkIcon(e),this.makeLinkUrl(e),t>this.EXTRA_LINK_LIMIT-1&&(e.class="extraLink")}.bind(this)))}},{key:"makeLinkIcon",value:function(e){switch(e.type){case"email":e.icon="envelope-o";break;case"address":case"location":e.icon="map-marker";break;case"hyperlink":e.icon="link";break;case"workplace":e.icon="user";break;case"workchat":e.icon="comment";break;default:e.icon=e.type}}},{key:"makeLinkDisplay",value:function(e){e.display=e.display||e.value}},{key:"makeLinkUrl",value:function(e){if(e.url=e.url||e.uri,!e.url||"workplace"===e.type||"workchat"===e.type)switch(e.type){case"email":e.url="mailto:"+e.value;break;case"phone":case"home":e.url="tel:"+e.value;break;case"address":e.url="http://maps.google.com/?q="+encodeURIComponent(e.value);break;case"workplace":e.url=this.setWorkplaceLink(e.url);break;case"workchat":e.url=this.setWorkchatLink(e.url);break;default:e.url=e.value}}},{key:"setWorkplaceLink",value:function(e){if(e){if(this.mobileAndTabletcheck()){var t=e.split(".");return t[0]="https://workplace",t.join(".")}return e}}},{key:"setWorkchatLink",value:function(e){if(e){var t=this.setWorkplaceLink(e);if(e===t)return e;var n=t.split("/");return n[n.length-2]="thread",n[n.length-3]="messages",n.join("/")}}},{key:"mobileAndTabletcheck",value:function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}},{key:"getPicturePathResized",value:function(e,t,n){var a=this.getPicturePath(e,t);return a=this.resizePicture(a,n)}},{key:"getPicturePath",value:function(e,t){return e&&e.emoji?this.getEmojiUrl(e.emoji):e&&e.url?e.url:e&&e.uri?e.uri:(e&&e.path,null)}},{key:"resizePicture",value:function(e,t){if(!e||!t)return e;var n=e.split("/resize/");return 2===n.length?(n[1]="/"+t+"/",n.join("/resize/")):e}},{key:"getRandomEmoji",value:function(){var e=["\ud83d\udcd3","\ud83d\udcd4","\ud83d\udcd2","\ud83d\udcd5","\ud83d\udcd7","\ud83d\udcd8","\ud83d\udcd9"],t=Math.floor(Math.random()*Math.floor(e.length-1));return this.getEmojiUrl(e[t])}},{key:"getEmojiUrl",value:function(e){var t=Ye.a.parse(e);return(t=(t=t.split(/ /g))[4].split(/"/g))[1]}}]),e}()),Xe=function(e){return o.a.createElement(k.h,{label:e.children,color:"primary",onClick:e.onClick,className:"editableChip"})},Ze=function(e){var t=e.innerProps;return o.a.createElement("div",Object.assign({},t,{className:"custom-option"}),o.a.createElement("div",{className:"custom-option-main"},e.data.picturePath&&o.a.createElement("img",{alt:"img-logo",src:e.data.picturePath||("person"===Qe.getProfileType(e.data.value)?"https://"+window.location.host+xe.a:null),className:"custom-option-img"}),o.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.data.label},className:"custom-option-label"})),e.data.value&&Qe.getProfileType(e.data.value)&&o.a.createElement("div",{className:"custom-option-secondary"},e.data.value))},Je={control:function(e,t){return Object(le.a)({},e,{borderRadius:"30px",boxSizing:"border-box",border:t.isFocused?"2px solid #FF0018":"1px solid #FF0018",boxShadow:(t.isFocused,null),"&:hover":{borderColor:(t.isFocused,"#FF0018"),boxSizing:"border-box"},padding:"2px 16px",minHeight:48,maxHeight:48,fontSize:16})},menu:function(e){return Object(le.a)({},e,{borderRadius:"30px",overflow:"hidden",hyphens:"auto",textAlign:"center",wordWrap:"break-word"})},menuList:function(e){return Object(le.a)({},e,{padding:0})},input:function(e){return Object(le.a)({},e,{padding:0,marginLeft:8})},multiValue:function(e){return Object(le.a)({},e,{display:"inline-block"})},placeholder:function(e){return Object(le.a)({},e,{marginLeft:8})},valueContainer:function(e,t){return Object(le.a)({},e,{padding:"0 !important",margin:0,marginLeft:0,overflowY:"hidden",overflow:"auto",wordWrap:"white-space",WebkitFlexWrap:"unset !important",flexWrap:"unset !important",MsFlexWrap:"unset !important",maxHeight:42,scrollbarWidth:"thin","&:last-child":{marginBottom:8}})}},$e=n(132),et=n.n($e),tt=n(69),nt=new(function(){function e(t){var n=this;Object(c.a)(this,e),this.indexName="world",t&&(this.algoliaKey=t,this.client=et()("RSXBUBL0PB",this.algoliaKey),this.index=this.client.initIndex(this.indexName),Object(j.m)(ae.a,"algoliaKey",function(e){n.client.clearCache(),ae.a.algoliaKey?(n.algoliaKey=ae.a.algoliaKey,n.client=et()("RSXBUBL0PB",n.algoliaKey),n.index=n.client.initIndex(n.indexName)):tt.a.getAlgoliaKey(!0).then(function(e){n.algoliaKey=e,n.client=et()("RSXBUBL0PB",n.algoliaKey),n.index=n.client.initIndex(n.indexName)}).catch()}))}return Object(l.a)(e,[{key:"setAlgoliaKey",value:function(e){e&&(this.algoliaKey=e,this.client=et()("RSXBUBL0PB",e),this.index=this.client.initIndex(this.indexName))}},{key:"fetchFacetValues",value:function(e,t,n,a){var r=this;return this.index?new Promise(function(o,i){r.index.searchForFacetValues({facetName:"hashtags.tag",query:a||"",facetQuery:"",filters:n||"",maxFacetHits:40,facetFilters:e&&null!==t?r.makeFacetFilters(e,t):""},function(e,t){return o(t)})}):Promise.resolve()}},{key:"fetchHashtags",value:function(){var e=this;return this.index?new Promise(function(t,n){e.index.search({facetFilters:["type:hashtag"],maxFacetHits:40},function(e,n){return t(n)})}):Promise.resolve()}},{key:"makeFacetFilters",value:function(e,t){var n=[];return t&&n.push("organisation:"+tt.a.values.organisation._id),e&&n.push("hashtags.tag:"+e.tag),n}},{key:"loadBank",value:function(e){var t=this;return this.index?new Promise(function(n,a){var r=ae.a.getLocalStorage("wingsBank",!0);!e&&r&&r.length>0&&n(),t.index.search({filters:e?"type:hashtag AND "+e:"type:hashtag",hitsPerPage:50},function(e,a){t.addToLocalStorage(a.hits).then(function(){n()})})}):Promise.resolve()}},{key:"addToLocalStorage",value:function(e){return new Promise(function(t,n){var a=ae.a.getLocalStorage("wingsBank",!0)||[];e.forEach(function(e){var t=a.findIndex(function(t){return t.tag===e.Tag});-1===t?a.push(e):a[t]=e}),ae.a.setLocalStorage("wingsBank",a,!0).then(function(){t()})})}},{key:"fetchOptions",value:function(e,t,n){var a=this;return this.index?new Promise(function(r,o){a.index.search({query:e,filters:a.makeOptionsFilters(t,n),attributesToRetrieve:["type","name","name_translated","tag","picture"],restrictSearchableAttributes:["name","name_translated","tag"],highlightPreTag:"<span>",highlightPostTag:"</span>",hitsPerPage:5},function(e,t){return r(t)})}):Promise.resolve()}},{key:"makeOptionsFilters",value:function(e,t){var n="";return e&&(n+="type:hashtag"),t&&(n+=" AND hashtags.tag:"+t),n}},{key:"fetchHits",value:function(e,t,n,a){var r=this;return this.index?new Promise(function(o,i){r.index.search({page:a||0,query:t||"",facetFilters:n||"",filters:e||"type:person",hitsPerPage:35,attributesToSnippet:["intro:15","description:15"]},function(e,t){return o(e?t:t||null)})}):Promise.resolve()}}]),e}())(ae.a.algoliaKey),at={secondary:{light:"#EFA3A0",main:"#FF0018",dark:"#BA0012"},primary:{main:"#cccfe5",dark:"#2b2d3c",hover:"#aaacbe",contrastText:"#fff"},background:{default:"#f2f2f2"}},rt=Object(O.createMuiTheme)({palette:at,typography:{useNextVariants:!0,fontSize:12,fontFamily:['"Open sans"',"-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},overrides:{MuiGrid:{"spacing-xs-16":{width:"auto",margin:"auto"}},MuiTypography:{root:{},h6:{display:"block",padding:8},h5:{color:"white",fontWeight:"700"},h4:{color:"white",fontWeight:"400"},body1:{color:"white",fontWeight:"400",fontSize:"0.95rem"},body2:{fontWeight:"600"}},MuiAvatar:{img:{height:"auto"}},MuiButton:{root:{borderRadius:30,height:"56px",fontWeight:"600",transition:"all 250ms",padding:"8px 24px"},disabled:{color:at.primary.hover+"!important"},contained:{"&:hover":{backgroundColor:at.secondary.dark,color:"white"}},text:{color:"darkgrey","&:hover":{color:"black"}}},MuiIconButton:{root:{color:"#DDE9EB",padding:8}},MuiChip:{root:{padding:"6px 12px",fontWeight:"600",margin:"16px 8px 4px 8px",fontSize:"0.8125rem"},label:{"& div":{fontSize:"0.8125rem"},"& div:nth-child(2)":{cursor:"pointer",height:22,width:22,borderRadius:"50%"}},colorPrimary:{color:at.primary.dark,backgroundColor:at.primary.main,"&:hover":{color:at.primary.dark,backgroundColor:at.primary.hover+" !important"}},colorSecondary:{color:"white",backgroundColor:at.primary.dark,"&:hover":{backgroundColor:at.primary.hover+" !important"}}},MuiBackdrop:{root:{filter:"brightness(0) invert(1)"}},MuiCard:{root:{padding:0,borderRadius:16,margin:15,marginLeft:0,boxShadow:"0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)",transition:"all 0.3s cubic-bezier(.25,.8,.25,1)","&:hover":{boxShadow:"0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22)"}}},MuiFab:{root:{transition:"filter 0.3s cubic-bezier(.25,.8,.25,1)","&:hover":{filter:"brightness(88%)"}}},MuiCardActions:{root:{padding:"0 8px!important",display:"flex"}},MuiCardContent:{root:{padding:"0 0 8px 8px!important",whiteSpace:"nowrap",overflowX:"scroll"}},MuiCardHeader:{root:{width:"100%",backgroundColor:at.primary.dark},content:{display:"inline-grid",textAlign:"left",resize:"horizontal"}},MuiAppBar:{root:{height:64,maxWidth:"100vw",left:"0 !important"}},MuiDrawer:{root:{height:64}},MuiPaper:{root:{padding:"16px"}},MuiDialog:{paper:{margin:16}},MuiOutlinedInput:{root:Object(C.a)({backgroundColor:"white",borderRadius:30},"& fieldset",{borderRadius:30}),input:{borderRadius:30,fontSize:"large",color:at.primary.dark},adornedEnd:{paddingRight:8}},MuiInputLabel:{shrink:{fontWeight:"600",fontSize:"medium"}},MuiList:{padding:{paddingTop:0,paddingBottom:0}},MuiListItem:{root:{paddingTop:8,paddingBottom:8}},MuiTab:{root:{fontSize:"0.875rem!important",fontWeight:"600","&:hover":{color:at.secondary.main}},labelContainer:{padding:"0px!important"}},MuiMobileStepper:{dot:{backgroundColor:at.primary.main,margin:8},dotActive:{transform:"scale(1.5)",backgroundColor:at.secondary.main}}},props:{MuiButton:{variant:"contained"},MuiInput:{margin:"none"}}}),ot=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).prepareLabels=function(e){var t=[];return e.forEach(function(e){var a,r;"hashtag"===e.type?(r=n.getTextLabel(e),a=e._highlightResult&&e._highlightResult.name_translated&&e._highlightResult.name_translated[n.state.locale]&&e._highlightResult.name_translated[n.state.locale].value?e._highlightResult.name_translated[n.state.locale].value:e._highlightResult&&e._highlightResult.name&&e._highlightResult.name.value?e._highlightResult.name.value:e._highlightResult&&e._highlightResult.tag&&e._highlightResult.tag.value?e._highlightResult.tag.value:n.getTextLabel(e)):"person"===e.type&&(r=e.name||e.tag,a=e._highlightResult&&e._highlightResult.name&&e._highlightResult.name.value?e._highlightResult.name.value:e.name||e.tag),t.push({label:a,value:e.tag,labelText:r,picturePath:Qe.getPicturePath(e.picture,"hashtag")})}),t},n.getTextLabel=function(e){return e?e.name_translated?e.name_translated[n.state.locale]||e.name_translated["en-UK"]||e.name||e.tag:e.name||e.tag:""},n.getOptionValue=function(e){return e.value},n.getOptionLabel=function(e){return Qe.htmlDecode(e.labelText||e.label)},n.handleChange=function(e){n.scrollToBottom(),n.props.hashtagOnly?n.setState({inputValue:"",selectedOption:null},function(){e&&n.props.handleAddWing(null,{tag:e.value||e.tag})}):(n.props.commonStore.setSearchFilters(e),n.setState({selectedOption:e,inputValue:""},function(){n.refineWithSelectedOptions(e),n.props.updateFilters(e)}))},n.refineWithSelectedOptions=function(e){var t="";e&&e.length>0&&e.forEach(function(e){t+=e.label+" "}),n.updateOptions(t)},n.getOptions=function(){var e=Object(f.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.updateOptions(t);case 2:return a=e.sent,e.abrupt("return",n.prepareLabels(a.hits));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.updateOptions=function(){var e=Object(f.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt.fetchOptions(t,n.props.hashtagOnly,n.props.wingsFamily);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.handleCreateOption=function(){var e=Object(f.a)(m.a.mark(function e(t){var a,r,o;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.props.hashtagOnly){e.next=7;break}return a=n.state.selectedOption||[],t=t.trim(),a.push({label:t,value:t}),e.abrupt("return",n.handleChange(a));case 7:if(r={name:t,type:"hashtag"},!n.props.wingsFamily){e.next=14;break}return n.props.recordStore.setRecordTag(n.props.wingsFamily),e.next=12,n.props.recordStore.getRecordByTag();case 12:o=e.sent,r.hashtags=[o];case 14:return e.abrupt("return",n.props.recordStore.postRecord(r).then(function(e){return n.handleChange(e)}).catch(function(e){return console.log(e)}));case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.noOptionsMessage=function(e){return e.inputValue?n.props.intl.formatMessage({id:"algolia.noOptions"},{input:e.inputValue}):n.props.intl.formatMessage({id:"algolia.typeSomething"})},n.createOptionMessage=function(e){return n.props.hashtagOnly?n.props.intl.formatMessage({id:"algolia.createWing"},{input:e}):n.props.intl.formatMessage({id:"algolia.createOption"},{input:e})},n.handleSearchClick=function(e){""!==e.selectProps.inputValue.trim()&&n.handleCreateOption(e.selectProps.inputValue)},n.onInputChange=function(e,t){switch(t.action){case"input-change":return void n.setState({inputValue:e});case"menu-close":var a=void 0;return n.state.inputValue&&(a=!0),void n.setState({menuIsOpen:a});default:return}},n.onKeyDown=function(e){switch(e.keyCode){case 13:e.preventDefault(),n.handleSearchClick({selectProps:{inputValue:n.state.inputValue}});break;default:return}},n.state={inputValue:"",selectedOption:n.props.defaultValue,placeholder:n.props.intl.formatMessage({id:n.props.hashtagOnly?"algolia.onboard":"algolia.search"}),locale:n.props.commonStore.getCookie("locale")||n.props.commonStore.locale,observer:function(){}},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){if(!this.props.hashtagOnly&&e.newFilter.value&&e.newFilter.label)if(this.state.selectedOption&&!this.state.selectedOption.some(function(t){return t.value===e.newFilter.value})){var t=this.state.selectedOption;t.push(e.newFilter),this.handleChange(t)}else this.handleChange([e.newFilter])}},{key:"componentDidMount",value:function(){var e=this;nt.setAlgoliaKey(this.props.commonStore.algoliaKey),this.setState({observer:Object(j.m)(this.props.commonStore,"algoliaKey",function(t){nt.setAlgoliaKey(e.props.commonStore.algoliaKey)})})}},{key:"componentWillUnmount",value:function(){this.state.observer()}},{key:"scrollToBottom",value:function(){var e=Object(f.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout(function(){var e=document.querySelector(".autocomplete-search div div:nth-child(1)");e&&(e.scrollLeft=e.scrollWidth)},100);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.defaultOptions,n=this.state,a=n.selectedOption,r=n.placeholder,i=n.inputValue;return o.a.createElement(Ke.a,{formatCreateLabel:this.createOptionMessage,styles:Je,className:U()("autocomplete-search",this.props.className),value:a,noOptionsMessage:this.noOptionsMessage,getOptionValue:this.getOptionValue,getOptionLabel:this.getOptionLabel,defaultOptions:t,loadOptions:this.getOptions,placeholder:r,onChange:this.handleChange,onCreateOption:this.handleCreateOption,components:{MultiValueContainer:Xe,DropdownIndicator:function(t){return o.a.createElement(Ke.b.DropdownIndicator,t,o.a.createElement(Ce.g,{onClick:function(){e.handleSearchClick(t)},style:{color:rt.palette.primary.main}}))},Option:Ze},isMulti:!this.props.hashtagOnly,onSelectResetsInput:!0,onBlurResetsInput:!0,onCloseResetsInput:!1,arrowRenderer:function(){return null},clearRenderer:function(){return null},inputValue:i,onInputChange:this.onInputChange,onKeyDown:this.onKeyDown})}}]),t}(o.a.Component),it=Object(E.b)("commonStore","recordStore")(Object(E.c)(Object(A.e)(Object(O.withTheme)()(ot)))),st=n(61),ct=n.n(st),lt=(n(452),n(6216),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).handleToggle=function(){n.setState(function(e){return{open:!e.open}})},n.handleClose=function(e){n.anchorEl.contains(e.target)||n.setState({open:!1})},n.deleteAlert=function(){alert("Do you really want to delete this awesome profile ?")},n.state={open:!1},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.urlUpdateCover,r=t.urlEditIntro,i=t.urlEditAboutMe,s=t.urlDeleteProfile,c=this.state.open;return o.a.createElement("div",{className:n.root},o.a.createElement(k.q,{className:n.button,buttonRef:function(t){e.anchorEl=t},"aria-owns":c?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:this.handleToggle},o.a.createElement(Ce.f,{fontSize:"default"})),o.a.createElement(k.A,{open:c,anchorEl:this.anchorEl,transition:!0,disablePortal:!0},function(t){var c=t.TransitionProps,l=t.placement;return o.a.createElement(k.o,Object.assign({},c,{id:"menu-list-grow",style:{transformOrigin:"bottom"===l?"center top":"center bottom"}}),o.a.createElement(k.z,{className:n.paper},o.a.createElement(k.j,{onClickAway:e.handleClose},o.a.createElement(k.y,null,o.a.createElement(k.x,{button:!0,component:"a",href:a},o.a.createElement(A.b,{id:"profile.updateCover"})),o.a.createElement(k.x,{button:!0,component:"a",href:r},o.a.createElement(A.b,{id:"profile.editIntro"})),o.a.createElement(k.x,{button:!0,component:"a",href:i},o.a.createElement(A.b,{id:"profile.editAboutMe"})),o.a.createElement(k.x,{button:!0,component:"a",onClick:e.deleteAlert,href:s},o.a.createElement(A.b,{id:"delete profile"}))))))}))}}]),t}(o.a.Component)),ut=Object(O.withStyles)(function(e){return{root:{display:"flex",borderRadius:30,zIndex:1,position:"fixed"},button:{position:"fixed",right:0,margin:16,padding:0,minWidth:40,height:40,backgroundColor:"white",color:e.palette.secondary.main,boxShadow:"none",opacity:.7,"&:hover":{backgroundColor:"white",opacity:1}},paper:{marginTop:8,marginRight:16}}})(lt),pt=Object(O.withStyles)(function(e){return{wingImg:{height:48,width:48,margin:"-5px -6px 0 -15px",boxShadow:"none",backgroundColor:"transparent",overflow:"visible"},highlighted:{backgroundColor:e.palette.primary.dark,color:"white","&:hover":{backgroundColor:e.palette.primary.dark+" !important",color:"white !important"}},button:{backgroundColor:e.palette.secondary.main,color:"white","&:hover":{backgroundColor:e.palette.secondary.dark+" !important"}},suggestionWing:{backgroundColor:"white",color:e.palette.primary.dark,transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms","&:hover":{backgroundColor:"rgba(0,0,0,.08)",color:e.palette.primary.dark}},removable:{paddingRight:0,"&:hover":{backgroundColor:e.palette.primary.main+" !important"}},animated:{background:e.palette.secondary.main,color:"white",transform:"scale(0)",animation:"250ms ease-in wingEaseIn",animationFillMode:"forwards"},bigWing:{transform:"scale(1.3)",marginTop:32,marginLeft:32,marginRight:32},"@keyframes wingEaseIn":{from:{background:e.palette.secondary.main,color:"white",transform:"scale(0)"},"85%":{background:e.palette.secondary.main},to:{background:e.palette.primary.main,color:e.palette.primary.dark,transform:"scale(1)"}}}})(function(e){var t=e.src,n=e.label,a=Object(_.a)(e,["src","label"]);return t?o.a.createElement(k.h,{avatar:o.a.createElement(k.b,{className:a.classes.wingImg,src:t,alt:"wings-img"}),label:n,color:"primary",className:U()(a.classes[a.className],a.onDelete?a.classes.removable:null),onClick:a.onClick,onDelete:a.onDelete,onMouseDown:a.onMouseDown,onMouseUp:a.onMouseUp,onBlur:a.onBlur}):o.a.createElement(k.h,{label:n,color:"primary",className:U()(a.classes[a.className],a.onDelete?a.classes.removable:null),onClick:a.onClick,onDelete:a.onDelete,onMouseDown:a.onMouseDown,onMouseUp:a.onMouseUp,onBlur:a.onBlur})}),gt=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).canEdit=function(e){return!(!n.props.userStore.values.currentUser||!n.props.userStore.values.currentUser._id)&&(!!n.props.userStore.values.currentUser.superadmin||(!!n.props.userStore.values.currentUser.orgsAndRecords.find(function(t){return t.record===e.objectID})||!!n.props.userStore.values.currentUser.orgsAndRecords.find(function(t){return t.organisation===e.organisation&&t.admin})))},n.handleReturnToSearch=function(e,t){n.setState({displayIn:!1},function(){t?n.props.addToFilters(e,t,!0):setTimeout(function(){this.props.handleReturnToSearch()}.bind(Object(Oe.a)(Object(Oe.a)(n))),600)})},n.handleRedirectToEditWings=function(e){n.setState({redirectTo:"/"+n.props.commonStore.locale+"/"+n.props.organisationStore.values.organisation.tag+"/onboard/wings/edit/"+e})},n.state={canEdit:!1,record:null,displayIn:!0},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.hit&&this.props.authStore.isAuth()&&(this.props.recordStore.setRecordTag(this.props.hit.tag),this.props.recordStore.setOrgId(this.props.organisationStore.values.organisation._id),this.props.recordStore.getRecordByTag().then(function(t){t.objectID=t._id,e.setState({record:t,canEdit:e.canEdit(t)})}).catch(function(){}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.hit,a=t.className,r=t.classes,i=t.theme,s=this.state,c=s.canEdit,l=s.record,u=s.displayIn,p=s.redirectTo,g=this.props.commonStore.locale,d=this.props.organisationStore.values.organisation.tag,h="/"+g+"/"+d,m=l||n;return Qe.transformLinks(m),Qe.makeHightlighted(m),Qe.orderHashtags(m),p?o.a.createElement(y.a,{to:p}):m?o.a.createElement(k.n,{container:!0,className:u?a:r.profileContainerHide},window.location.pathname!==h+"/"+n.tag&&o.a.createElement(y.a,{to:h+"/"+n.tag}),o.a.createElement(k.n,{container:!0,item:!0,alignItems:"stretch"},o.a.createElement(de,{source:m&&m.cover&&m.cover.url?m.cover.url:null},o.a.createElement(k.q,{"aria-label":"Edit",className:r.returnButton,onClick:this.handleReturnToSearch},o.a.createElement(Ce.e,{fontSize:"large",className:r.returnButtonSize})),c&&o.a.createElement(ut,{urlUpdateCover:S.a.createUrl("wingzy-staging.wingzy.com","/cover/id/"+m.objectID,d),urlEditIntro:"/"+g+"/"+d+"/onboard/intro/edit/"+m.objectID,urlEditAboutMe:S.a.createUrl("wingzy-staging.wingzy.com","/about/id/"+m.objectID,d),urlDeleteProfile:S.a.createUrl("wingzy-staging.wingzy.com","/admin/record/delete/"+m.objectID,d)}))),o.a.createElement(k.n,{item:!0,xs:12,sm:6,lg:3,className:r.generalPart},o.a.createElement(k.n,{item:!0},o.a.createElement(ye,{type:"person",className:r.logo,src:Qe.getPicturePathResized(m.picture,"person","170x170")||xe.a}),o.a.createElement("div",{className:r.subheader},o.a.createElement(k.H,{variant:"h4",className:r.name},Qe.htmlDecode(m.name)||m.tag),o.a.createElement(k.H,{variant:"body1",className:r.name},Qe.htmlDecode(m.intro||"")))),m.links.map(function(e,t){return e.value&&""!==e.value?"workchat"===e.type?null:o.a.createElement(k.n,{item:!0,key:e._id,xs:12,style:{position:"relative"}},o.a.createElement(k.c,{variant:"text",className:r.button,key:e._id,href:e.url,rel:"noopener",target:"_blank"},o.a.createElement("div",{className:U()(r.contactIcon,"fa fa-"+e.icon)}),Qe.htmlDecode(e.display)||Qe.htmlDecode(e.value)||Qe.htmlDecode(e.url))):null}),c&&o.a.createElement(k.n,{item:!0,xs:12,style:{position:"relative"}},o.a.createElement(k.c,{variant:"text",className:r.button,style:{color:i.palette.secondary.main,fontWeight:"bold"},href:"/"+g+"/"+d+"/onboard/contacts/edit/"+m.objectID},o.a.createElement("div",{href:"",className:U()(r.contactIcon,"fa fa-plus"),style:{color:i.palette.secondary.main}}),o.a.createElement(A.b,{id:"profile.addContacts"})))),o.a.createElement(k.n,{container:!0,item:!0,xs:12,sm:6,lg:9,className:r.hashtagsPart},o.a.createElement(k.n,{item:!0,xs:12,className:r.minHeightPossible},m.hashtags&&m.hashtags.map(function(t,n){var a=t.name_translated?t.name_translated[g]||t.name_translated["en-UK"]||t.name||t.tag:t.name||m.tag;return o.a.createElement(pt,{src:Qe.getPicturePath(t.picture),label:Qe.htmlDecode(a),key:t.tag,onClick:function(n){return e.handleReturnToSearch(n,{name:a,tag:t.tag})},className:t.class?t.class:"notHighlighted"})}),c&&o.a.createElement(pt,{label:this.props.intl.formatMessage({id:"profile.addWings"}),className:"button",onClick:function(){e.handleRedirectToEditWings(m.objectID)}}),o.a.createElement("div",{style:{marginTop:16}},o.a.createElement(k.H,{variant:"h5",style:{padding:8}},o.a.createElement(A.b,{id:"profile.aboutMe"})),o.a.createElement("div",{className:r.aboutMe},Qe.htmlDecode(m.description||"")))))):o.a.createElement("div",null)}}]),t}(o.a.Component),dt=Object(E.b)("commonStore","organisationStore","authStore","recordStore","userStore")(Object(A.e)(Object(E.c)(Object(O.withStyles)(function(e){var t,n,a;return{generalPart:(t={position:"relative"},Object(C.a)(t,e.breakpoints.down("sm"),{minHeight:"unset"}),Object(C.a)(t,e.breakpoints.up("sm"),{minHeight:"calc(100vh - 166px)"}),Object(C.a)(t,e.breakpoints.up("md"),{minHeight:"calc(100vh - 350px)"}),Object(C.a)(t,"background",e.palette.primary.dark),Object(C.a)(t,"padding",16),t),hashtagsPart:(n={position:"relative",background:"white"},Object(C.a)(n,e.breakpoints.down("sm"),{minHeight:"unset"}),Object(C.a)(n,e.breakpoints.up("sm"),{minHeight:"calc(100vh - 166px)"}),Object(C.a)(n,e.breakpoints.up("md"),{minHeight:"calc(100vh - 350px)"}),Object(C.a)(n,"padding",16),n),logoContainer:{position:"relative",transform:"translateY(-50%)",top:0},logo:{position:"absolute",transform:"translateY(-50%)",top:0,left:0,right:0,marginLeft:"auto",marginRight:"auto",width:170,height:170,"& img":{width:"100%",height:"100%",borderRadius:"50%",border:"9px solid white"}},subheader:{position:"relative",marginTop:85,marginBottom:16},button:{color:"white",wordBreak:"break-all",padding:"8px 24px","&:hover":{color:"white"}},buttonIcon:{color:e.palette.secondary.main},wings:{display:"inline-block",color:"white",position:"relative"},minHeightPossible:(a={height:"-moz-min-content"},Object(C.a)(a,"height","-webkit-min-content"),Object(C.a)(a,"height","min-content"),a),editButton:{color:e.palette.secondary.main,marginLeft:16},updateCoverButton:{position:"absolute",top:-24,right:16,transform:"translateY(-100%)"},contactIcon:{marginRight:16,position:"relative",textAlign:"center",width:24,fontSize:24},returnButton:{position:"fixed",zIndex:9999,margin:16,background:"white",color:e.palette.secondary.main,opacity:.7,"&:hover":{backgroundColor:"white",opacity:1}},returnButtonSize:{fontSize:24},profileContainerHide:{position:"fixed",top:0,zIndex:99999,backgroundColor:"white",width:"100%","& ul":{listStyleType:"none",padding:0,marginTop:0},animationName:"popOut",animationDuration:".6s",animationFillMode:"forwards"},name:{marginLeft:24},aboutMe:{padding:8}}},{withTheme:!0})(gt)))),ht=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={facetHits:[],observer:function(){}},n.fetchSuggestions=n.fetchSuggestions.bind(Object(Oe.a)(Object(Oe.a)(n))),n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;nt.setAlgoliaKey(this.props.commonStore.algoliaKey),this._ismounted=!0,this.fetchSuggestions(this.props.filters,this.props.query),this.setState({observer:Object(j.m)(this.props.commonStore,"algoliaKey",function(t){nt.setAlgoliaKey(e.props.commonStore.algoliaKey),e.fetchSuggestions(e.props.filters,e.props.query)})})}},{key:"componentWillUnmount",value:function(){this.state.observer(),this._ismounted=!1}},{key:"componentWillReceiveProps",value:function(e){e.filters&&this._ismounted&&this.fetchSuggestions(e.filters,e.query)}},{key:"fetchSuggestions",value:function(e,t){var n=this;nt.fetchFacetValues(null,!1,e,t).then(function(e){e&&n.setState({facetHits:e.facetHits})}).catch()}},{key:"shouldDisplaySuggestion",value:function(e){return-1===this.props.filters.search(e)}},{key:"render",value:function(){var e=this,t=this.state.facetHits,n=this.props,a=n.classes,r=n.addToFilters;return o.a.createElement("div",{className:a.suggestionsContainer},t.map(function(t,n){return e.shouldDisplaySuggestion(t.value)?o.a.createElement(k.h,{key:n,component:function(e){return o.a.createElement("div",e,o.a.createElement("div",{className:a.suggestionLabel},t.value),o.a.createElement("div",{className:a.suggestionCount},t.count))},onClick:function(e){return r(e,{name:t.value,tag:t.value})},className:a.suggestion,style:{animationDelay:.05*n+"s"}}):null}))}}]),t}(o.a.Component),mt=Object(E.b)("commonStore")(Object(E.c)(Object(O.withStyles)(function(e){return{suggestionsContainer:{textAlign:"left",maxHeight:112,overflow:"hidden",padding:"8px 0px",marginLeft:"-8px"},suggestion:{margin:8,paddingRight:0,background:"white",color:e.palette.primary.dark,"&:hover":{background:"rgb(220,220,220)"},opacity:0,animation:"easeIn .6s",animationFillMode:"forwards"},"@keyframes easeIn":{from:{opacity:0},to:{opacity:1}},suggestionCount:{color:"rgb(190,190,190)",borderRadius:"50%",width:32,height:32,textAlign:"center",lineHeight:"32px"},suggestionLabel:{marginRight:8}}})(ht))),ft=n(467),bt=n.n(ft),vt=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).fetchHits=function(e,t,a,r){nt.fetchHits(e,t,a,r).then(function(e){e&&e.hits&&0!==e.hits.length||n.setState({showNoResult:!0,hideShowMore:!0}),n.setState({hitsAlreadyDisplayed:Math.min(e.hitsPerPage*e.page,e.nbHits)}),e.page===e.nbPages-1&&n.setState({hideShowMore:!0}),r?n.setState({hits:n.state.hits.concat(e.hits)},n.endTask()):n.setState({hits:e.hits},n.endTask())}).catch(function(e){n.setState({hits:[]})})},n.endTask=function(){n.setState({loadInProgress:!1})},n.handleShowMore=function(e){n.setState({page:n.state.page+1,loadInProgress:!0},function(){n.fetchHits(n.props.filters,n.props.query,null,n.state.page)})},n.shuffleArray=function(e){for(var t=[];0!==e.length;){var n=Math.floor(Math.random()*e.length);t.push(e[n]),e.splice(n,1)}return t},n.state={hits:[],page:0,showNoResult:!1,loadInProgress:!0,hideShowMore:!1,hitsAlreadyDisplayed:0,observer:function(){}},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;nt.setAlgoliaKey(this.props.commonStore.algoliaKey),this.fetchHits(this.props.filters,this.props.query,null,null),this.setState({observer:Object(j.m)(this.props.commonStore,"algoliaKey",function(t){nt.setAlgoliaKey(e.props.commonStore.algoliaKey),e.fetchHits(e.props.filters,e.props.query,null,null)})})}},{key:"componentWillUnmount",value:function(){this.state.observer()}},{key:"render",value:function(){var e=this,t=this.state,n=t.hits,a=t.loadInProgress,r=t.hideShowMore,i=t.hitsAlreadyDisplayed,s=t.showNoResult,c=this.props,l=c.addToFilters,u=c.handleDisplayProfile,p=c.classes,g=c.HitComponent,d=c.filters,h=c.query,m=n;return"type:person"!==d||h||(m=this.shuffleArray(m)),o.a.createElement("div",{className:p.hitList},o.a.createElement("ul",null,m.map(function(e,t){return o.a.createElement("li",{key:t,style:{WebkitAnimationDelay:.2*(t-i)+"s",animationDelay:.2*(t-i)+"s"}},o.a.createElement(k.n,{item:!0,xs:12,sm:8,md:6,lg:4,className:p.cardMobileView},o.a.createElement(g,{hit:e,addToFilters:l,handleDisplayProfile:u})))}),!r&&o.a.createElement("li",null,o.a.createElement(k.n,{item:!0,xs:12,sm:8,md:6,lg:4,className:p.cardMobileView,container:!0,justify:"center",alignContent:"center"},a&&o.a.createElement(k.i,{color:"secondary"}),!a&&o.a.createElement(k.c,{onClick:function(t){return e.handleShowMore(t)}},o.a.createElement(A.b,{id:"search.showMore"})))),s&&o.a.createElement(k.n,{container:!0,item:!0,justify:"center",alignItems:"center",direction:"column"},o.a.createElement(k.n,{item:!0},o.a.createElement(k.H,{variant:"h4",className:p.text},o.a.createElement(A.b,{id:"nobody.searchList"}))),o.a.createElement(k.n,{item:!0},o.a.createElement("img",{src:bt.a,alt:"chat",className:p.image})))))}}]),t}(o.a.Component),yt=Object(E.b)("commonStore")(Object(E.c)(Object(O.withStyles)(function(e){return{image:Object(C.a)({width:"47rem",height:"auto"},e.breakpoints.down("xs"),{width:"24rem",height:"auto"}),text:{textAlign:"center",margin:16,color:e.palette.primary.dark,fontWeight:"600"}}})(vt))),wt=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement("div",{className:"".concat(e.dispo," ").concat(this.props.available)})}}]),t}(o.a.Component),St=Object(O.withStyles)(function(e){return{dispo:Object(C.a)({width:35,height:35,border:"6px solid white",borderRadius:30,backgroundColor:"#C2CACF",zIndex:9e3},e.breakpoints.down("xs"),{width:30,height:30})}})(wt);Qe.setExtraLinkLimit(5);var Et=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).getLogoSize=function(){switch(n.props.width){case"xs":return"150x150";default:return"200x200"}},n.state={locale:n.props.commonStore.getCookie("locale")||n.props.commonStore.locale},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.hit,r=t.addToFilters,i=t.handleDisplayProfile;return Qe.transformLinks(a),Qe.makeHightlighted(a),Qe.orderHashtags(a),o.a.createElement(k.d,{className:n.fullWidth,key:a.objectID},o.a.createElement(k.n,{item:!0,container:!0},o.a.createElement(k.g,{onClick:function(e){return i(e,a)},avatar:o.a.createElement(k.n,{item:!0,container:!0},o.a.createElement(k.n,{item:!0,style:{backgroundImage:"url(".concat(Qe.getPicturePathResized(a.picture,"person ",this.getLogoSize())||xe.a,")")},className:"".concat(n.logo," ").concat(n.backgroundLogo)}),a.personAvailability&&"unspecified"!==a.personAvailability?o.a.createElement(k.n,{item:!0,className:n.dispo},o.a.createElement(St,{available:"".concat(n[a.personAvailability])})):""),title:o.a.createElement(k.H,{variant:"h4",className:"".concat(n.name," ").concat(n.titleSmallestView),gutterBottom:!0},o.a.createElement("span",{dangerouslySetInnerHTML:{__html:Qe.htmlDecode((a._highlightResult&&a._highlightResult.name?a._highlightResult.name.value:null)||a.name)||a.tag}})),subheader:o.a.createElement(k.H,{variant:"body1",className:"".concat(n.name," ").concat(n.intro),gutterBottom:!0},o.a.createElement("span",{dangerouslySetInnerHTML:{__html:Qe.htmlDecode((a._snippetResult&&a._snippetResult.intro?a._snippetResult.intro.value:null)||a.intro||"")}})),className:n.cardHeader})),o.a.createElement(k.n,{item:!0,container:!0,className:n.contactField},o.a.createElement(k.e,{disableActionSpacing:!0},o.a.createElement(k.n,{item:!0,container:!0},a.links&&a.links.map(function(e,t){return e.value&&""!==e.value?"workchat"===e.type?null:"extraLink"!==e.class?o.a.createElement(k.n,{item:!0,key:e._id,className:n.contact},o.a.createElement(k.G,{title:Qe.htmlDecode(e.display)||Qe.htmlDecode(e.value)||Qe.htmlDecode(e.url)},o.a.createElement(k.q,{href:e.url,rel:"noopener",target:"_blank",className:n.contactButton+" fa fa-"+e.icon}))):null:null})))),o.a.createElement(k.n,{container:!0,item:!0,className:n.wingsContainer},o.a.createElement(k.f,null,o.a.createElement(k.n,{container:!0,className:n.wings},a.hashtags&&a.hashtags.map(function(t,n){var i=t.name_translated?t.name_translated[e.state.locale]||t.name_translated["en-UK"]||t.name||t.tag:t.name||a.tag;return o.a.createElement(pt,{src:Qe.getPicturePath(t.picture),key:n,label:Qe.htmlDecode(i),onClick:function(e){return r(e,{name:i,tag:t.tag})},className:t.class?t.class:"notHighlighted"})})))))}}]),t}(o.a.Component),kt=Object(E.b)("commonStore")(Object(E.c)(ct()()(Object(O.withStyles)(function(e){var t,n;return{logo:Object(C.a)({width:240,height:240,marginBottom:-38,marginLeft:-62,backgroundColor:"white"},e.breakpoints.down("xs"),{width:190,height:190,marginLeft:-49,marginBottom:-25}),name:{"& span em":{backgroundColor:e.palette.primary.main,borderRadius:30,color:"white",fontWeight:"600",paddingLeft:2,paddingRight:2},display:"block"},intro:{maxHeight:"3em",textOverflow:"ellipsis",overflow:"hidden"},titleSmallestView:Object(C.a)({marginLeft:-2,paddingTop:16},e.breakpoints.down("xs"),{fontSize:"1.2rem!important",marginLeft:-6}),wings:Object(C.a)({display:"inline-block",color:"white",position:"relative",marginTop:"22px!important",marginBottom:4},e.breakpoints.down("xs"),{marginTop:"18px!important"}),wingsContainer:{minHeight:30},fullWidth:{width:"100%",cursor:"pointer"},cardHeader:Object(C.a)({maxHeight:138},e.breakpoints.down("xs"),{maxHeight:100}),contact:Object(C.a)({},e.breakpoints.up("xs"),{margin:2}),contactField:Object(C.a)({marginLeft:100,paddingLeft:82,minHeight:40,backgroundColor:e.palette.primary.dark},e.breakpoints.down("xs"),{minHeight:35,marginLeft:75,paddingLeft:72}),contactButton:(t={width:37,height:37},Object(C.a)(t,e.breakpoints.down("xs"),{width:30,height:30}),Object(C.a)(t,"&::before",{position:"absolute",left:0,right:0,margin:"auto"}),Object(C.a)(t,"&:hover",{backgroundColor:"#41424F"}),t),dispo:(n={position:"absolute"},Object(C.a)(n,e.breakpoints.down("xs"),{marginLeft:104,marginTop:133}),Object(C.a)(n,"marginLeft",132),Object(C.a)(n,"marginTop",172),n),available:{backgroundColor:"green"},unavailable:{backgroundColor:"red"},backgroundLogo:Object(C.a)({backgroundRepeat:"no-repeat",backgroundPositionX:"right",backgroundPositionY:"bottom",borderRadius:"50%",border:"8px solid white",backgroundSize:"200px 200px"},e.breakpoints.down("xs"),{backgroundSize:"150px 150px"})}})(Et)))),Ot=n(64),Ct=n.n(Ot),At=n(125),jt=n.n(At),xt=n(128),Tt=n.n(xt),Pt=n(126),_t=n.n(Pt),It=n(127),Rt=n.n(It),Nt=n(81),Lt=n.n(Nt),Ut=n(468),Wt=n.n(Ut);function zt(e){return o.a.createElement(Lt.a,Object.assign({direction:"up"},e))}var Dt=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={open:n.props.isOpen,redirectTo:null},n.handleOnboardEnd=function(){n.setState({redirectTo:"/"+n.props.commonStore.locale+"/"+n.props.organisationStore.values.orgTag})},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({open:e.isOpen})}},{key:"render",value:function(){var e=this.state.redirectTo,t=this.props.classes;return e&&window.location.pathname!==e?o.a.createElement(y.a,{to:e}):o.a.createElement(o.a.Fragment,null,o.a.createElement(jt.a,{open:this.state.open,TransitionComponent:zt,keepMounted:!0,fullWidth:!0,maxWidth:"sm",onClose:this.handleOnboardEnd,className:t.root,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},o.a.createElement(_t.a,{style:{overflow:"hidden"}},o.a.createElement("img",{src:Wt.a,alt:"Colleagues",className:t.picture}),o.a.createElement(k.H,{variant:"h1",className:t.title},o.a.createElement(A.b,{id:"onboard.end.title"})),o.a.createElement(Rt.a,{id:"alert-dialog-slide-description"},o.a.createElement(k.H,{variant:"h6",className:t.text},o.a.createElement(A.b,{id:"onboard.end.text",values:{organisationName:this.props.organisationStore.values.organisation.name}})))),o.a.createElement(Tt.a,{className:t.actions},o.a.createElement(Ct.a,{onClick:this.handleOnboardEnd,color:"secondary"},o.a.createElement(A.b,{id:"onboard.end.cta",values:{organisationName:this.props.organisationStore.values.organisation.name}})))))}}]),t}(o.a.Component),Bt=Object(E.b)("commonStore","organisationStore")(Object(E.c)(Object(O.withStyles)(function(e){var t;return{root:{textAlign:"center"},picture:{width:"60%",height:"auto",marginBottom:40},text:{margin:0,padding:0,paddingTop:16,textAlign:"center"},titleEmoji:{marginLeft:16},title:(t={textAlign:"center"},Object(C.a)(t,e.breakpoints.down("sm"),{fontSize:"4.8rem"}),Object(C.a)(t,e.breakpoints.down("xs"),{fontSize:"3rem"}),t),actions:{justifyContent:"center",margin:0,padding:24}}},{withTheme:!0})(Dt))),Mt=n(469),Ft=n.n(Mt),Ht=n(157),Gt=n.n(Ht),Kt=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(p.a)(t).call(this))).isIOs=function(){var e=window.navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(e)},e.isInStandaloneMode=function(){return"standalone"in window.navigator&&window.navigator.standalone},e.handleClickAway=function(){e.setState({canDisplayPopup:!1})},e.state={canDisplayPopup:!1},e}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.isIOs()&&!this.isInStandaloneMode()&&setTimeout(function(){e.setState({canDisplayPopup:!0})},1e4)}},{key:"render",value:function(){var e=this.state.canDisplayPopup,t=this.props.classes;return e?o.a.createElement(Gt.a,{onClickAway:this.handleClickAway},o.a.createElement("div",{className:t.popupContainer},o.a.createElement(A.b,{id:"pwa.install.ios",values:{img:o.a.createElement("img",{className:t.shareIcon,src:Ft.a,alt:"Share button"})}}),o.a.createElement("div",{className:t.triangle}))):null}}]),t}(r.Component),Yt=Object(E.b)("commonStore")(Object(E.c)(Object(O.withStyles)(function(e){return{popupContainer:{position:"fixed",left:8,right:8,margin:"auto",marginBottom:24,maxWidth:"calc(100% - 16px)",backgroundColor:"white",zIndex:999999,padding:16,bottom:0,boxShadow:"0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)",textAlign:"center"},triangle:{position:"absolute",left:0,right:0,margin:"auto",top:"100%",width:0,height:0,borderLeft:"20px solid transparent",borderRight:"20px solid transparent",borderTop:"20px solid white",clear:"both"},shareIcon:{height:23,marginBottom:-5}}},{withTheme:!0})(Kt))),qt=n(66);function Vt(e){return o.a.createElement(Lt.a,Object.assign({direction:"up"},e))}ee.a.initialize(Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_ROOT_AUTH:"auth-staging.wingzy.com",REACT_APP_API_ROOT:"wingzy-staging.wingzy.com",REACT_APP_HOST_BACKFLIP:"wingzy-staging.wingzy.com",REACT_APP_ALGOLIA_APPLICATION_ID:"RSXBUBL0PB",REACT_APP_ALGOLIA_INDEX:"world",REACT_APP_CLIENT_ID:"frontflip",REACT_APP_CLIENT_SECRET:"abcd1234",REACT_APP_GOOGLE_CLIENT_ID:"949146759338-80qp26enlj58hd3d5u2ieikrdv9o0t6a.apps.googleusercontent.com"}).REACT_APP_GOOGLE_ANALYTICS_ID);var Qt=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={open:n.props.isOpen,redirectTo:null,wingsPopulated:[],locale:n.props.commonStore.getCookie("locale")||n.props.commonStore.locale},n.handleClose=function(){ee.a.event({category:"User",action:"QRCode - Search"}),qt.a.notify("#wingzy-events","QRCode - Search - "+(n.state.wingsPopulated[0]?n.state.wingsPopulated[0].tag:"")+" - by "+n.props.recordStore.values.record.name),n.setState({open:!1})},n.populateWingsToAdd=Object(f.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n.props.recordStore.setOrgId(n.props.organisationStore.values.organisation._id),e.next=4,n.asyncForEach(n.props.wingsToAdd,function(){var e=Object(f.a)(m.a.mark(function e(a){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.props.recordStore.setRecordTag("#"+a),e.next=3,n.props.recordStore.getRecordByTag().then(function(e){t.push(e)}).catch(function(e){console.log(e)});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 4:n.setState({wingsPopulated:t});case 5:case"end":return e.stop()}},e)})),n.recordHasHashtag=function(e){return!!n.props.recordStore.values.record.hashtags.find(function(t){return t.tag===e})},n.handleAddWing=Object(f.a)(m.a.mark(function e(){var t,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return ee.a.event({category:"User",action:"QRCode - Add Wings"}),qt.a.notify("#wingzy-events","QRCode - Search - "+(n.state.wingsPopulated[0]?n.state.wingsPopulated[0].tag:"")+" - by "+n.props.recordStore.values.record.name),t=n.props.recordStore.values.record,a=[],n.state.wingsPopulated.forEach(function(e){n.recordHasHashtag(e.tag)||a.push(e)}),t.hashtags=t.hashtags.concat(a),e.next=8,n.props.recordStore.updateRecord(["hashtags"]);case 8:n.setState({redirectTo:"/"+n.props.commonStore.locale+"/"+n.props.organisationStore.values.orgTag+"/"+n.props.recordStore.values.record.tag});case 9:case"end":return e.stop()}},e)})),n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({open:e.isOpen})}},{key:"componentDidMount",value:function(){this.populateWingsToAdd()}},{key:"asyncForEach",value:function(){var e=Object(f.a)(m.a.mark(function e(t,n){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<t.length)){e.next=7;break}return e.next=4,n(t[a],a,t);case 4:a++,e.next=1;break;case 7:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.redirectTo,a=t.wingsPopulated,r=this.props.classes,i=this.props.organisationStore.values.organisation;return n&&window.location.pathname!==n?o.a.createElement(y.a,{to:n}):o.a.createElement(o.a.Fragment,null,o.a.createElement(jt.a,{open:this.state.open,TransitionComponent:Vt,keepMounted:!0,fullWidth:!0,maxWidth:"sm",onClose:this.handleClose,className:r.root,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},o.a.createElement(_t.a,{style:{overflow:"hidden",padding:16}},o.a.createElement(k.H,{variant:"h1",className:r.title},o.a.createElement(A.b,{id:"onboard.end.title"}),o.a.createElement(k.p,{xsDown:!0},o.a.createElement("img",{src:Qe.getEmojiUrl("\ud83c\udf89"),alt:"congratulation",className:r.titleEmoji}))),o.a.createElement(Rt.a,{id:"alert-dialog-slide-description",className:r.content},o.a.createElement(k.H,{variant:"h6",className:r.text},o.a.createElement(A.b,{id:"action.addWings.text",values:{wingsCount:a.length}}),o.a.createElement("br",null),o.a.createElement("div",{className:r.wingsList},a.map(function(t,n){var a=t.name_translated?t.name_translated[e.state.locale]||t.name_translated["en-UK"]||t.name||t.tag:t.name||t.tag;return o.a.createElement(pt,{src:Qe.getPicturePath(t.picture),key:n,label:Qe.htmlDecode(a),className:"bigWing"})}))))),o.a.createElement(Tt.a,{className:r.actions},o.a.createElement(Ct.a,{onClick:this.handleAddWing,color:"secondary",variant:"contained",size:"medium",className:r.buttons},o.a.createElement(Ce.a,null),o.a.createElement(A.b,{id:"action.addWings.add"})),o.a.createElement(k.p,{smUp:!0},o.a.createElement("br",null),o.a.createElement("br",null)),o.a.createElement(Ct.a,{onClick:this.handleClose,color:"secondary",variant:"contained",size:"medium",className:r.buttons},o.a.createElement(Ce.g,null),o.a.createElement(A.b,{id:"action.addWings.search",values:{organisationName:i.name}})))))}}]),t}(o.a.Component),Xt=Object(E.b)("commonStore","organisationStore","recordStore")(Object(E.c)(Object(O.withStyles)(function(e){var t;return{root:{textAlign:"center"},picture:{width:"60%",height:"auto",marginBottom:32},text:{margin:0,padding:0,paddingTop:16,textAlign:"center"},content:{padding:0},titleEmoji:{marginLeft:16},title:(t={marginTop:-8,marginBottom:-8,textAlign:"center"},Object(C.a)(t,e.breakpoints.down("sm"),{fontSize:"4.8rem"}),Object(C.a)(t,e.breakpoints.down("xs"),{fontSize:"3rem"}),t),actions:{margin:0,padding:16,display:"block"},buttons:{height:"unset"}}},{withTheme:!0})(Qt)));ee.a.initialize(Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_ROOT_AUTH:"auth-staging.wingzy.com",REACT_APP_API_ROOT:"wingzy-staging.wingzy.com",REACT_APP_HOST_BACKFLIP:"wingzy-staging.wingzy.com",REACT_APP_ALGOLIA_APPLICATION_ID:"RSXBUBL0PB",REACT_APP_ALGOLIA_INDEX:"world",REACT_APP_CLIENT_ID:"frontflip",REACT_APP_CLIENT_SECRET:"abcd1234",REACT_APP_GOOGLE_CLIENT_ID:"949146759338-80qp26enlj58hd3d5u2ieikrdv9o0t6a.apps.googleusercontent.com"}).REACT_APP_GOOGLE_ANALYTICS_ID);var Zt,Jt,$t,en,tn=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).addHashtagsToSearch=function(){var e=Object(f.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=[],t.forEach(function(e){a.push({label:e,value:"#"+e}),setTimeout(function(){n.setState({newFilter:{label:e,value:"#"+e}})},50*a.length)});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.addToFilters=function(e,t,a){n.setState({newFilter:{label:t.name,value:t.tag}}),"profile"===n.state.resultsType&&(a?setTimeout(function(){this.setState({resultsType:"person",displayedHit:null,shouldUpdateUrl:!0})}.bind(Object(Oe.a)(Object(Oe.a)(n))),500):n.setState({resultsType:"person",displayedHit:null,shouldUpdateUrl:!0}))},n.updateFilters=function(e){if(e){ee.a.event({category:"Search",action:"Perform search"}),n.setState({shouldDisplayHitResults:!1});var t="type:person",a="";e.forEach(function(e){"#"!==e.value.charAt(0)&&"@"!==e.value.charAt(0)?a+=(""!==a?" ":"")+e.label:"#"===e.value.charAt(0)?t+=" AND hashtags.tag:"+e.value:"@"===e.value.charAt(0)&&(t+=" AND tag:"+e.value)}),n.setState({filters:t,newFilter:{},query:a},function(){n.setState({shouldDisplayHitResults:!0})})}},n.getSearchBarWidth=function(){return Object(st.isWidthUp)("lg",n.props.width)?4/12*100+"%":Object(st.isWidthUp)("md",n.props.width)?"50%":Object(st.isWidthUp)("sm",n.props.width)?8/12*100+"%":Object(st.isWidthUp)("xs",n.props.width)?"calc(100% - 32px)":null},n.handleDisplayProfile=function(e,t){ee.a.event({category:"User",action:"Display profile"}),n.setState({resultsType:"profile",displayedHit:t})},n.handleReturnToSearch=function(){return n.setState({resultsType:"person",displayedHit:null,shouldUpdateUrl:!0})},n.shouldSetRootUrl=function(e){return n.state.shouldUpdateUrl&&"person"===n.state.resultsType&&window.location.pathname!==e&&window.location.pathname!==e+"/congrats"},n.getHashtagsFilter=function(){var e=n.props.commonStore.getCookie("hashtagsFilter");return n.props.commonStore.removeCookie("hashtagsFilter"),e?e.split(","):[]},n.getActionInQueue=function(){var e=n.props.commonStore.getCookie("actionInQueue");return n.props.commonStore.removeCookie("actionInQueue"),e},n.state={locale:n.props.commonStore.getCookie("locale")||n.props.commonStore.locale,filters:"type:person",query:"",newFilter:{},displayedHit:null,resultsType:n.props.resultsType||"person",shouldUpdateUrl:!1,shouldDisplayHitResults:!0,hashtagsFilter:n.getHashtagsFilter(),actionInQueue:n.getActionInQueue()},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){ee.a.pageview(window.location.pathname),this.props.history.listen(function(e,t){return ee.a.pageview(window.location.pathname)}),this.state.hashtagsFilter.length>0&&this.addHashtagsToSearch(this.state.hashtagsFilter)}},{key:"render",value:function(){var e,t,n=this.state,a=n.shouldDisplayHitResults,r=n.filters,i=n.newFilter,s=n.shouldUpdateUrl,c=n.query,l=n.hashtagsFilter,u=n.actionInQueue,p=this.props.classes,g=(this.props.match.params?this.props.match.params.profileTag:null)||(u&&"@"===u.charAt(0)?u:null),d=this.props.commonStore.locale,h=this.props.organisationStore.values.orgTag||this.props.organisationStore.values.organisation.tag,m=(g&&"@"===g.charAt(0)&&!s?"profile":null)||this.state.resultsType,f=(g&&!s?this.state.displayedHit||{tag:g}:null)||this.state.displayedHit,b="/"+d+"/"+h,v=this.getSearchBarWidth();return"congrats"===g&&(g=null,e=null,m="person",t=!0),e?o.a.createElement(y.a,{to:e}):o.a.createElement("div",null,o.a.createElement(Le,{handleDisplayProfile:this.handleDisplayProfile}),o.a.createElement("main",null,this.shouldSetRootUrl(b)&&o.a.createElement(y.a,{to:b}),o.a.createElement(k.n,{container:!0,direction:"column",alignItems:"center"},o.a.createElement("div",{style:{width:Object(st.isWidthDown)("sm",this.props.width)?"75%":v,marginRight:Object(st.isWidthDown)("sm",this.props.width)?16:""},className:p.searchBar},o.a.createElement(it,{updateFilters:this.updateFilters,newFilter:i})),o.a.createElement(k.n,{container:!0,item:!0,alignItems:"stretch"},o.a.createElement(de,{style:{filter:"brightness(90%)"}},o.a.createElement("div",{style:{position:"relative",height:56}}),o.a.createElement("div",{style:{width:v},className:p.suggestionsContainer},a&&o.a.createElement(mt,{addToFilters:this.addToFilters,filters:r,query:c})))),a&&o.a.createElement(k.n,{container:!0,direction:"column",justify:"space-around",alignItems:"center"},o.a.createElement(yt,{addToFilters:this.addToFilters,handleDisplayProfile:this.handleDisplayProfile,classes:p,HitComponent:kt,filters:r,query:c})),"profile"===m&&o.a.createElement(dt,{hit:f,addToFilters:this.addToFilters,className:p.profileContainer,handleReturnToSearch:this.handleReturnToSearch})),t&&o.a.createElement(Bt,{isOpen:t}),l.length>0&&"add"===u&&o.a.createElement(Xt,{wingsToAdd:l,isOpen:!0})),o.a.createElement(Yt,null))}}]),t}(o.a.Component),nn=Object(E.b)("commonStore","organisationStore")(Object(E.c)(ct()()(Object(O.withStyles)(function(e){return{hitListContainer:{position:"relative",width:"100%",marginBottom:150},suggestionsContainer:{position:"relative",left:0,right:0,margin:"auto"},profileContainer:{position:"fixed",top:0,zIndex:99999,width:"100%",height:"100vh",overflowY:"scroll",backgroundColor:"white","& ul":{listStyleType:"none",padding:0,marginTop:0},animationName:"popIn",animationDuration:".6s"},"@keyframes popIn":{from:{top:"100vh"},to:{top:0}},"@keyframes popOut":{from:{top:0,opacity:1},to:{top:"100vh",opacity:0}},"@keyframes fadeIn":{from:{opacity:0},to:{opacity:1}},cardMobileView:Object(C.a)({},e.breakpoints.down("xs"),{margin:"16px!important"}),hitList:{width:"100%",backgroundColor:"#f2f2f2","& ul":{listStyleType:"none",padding:0,marginTop:"32px",marginBottom:"32px"},"& ul li":{marginBottom:"32px",opacity:0,animation:"fadeIn 0.9s 1",animationFillMode:"forwards"},"& ul li > div:first-child":{position:"relative",left:"0",right:"0",margin:"auto"}},fullWidth:{width:"100%"},searchBar:{position:"fixed !important",top:0,left:0,right:0,margin:"auto",zIndex:1e3,marginTop:8,background:"transparent",width:"100%"},searchBanner:{position:"relative",opacity:.8,filter:"blur(.5px) brightness(55%)"}}})(tn)))),an=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.organisationStore.values.organisation,t=this.props.classes;return o.a.createElement(k.n,{container:!0,direction:"column",justify:"space-around"},o.a.createElement(k.n,{container:!0,item:!0},o.a.createElement(Le,null)),o.a.createElement(k.n,{container:!0,item:!0,alignItems:"stretch"},o.a.createElement(de,null),o.a.createElement(k.p,{smDown:!0},o.a.createElement("div",{className:t.banner},o.a.createElement(k.H,{variant:"h2"},o.a.createElement(A.b,{id:"onboard.welcome"})," ",e.name)))),o.a.createElement(k.n,{container:!0,item:!0,justify:"center"},o.a.createElement(ye,{type:"organisation",alt:"org-logo",className:t.logo})),o.a.createElement(k.n,{container:!0,item:!0,justify:"center",className:t.container},o.a.createElement("form",{onSubmit:this.handleSubmitForm,className:t.form},o.a.createElement(k.n,{item:!0,container:!0,direction:"column",xs:12,sm:6,lg:4,spacing:16},o.a.createElement(k.p,{mdUp:!0},o.a.createElement(k.H,{variant:"h2",style:{textAlign:"center"}},o.a.createElement(A.b,{id:"onboard.welcome"})," ",e.name)),o.a.createElement(k.n,{item:!0},o.a.createElement(A.a,{id:"onboard.welcome.text",values:{organisationName:e.name}})),o.a.createElement(k.n,{item:!0},o.a.createElement(k.c,{onClick:this.props.handleEnterToOnboard,fullWidth:!0,color:"secondary"},o.a.createElement(A.b,{id:"onboard.start"}))),o.a.createElement(k.n,{item:!0,container:!0,direction:"row",justify:"space-around"},o.a.createElement(k.n,{item:!0,lg:6},o.a.createElement(k.c,{className:t.term,variant:"text",fullWidth:!0,component:"a",target:"_blank",href:S.a.createUrl("wingzy-staging.wingzy.com","/terms",void 0)},o.a.createElement(A.b,{id:"menu.drawer.terms"}))),o.a.createElement(k.n,{item:!0,lg:6},o.a.createElement(k.c,{className:t.protectingData,variant:"text",fullWidth:!0,component:"a",target:"_blank",href:S.a.createUrl("wingzy-staging.wingzy.com","/protectingYourData",void 0)},o.a.createElement(A.b,{id:"menu.drawer.protectingYourData",style:{justifyContent:"flex-end!important"}}))))))))}}]),t}(o.a.Component),rn=Object(E.b)("commonStore","organisationStore")(Object(E.c)(Object(O.withStyles)(function(e){var t;return{logo:{width:110,height:110,boxShadow:"0 5px 15px -1px darkgrey, 0 0 0 5px transparent",zIndex:2,transform:"translateY(-50%)",marginBottom:-47},container:Object(C.a)({},e.breakpoints.down("xs"),{padding:8}),intro:Object(C.a)({textAlign:"center",padding:8},e.breakpoints.down(400),{padding:5}),title:Object(C.a)({textAlign:"center",paddingTop:16,paddingBottom:16},e.breakpoints.down(400),{padding:5}),form:{width:"100%"},term:Object(C.a)({},e.breakpoints.down("md"),{justifyContent:"end",padding:"8px 16px"}),protectingData:Object(C.a)({},e.breakpoints.down("md"),{justifyContent:"flex-end",padding:"8px 16px"}),banner:(t={position:"absolute",top:0,width:"100%",textAlign:"center",left:0,height:222,lineHeight:222},Object(C.a)(t,e.breakpoints.up("md"),{height:416,lineHeight:416}),Object(C.a)(t,"background","radial-gradient(rgba(50,50,50,.4), rgba(50,50,50,.1))"),Object(C.a)(t,"backgroundRepeat","no-repeat"),Object(C.a)(t,"& h2",{position:"absolute",top:"50%",left:0,right:0,margin:"auto",transform:"translateY(-50%)",color:"white",fontWeight:600}),t)}})(an))),on=n(203),sn=n.n(on),cn=n(158),ln=n.n(cn),un=n(159),pn=n.n(un),gn=n(470),dn=n.n(gn),hn=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=dn.a.Widget(this.uploader),n=this.props,a=n.value,r=n.onChange,o=n.onUploadComplete;"undefined"!==typeof a&&t.value(a),"function"===typeof r&&t.onChange(function(t){e.files=t?e.files&&e.files.files?e.files.files():[e.files]:null,r(t)}),"function"===typeof o&&t.onUploadComplete(o),t.onDialogOpen(function(t){return e.dialog=t})}},{key:"componentWillUnmount",value:function(){}},{key:"getInputAttributes",value:function(){var e=Object.assign({},this.props);return delete e.value,delete e.onChange,delete e.onUploadComplete,e}},{key:"render",value:function(){var e=this,t=this.getInputAttributes();return o.a.createElement("input",Object.assign({type:"hidden",ref:function(t){return e.uploader=t}},t))}}]),t}(r.Component),mn=(n(6222),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){if(n._ismounted)if(e)n.setState({loading:!0});else{var t=n.props.recordStore.values.record;t.picture={url:null},n.props.recordStore.setRecord(t),n.setState({pictureUrl:null,loading:!1}),n.props.handleSave()}},n.handleUploadComplete=function(e){if(n._ismounted){var t=n.props.recordStore.values.record;t.picture={url:e.cdnUrl},n.props.recordStore.setRecord(t),n.setState({pictureUrl:e.cdnUrl,loading:!1}),n.props.handleSave(["picture"])}},n.handleResetPicture=function(e){n.forceUpdate()},n.state={loading:!1,pictureUrl:null},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this._ismounted=!0}},{key:"componentWillUnmount",value:function(){this._ismounted=!1}},{key:"render",value:function(){var e=this.props.recordStore.values.record,t=this.state,n=t.pictureUrl,a=t.loading,r=this.props.classes;return o.a.createElement("div",null,o.a.createElement("div",{className:r.pictureContainer,style:this.props.style},a&&!n&&o.a.createElement(k.i,{color:"secondary",className:r.picture,size:300}),(!a||n)&&o.a.createElement("img",{src:n||xe.a,alt:"",className:r.picture})),o.a.createElement(hn,{style:{maxWidth:"100%"},id:"file",name:"file","data-tabs":"file camera url","data-crop":"180x180 upscale","data-image-shrink":"1280x1280",onChange:this.handleChange,value:n||(e.picture?e.picture.url:null),onUploadComplete:this.handleUploadComplete,"data-images-only":!0}))}}]),t}(o.a.Component)),fn=Object(E.b)("commonStore","recordStore")(Object(E.c)(Object(A.e)(Object(O.withStyles)(function(e){var t;return{pictureContainer:Object(C.a)({position:"relative",margin:"8px 16px",textAlign:"center"},e.breakpoints.down("xs"),{margin:8}),picture:(t={position:"relative",borderRadius:"50%",width:300,height:300},Object(C.a)(t,e.breakpoints.down("xs"),{width:180,height:180}),Object(C.a)(t,"border","8px solid white"),Object(C.a)(t,"background","white"),Object(C.a)(t,"zIndex",2),t)}})(mn)))),bn=new(0,n(249).XmlEntities),vn=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e,t){var a=n.props.recordStore.values.record;a[t]=e.target.value,n.props.recordStore.setRecord(a),n.forceUpdate()},n.state={},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.recordStore.values.record;return t.intro=bn.decode(t.intro),t.name=bn.decode(t.name),o.a.createElement(k.n,{container:!0,style:{height:"calc(100vh - 73px)",background:this.props.theme.palette.primary.main},direction:"column"},o.a.createElement(k.n,{container:!0,item:!0,xs:12,sm:8,md:6,lg:4,spacing:16,direction:"column",style:{flexBasis:"100%",width:"100%"}},o.a.createElement(k.n,{item:!0,style:{maxWidth:"100%"}},o.a.createElement(k.H,{variant:"h4",style:{textAlign:"center",padding:8,color:this.props.theme.palette.primary.dark}},o.a.createElement(A.b,{id:"onboard.whoAreYou"}))),o.a.createElement(k.n,{item:!0,style:{maxWidth:"100%"}},o.a.createElement(fn,{handleSave:this.props.handleSave})),o.a.createElement(k.n,{item:!0,style:{maxWidth:"100%"}},o.a.createElement(k.E,{label:this.props.intl.formatMessage({id:"onboard.intro.name"},{organisationName:this.props.organisationStore.values.organisation.name}),type:"text",fullWidth:!0,variant:"outlined",value:t.name,onChange:function(t){return e.handleChange(t,"name")},onBlur:function(t){e.props.handleSave(["name"])},error:!0===(t.name&&t.name.length>64),helperText:t.name&&t.name.length>64?"64 characters max":"",required:!0})),o.a.createElement(k.n,{item:!0,style:{maxWidth:"100%"}},o.a.createElement(k.E,{label:this.props.intl.formatMessage({id:"onboard.intro.intro"},{organisationName:this.props.organisationStore.values.organisation.name}),type:"text",fullWidth:!0,variant:"outlined",value:t.intro,onChange:function(t){return e.handleChange(t,"intro")},onBlur:function(t){return e.props.handleSave(["intro"])},error:!0===(t.intro&&t.intro.length>256),helperText:t.intro&&t.intro.length>256?"256 characters max":"",required:!0}))))}}]),t}(o.a.Component),yn=Object(E.b)("commonStore","recordStore","organisationStore")(Object(E.c)(Object(A.e)(Object(O.withStyles)(null,{withTheme:!0})(vn)))),wn=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).addLink=function(e){n.props.addLink({type:e,value:""}),n.setState({open:!1})},n.handleToggle=function(){n.setState(function(e){return{open:!e.open}})},n.handleClose=function(e){n.anchorEl.contains(e.target)||n.setState({open:!1})},n.getIcon=function(e){switch(e){case"email":return"envelope-o";case"workplace":return"user";case"workchat":return"comment";default:return e}},n.state={open:!1},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state.open,a=["email","phone","linkedin","twitter","facebook","github","link","workplace","workchat"];return o.a.createElement(k.n,{container:!0,item:!0,className:t.root,direction:"column"},o.a.createElement(k.c,{className:t.button,fullWidth:!0,buttonRef:function(t){e.anchorEl=t},"aria-owns":n?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:this.handleToggle},o.a.createElement(Ce.a,{fontSize:"default"}),o.a.createElement(A.b,{id:"onboard.addMoreContact"})),o.a.createElement(k.A,{open:n,anchorEl:this.anchorEl,transition:!0,disablePortal:!0},function(n){var r=n.TransitionProps;n.placement;return o.a.createElement(k.o,Object.assign({},r,{id:"menu-list-grow",style:{position:"abdsolute",left:0,right:0,margin:"auto"}}),o.a.createElement(k.n,{item:!0,container:!0,xs:12,sm:8,md:6,lg:4,direction:"column"},o.a.createElement(k.z,{className:t.paper},o.a.createElement(k.j,{onClickAway:e.handleClose},o.a.createElement(k.n,{container:!0,justify:"center",alignItems:"center",spacing:8},a.map(function(n,a){return o.a.createElement(k.n,{item:!0,key:a},o.a.createElement(k.G,{title:e.props.capitalize(n)},o.a.createElement(k.q,{onClick:function(){return e.addLink(n)},label:n},o.a.createElement("i",{className:t.contactButton+" fa fa-"+e.getIcon(n)}))))}))))))}))}}]),t}(o.a.Component),Sn=Object(E.b)("commonStore","recordStore")(Object(E.c)(Object(O.withStyles)(function(e){return{root:{display:"flex",zIndex:1,'& div[role="tooltip"]':{zIndex:9999,alignItems:"center",width:"100%"}},button:{color:"white",backgroundColor:e.palette.secondary.main+"!important"},paper:{borderRadius:30,width:"calc(100% - 16px)",boxSizing:"border-box",marginLeft:13},contactButton:{fontSize:24,width:30,height:30,"&::before":{position:"absolute",left:0,right:0,margin:"auto"}},btnPopup:{"&:first-child()":{position:"absolute",left:0,right:0,margin:"auto"}}}})(wn))),En=new(0,n(249).XmlEntities),kn=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).handleLinksChange=function(e,t,a){t.value=e.target.value;var r=n.state.links;r[a].value=e.target.value,n.props.recordStore.values.record.links=r,n.setState({links:r})},n.deleteLink=function(e){n.props.recordStore.values.record.links=n.props.recordStore.values.record.links.filter(function(t){return!(t.type===e.type&&t.value===e.value)}),n.setState({links:n.state.links.filter(function(t){return!(t.type===e.type&&t.value===e.value)})}),n.props.handleSave(["links"])},n.addLink=function(e){n.props.recordStore.values.record.links.push(e);var t=n.state.links;t.push(e),n.setState({links:t,newLinkIndex:t.length-1})},n.getLinkByType=function(e){return n.props.recordStore.values.record.links.find(function(t){return t.type===e})},n.setTypeInput=function(e){switch(e){case"email":return"email";case"phone":return"tel";default:return"text"}},n.setTypePattern=function(e){switch(e){case"email":return"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$";case"phone":return"/^(\\([0-9]{10}\\)/";default:return"text"}},n.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},n.setDefaultLinks=function(){for(var e=["email","phone","linkedin"],t=n.state.links,a=function(){var a=e[r];n.getLinkByType(a)||-1===t.findIndex(function(e){return e.type===a})&&t.push({type:a,value:""})},r=0;r<e.length;r++)a();n.setState({links:t})},n.state={links:n.props.recordStore.values.record.links||[],newLinkIndex:null},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.setDefaultLinks()}},{key:"render",value:function(){var e=this,t=this.state,n=t.links,a=t.newLinkIndex,r=this.props.classes;return Qe.transformLinks(this.props.recordStore.values.record),o.a.createElement(k.n,{container:!0,style:{minHeight:"calc(100vh - 73px)",background:this.props.theme.palette.primary.main},direction:"column",alignItems:"center"},o.a.createElement(k.n,{item:!0,xs:12,sm:8,md:6,lg:4,style:{width:"100%"}},o.a.createElement(k.n,{item:!0,style:{padding:8}},o.a.createElement(k.H,{variant:"h4",style:{textAlign:"center",padding:8,color:this.props.theme.palette.primary.dark}},o.a.createElement(A.b,{id:"onboard.yourContact"}))),n&&n.map(function(t,n){return t.value=En.decode(t.value),o.a.createElement(k.n,{item:!0,key:n,style:{padding:8}},o.a.createElement(k.E,{className:a&&n===a?r.link:r.defaultLink,label:e.capitalize(t.type),type:e.setTypeInput(t.type),pattern:e.setTypePattern(t.type),variant:"outlined",value:t.value,onChange:function(a){return e.handleLinksChange(a,t,n)},onBlur:function(){return e.props.handleSave(["links"])},placeholder:e.capitalize(t.type),InputProps:{pattern:e.setTypePattern(t.type),startAdornment:o.a.createElement(k.r,{position:"start",style:{fontSize:24}},o.a.createElement("i",{className:"fa fa-"+t.icon||!1})),endAdornment:o.a.createElement(k.q,{position:"end",onClick:function(){e.deleteLink(t)}},o.a.createElement(Ce.e,{fontSize:"default"}))}}))}),o.a.createElement(k.n,{item:!0,style:{width:"100%",padding:8}},o.a.createElement(Sn,{parent:this,handleSave:this.props.handleSave,addLink:this.addLink,capitalize:this.capitalize}))))}}]),t}(o.a.Component),On=Object(E.b)("commonStore","recordStore")(Object(E.c)(Object(O.withStyles)(function(e){return{link:{animation:"linkPop ease 1s",animationFillMode:"forwards"},"@keyframes linkPop":{from:{width:0},to:{width:"100%"}},defaultLink:{width:"100%"}}},{withTheme:!0})(kn))),Cn=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).shoudlRenderWing=function(e){return!!e},n.shouldAnimateWing=function(e){return e.tag===n.state.newTag},n.state={observer:function(){},newTag:null,currentHashtagsLength:n.props.recordStore.values.record.hashtags.length},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){return e.props.scrollUserWingsToBottom()},100),this.setState({observer:Object(j.m)(this.props.recordStore.values,"record",function(t){t.newValue.hashtags.length>e.state.currentHashtagsLength?(setTimeout(function(){return e.props.scrollUserWingsToBottom()},100),e.setState({newTag:t.newValue.hashtags[t.newValue.hashtags.length-1].tag,currentHashtagsLength:t.newValue.hashtags.length})):e.setState({newTag:null,currentHashtagsLength:t.newValue.hashtags.length})})})}},{key:"componentWillUnmount",value:function(){this.state.observer()}},{key:"render",value:function(){var e=this,t=this.props.recordStore.values.record,n=this.props.theme;return t?o.a.createElement("div",null,o.a.createElement(k.H,{variant:"h4",style:{textAlign:"center",color:n.palette.primary.dark}},o.a.createElement(A.b,{id:"onboard.userWings",values:{wingsCount:t.hashtags.length}})),o.a.createElement("div",{className:"",style:{padding:8,paddingTop:10}},t&&t.hashtags&&t.hashtags.length>0&&t.hashtags.map(function(t,a){if(!e.shoudlRenderWing(t))return null;var r=t.name_translated?t.name_translated[e.state.locale]||t.name_translated["en-UK"]||t.name||t.tag:t.name;return e.shouldAnimateWing(t)?o.a.createElement("div",{className:"",key:a,style:{display:"inline-block"}},o.a.createElement(pt,{src:Qe.getPicturePath(t.picture),label:Qe.htmlDecode(r),key:t.tag,className:"animated",style:{background:n.palette.primary.main},onDelete:function(n){e.props.handleRemoveWing(n,t.tag)}})):o.a.createElement("div",{className:"",key:a,style:{display:"inline-block"}},o.a.createElement(pt,{src:Qe.getPicturePath(t.picture),label:Qe.htmlDecode(r),key:t.tag,className:"",onDelete:function(n){e.props.handleRemoveWing(n,t.tag)}}))}),t&&t.hashtags&&0===t.hashtags.length&&o.a.createElement(k.H,{variant:"h6"},o.a.createElement(A.a,{id:"onboard.noWings"})))):null}}]),t}(o.a.Component),An=Object(E.b)("commonStore","recordStore")(Object(E.c)(Object(O.withStyles)(function(e){return{}},{withTheme:!0})(Cn))),jn=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).handleSelectSuggestion=function(e,t,a){n.props.handleAddWing(e,t);var r=e.currentTarget.parentNode,o=e.currentTarget;o.classList.add(n.props.classes.suggestionSelected),n.setState({animationInProgress:!0},function(){setTimeout(function(){r.classList.add(n.props.classes.animateOut)},50),setTimeout(function(){o.classList.remove(n.props.classes.suggestionSelected),o.blur(),n.props.suggestionsController.makeNewSuggestions(t,a).then(function(){n.setState({suggestions:n.props.suggestionsController.getCurrentSuggestions(),shouldUpdate:!0,animationInProgress:!1},function(){r.classList.remove(n.props.classes.animateOut)})})},375)})},n.handleMouseDown=function(e){var t=e.currentTarget;t.style.transition="none",t.style.setProperty("background",n.props.theme.palette.secondary.main,"important"),t.style.setProperty("color","white")},n.handleMouseUp=function(e){var t=e.currentTarget;t.style.transition="none",t.style.setProperty("background",""),t.style.setProperty("color",n.props.theme.palette.primary.dark)},n.reduceElt=function(){var e=Object(f.a)(m.a.mark(function e(t){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.offsetWidth,e.abrupt("return",new Promise(function(e,a){var r=setInterval(function(){n=Math.max(0,n-4),t.style.width=n+"px","0px"!==t.style.width&&t.style.width||(clearInterval(r),e())},5)}));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.shouldDisplaySuggestion=function(e){return!n.props.recordStore.values.record.hashtags.some(function(t){return t.tag===e})},n.getDisplayedName=function(e){return e.name_translated?e.name_translated[n.state.locale]||e.name_translated["en-UK"]||e.name||e.tag:e.name||e.tag},n.isNewSuggestions=function(e){return n.props.suggestionsController._newSuggestions.all.findIndex(function(t){return t.tag===e})>-1},n.renderWing=function(e,t,a){return o.a.createElement("li",{key:a,className:U()(e.suggestion,n.isNewSuggestions(t.tag)?e.animateIn:null),style:{animationDelay:.05*(a-n.state.offsetSuggestionsIndex)+"s"},id:t.tag},o.a.createElement(pt,{src:Qe.getPicturePath(t.picture),label:Qe.htmlDecode(n.getDisplayedName(t)),onClick:function(e){return n.handleSelectSuggestion(e,{name:t.name||t.tag,tag:t.tag},a)},onMouseDown:function(e){return n.handleMouseDown(e)},onMouseUp:function(e){return n.handleMouseUp(e)},onBlur:function(e){return n.handleMouseUp(e)},className:"suggestionWing"}))},n.renderWingsList=function(e,t,a){var r=a?e.even:e.odd;return o.a.createElement("ul",{className:U()(t.suggestionList,"scrollX")},r&&r.map(function(e,a){return e?n.renderWing(t,e,a):null}))},n.scrollToSuggestion=function(e){var t=window.document.getElementsByClassName(n.state.scrollableClass)[0],a=t.scrollLeft,r=window.setInterval(function(){var n,o;a>e?(n=t.scrollLeft,t.scrollLeft-=4,o=t.scrollLeft,(t.scrollLeft<=e||t.scrollLeft===t.scrollWidth||n===o)&&clearInterval(r)):(n=t.scrollLeft,t.scrollLeft+=4,o=t.scrollLeft,(t.scrollLeft>=e||t.scrollLeft===t.scrollWidth||o===n)&&clearInterval(r))},5)},n.scrollRight=function(){Zt=window.setInterval(function(){window.document.getElementsByClassName(this.state.scrollableClass)[0].scrollLeft+=2}.bind(Object(Oe.a)(Object(Oe.a)(n))),5)},n.scrollLeft=function(){Jt=window.setInterval(function(){window.document.getElementsByClassName(this.state.scrollableClass)[0].scrollLeft-=2}.bind(Object(Oe.a)(Object(Oe.a)(n))),5)},n.scrollStop=function(){clearInterval(Zt),clearInterval(Jt)},n.isInViewport=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!n.elementNode)return!1;var t=n.elementNode.getBoundingClientRect().left;return t+e>=0&&t-e<=window.innerWidth},n.state={suggestions:n.props.SuggestionsController.getCurrentSuggestions(),bank:[],renderComponent:!1,shouldUpdate:!1,observer:function(){},scrollableClass:Math.floor(99999*Math.random()),onlyViewport:!0,offsetSuggestionsIndex:0,locale:n.props.commonStore.getCookie("locale")||n.props.commonStore.locale},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(j.m)(this.props.suggestionsController,"_observeUpdate",function(t){e.setState({suggestions:e.props.suggestionsController._currentSuggestions,shouldUpdate:!0})})}},{key:"componentWillUnmount",value:function(){this.state.observer()}},{key:"shouldComponentUpdate",value:function(e,t){return!(!(t.shouldUpdate||!this.state.renderComponent&&t.renderComponent)||t.animationInProgress)&&(this.setState({shouldUpdate:!1}),!0)}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state,a=n.suggestions,r=n.scrollableClass;return o.a.createElement("div",{ref:function(t){e.elementNode=t}},o.a.createElement(k.p,{xsDown:!0},o.a.createElement(k.H,{variant:"subtitle2",style:{padding:16,paddingBottom:0}},o.a.createElement(A.b,{id:"wingsSuggestions"}))),o.a.createElement("div",{style:{position:"relative",height:126}},o.a.createElement(k.p,{smDown:!0},o.a.createElement(k.c,{className:U()(t.scrollLeft,t.scrollButton),onMouseDown:this.scrollLeft,onMouseUp:this.scrollStop,variant:"outlined"},o.a.createElement(Ce.b,{fontSize:"inherit"})),o.a.createElement(k.c,{className:U()(t.scrollRight,t.scrollButton),onMouseDown:this.scrollRight,onMouseUp:this.scrollStop,variant:"outlined"},o.a.createElement(Ce.c,{fontSize:"inherit"}))),o.a.createElement(k.p,{xsDown:!0},o.a.createElement("div",{className:t.transparentGradientBoxLeft}),o.a.createElement("div",{className:t.transparentGradientBoxRight})),o.a.createElement("div",{className:U()(t.suggestionsContainer,""+r)},this.renderWingsList(a,t,!0),this.renderWingsList(a,t,!1))))}}]),t}(o.a.Component),xn=Object(E.b)("commonStore","recordStore","organisationStore","suggestionsController")(Object(E.c)(Object(O.withStyles)(function(e){var t;return{suggestionsContainer:{position:"relative",textAlign:"left",overflow:"hidden",overflowX:"auto",width:"100%",paddingBottom:16,marginTop:3,scrollbarWidth:"thin",scrollbarColor:"rgba(0, 0, 0, 0.26) transparent"},suggestionList:{whiteSpace:"nowrap",padding:0,margin:0,height:52,listStyleType:"none",paddingLeft:8,paddingRight:8,"& li ":{display:"inline-block"}},suggestion:{color:e.palette.secondary.dark},suggestionSelected:{backgroundColor:e.palette.secondary.main+" !important",color:"white !important","&:hover":{backgroundColor:e.palette.secondary.main+" !important",color:"white !important"}},animateIn:{transform:"scale(0)",animation:" 250ms ease-in easeIn",animationFillMode:"forwards"},animateOut:{animation:" 250ms ease-out easeOut",animationFillMode:"forwards"},"@keyframes easeOut":{from:{opacity:1,width:100,transform:"scale(1)"},"50%":{opacity:.5,width:50,transform:"scale(0.30)"},to:{opacity:0,width:0,transform:"scale(0)"}},"@keyframes easeIn":{from:{transform:"scale(0)"},to:{transform:"scale(1)"}},transparentGradientBoxRight:{position:"absolute",right:0,top:0,width:16,height:"100%",backgroundImage:"linear-gradient(to right, rgba(0,0,0,0), "+e.palette.primary.main+")",zIndex:2},transparentGradientBoxLeft:(t={position:"absolute",left:0,top:0,width:16,height:"100%",backgroundImage:"-moz-linear-gradient(to right, "+e.palette.primary.main+", rgba(0,0,0,0))"},Object(C.a)(t,"backgroundImage","-webkit-gradient(to right, "+e.palette.primary.main+", rgba(0,0,0,0))"),Object(C.a)(t,"backgroundImage","-webkit-linear-gradient(to right, "+e.palette.primary.main+", rgba(0,0,0,0))"),Object(C.a)(t,"backgroundImage","-o-linear-gradient(to right, "+e.palette.primary.main+", rgba(0,0,0,0))"),Object(C.a)(t,"backgroundImage","-ms-linear-gradient(to right, "+e.palette.primary.main+", rgba(0,0,0,0))"),Object(C.a)(t,"backgroundImage","linear-gradient(to right, "+e.palette.primary.main+", rgba(0,0,0,0))"),Object(C.a)(t,"zIndex",2),t),scrollLeft:{left:-64},scrollRight:{right:-64},scrollButton:{position:"absolute",top:"50%",transform:"translateY(-50%)",border:"none",color:"rgba(0, 0, 0, 0.26)",fontSize:45,padding:0,overflow:"hidden",minWidth:0,width:56}}},{withTheme:!0})(jn))),Tn=n(68),Pn=n.n(Tn),_n=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).fetchFirstWings=function(){nt.fetchHits("type:hashtag AND hashtags.tag:#Wings",null,null,null).then(function(e){e&&!n.state.animationInProgress&&n.setState({firstWings:e.hits})})},n.handleAddWing=function(e,t,a){var r=e.currentTarget;n.setState({animationInProgress:!0},function(){r.style.setProperty("background",n.props.theme.palette.secondary.main,"important"),r.style.setProperty("color","white"),r.style.animation="suggestionOut 450ms ease-out 0ms 1 forwards",n.props.handleAddWing(e,{tag:t}),setTimeout(function(){n.reduceElt(r).then(function(){n.setState({animationInProgress:!1})})},450)})},n.getFirstWingsStyle=function(e,t){var n={background:"white"};return n.color=t.palette.primary.main,n.display="inline-block",n},n.shouldDisplaySuggestion=function(e){return!n.props.recordStore.values.record.hashtags.some(function(t){return t.tag===e})},n.scrollRight=function(){$t=window.setInterval(function(){window.document.getElementsByClassName(this.state.scrollableClass)[0].scrollLeft+=2}.bind(Object(Oe.a)(Object(Oe.a)(n))),5)},n.scrollLeft=function(){en=window.setInterval(function(){window.document.getElementsByClassName(this.state.scrollableClass)[0].scrollLeft-=2}.bind(Object(Oe.a)(Object(Oe.a)(n))),5)},n.scrollStop=function(){clearInterval($t),clearInterval(en)},n.handleMouseDown=function(e){var t=e.currentTarget;t.style.transition="none",t.style.setProperty("background",n.props.theme.palette.secondary.main,"important"),t.style.setProperty("color","white")},n.handleMouseUp=function(e){var t=e.currentTarget;t.style.transition="none",t.style.setProperty("background",""),t.style.setProperty("color",n.props.theme.palette.primary.dark)},n.reduceElt=function(){var e=Object(f.a)(m.a.mark(function e(t){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.offsetWidth,e.abrupt("return",new Promise(function(e,a){var r=setInterval(function(){n=Math.max(0,n-2),t.style.width=n+"px","0px"!==t.style.width&&t.style.width||(clearInterval(r),e())},5)}));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.state={firstWings:[],observer:function(){},recordObserver:function(){},scrollableClass:Math.floor(99999*Math.random()),animationInProgress:!1},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;nt.setAlgoliaKey(this.props.commonStore.algoliaKey),this.fetchFirstWings(),this.setState({observer:Object(j.m)(this.props.commonStore,"algoliaKey",function(t){nt.setAlgoliaKey(e.props.commonStore.algoliaKey),e.fetchFirstWings()})}),this.setState({recordObserver:Object(j.m)(this.props.recordStore.values,"record",function(t){e.fetchFirstWings()})})}},{key:"componentWillUnmount",value:function(){this.state.observer(),this.state.recordObserver()}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.theme,r=this.state,i=r.firstWings,s=r.scrollableClass;return o.a.createElement("div",{style:{position:"relative"}},o.a.createElement(k.p,{smDown:!0},o.a.createElement(k.c,{className:U()(n.scrollLeft,n.scrollButton),onMouseDown:this.scrollLeft,onMouseUp:this.scrollStop,variant:"outlined"},o.a.createElement(Ce.b,{fontSize:"inherit"})),o.a.createElement(k.c,{className:U()(n.scrollRight,n.scrollButton),onMouseDown:this.scrollRight,onMouseUp:this.scrollStop,variant:"outlined"},o.a.createElement(Ce.c,{fontSize:"inherit"}))),o.a.createElement("ul",{className:U()(n.firstWingsList,""+s)},i.length>0&&i.map(function(t,r){return e.shouldDisplaySuggestion(t.tag)?o.a.createElement("li",{onClick:function(n){e.handleAddWing(n,t.tag,r)},className:n.firstWing,key:r,style:e.getFirstWingsStyle(r,a),onMouseUp:function(t){return e.handleMouseUp(t)},onMouseDown:function(t){return e.handleMouseDown(t)}},o.a.createElement("div",null,o.a.createElement("img",{src:t.picture.url,alt:"Soft Wing"}),o.a.createElement("div",null,o.a.createElement("span",null,t.name)))):null})))}}]),t}(o.a.Component),In=Object(E.b)("commonStore","recordStore")(Object(E.c)(Object(O.withStyles)(function(e){var t,n;return{firstWingsList:{listStyleType:"none",padding:8,paddingTop:0,position:"relative",left:0,right:0,margin:"auto",width:"calc(100% - 16px)",whiteSpace:"nowrap",overflowX:"auto",scrollbarWidth:"thin",scrollbarColor:"rgba(0, 0, 0, 0.26) transparent"},firstWing:(n={textAlign:"center",cursor:"pointer",display:"inline-block",width:159,height:159},Object(C.a)(n,e.breakpoints.down("sm"),{width:130,height:130}),Object(C.a)(n,"overflow","hidden"),Object(C.a)(n,"padding",16),Object(C.a)(n,"margin",8),Object(C.a)(n,"marginTop",0),Object(C.a)(n,"WebkitTransition","all .6s ease-in-out"),Object(C.a)(n,"MozTransition","all .6s ease-in-out"),Object(C.a)(n,"OTransition","all .6s ease-in-out"),Object(C.a)(n,"transition","all .6s ease-in-out"),Object(C.a)(n,"borderRadius",30),Object(C.a)(n,"& img",(t={width:145,height:145,borderRadius:75},Object(C.a)(t,e.breakpoints.down("sm"),{width:100,height:100,borderRadius:50}),Object(C.a)(t,"outline","none"),t)),Object(C.a)(n,"& div",{position:"relative",height:"100%",width:"100%"}),Object(C.a)(n,"& div div",{position:"absolute",left:0,right:0,margin:"auto",bottom:0,zIndex:2,fontWeight:"600",height:"initial"}),n),scrollLeft:{left:-64},scrollRight:{right:-64},scrollButton:{position:"absolute",top:"50%",transform:"translateY(-50%)",border:"none",color:"rgba(0, 0, 0, 0.26)",fontSize:45,padding:0,overflow:"hidden",minWidth:0,width:56}}},{withTheme:!0})(_n))),Rn=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).scrollUserWingsToBottom=function(){try{var e=document.getElementById(n.state.scrollableClass);e.scrollTop=e.scrollHeight}catch(t){}},n.addAndSave=function(e){var t=n.props.recordStore.values.record;t.hashtags.push(e),n.props.recordStore.setRecord(t),n.props.handleSave(["hashtags"])},n.handleAddWing=function(e,t){return e&&e.preventDefault(),n.props.recordStore.setRecordTag(t.tag),n.props.recordStore.setOrgId(n.props.organisationStore.values.organisation._id),n.props.recordStore.values.record.hashtags.find(function(e){return e.tag===t.tag})?Promise.resolve():n.props.recordStore.getRecordByTag().then(function(e){n.addAndSave(e)}).catch(function(){var e={tag:t.tag,name:t.name||t.tag.substr(1)};n.props.recordStore.postRecord(e).then(function(e){n.addAndSave(e)}).catch()})},n.handleRemoveWing=function(e,t){e.preventDefault();var a=n.props.recordStore.values.record,r=a.hashtags.filter(function(e){return e.tag!==t});a.hashtags=r,n.props.recordStore.setRecord(a),n.props.handleSave(["hashtags"])},n.renderTitleByStep=function(){return n.isFirstWings()?o.a.createElement(Pn.a,{variant:"h4",style:{textAlign:"center",padding:8,color:n.props.theme.palette.primary.dark}},o.a.createElement(A.b,{id:"onboard.chooseYourFirstWings"})):n.isFeaturedWings()?o.a.createElement(Pn.a,{variant:"h4",style:{textAlign:"center",padding:8,color:n.props.theme.palette.primary.dark}},n.getFeaturedWings()?n.getFeaturedWings().intro:o.a.createElement(A.b,{id:"onboard.chooseYourWings"})):o.a.createElement(Pn.a,{variant:"h4",style:{textAlign:"center",padding:8,color:n.props.theme.palette.primary.dark}},o.a.createElement(A.b,{id:"onboard.chooseYourWings"}))},n.renderByStep=function(){return n.isFirstWings()?o.a.createElement(k.n,{container:!0,item:!0,xs:12,sm:8,md:6,lg:4},o.a.createElement(k.n,{item:!0,xs:12,style:{padding:8}},n.renderTitleByStep()),o.a.createElement(k.n,{item:!0,xs:12},o.a.createElement(In,{handleAddWing:n.handleAddWing}))):o.a.createElement(k.n,{container:!0,item:!0,xs:12,sm:8,md:6,lg:4},o.a.createElement(k.n,{item:!0,xs:12,style:{padding:8}},n.renderTitleByStep()),o.a.createElement(k.n,{item:!0,xs:12,style:{padding:16,paddingBottom:0,paddingTop:0}},o.a.createElement(it,{hashtagOnly:!0,handleAddWing:n.handleAddWing,wingsFamily:n.isFeaturedWings()?n.props.activeStepLabel:null})),o.a.createElement(k.n,{item:!0,xs:12},o.a.createElement(xn,{handleAddWing:n.handleAddWing,handleSave:n.props.handleSave,wingsFamily:n.isFeaturedWings()?n.props.activeStepLabel:null,SuggestionsController:n.props.SuggestionsController,stepLabel:n.props.activeStepLabel})))},n.isFirstWings=function(){return"firstWings"===n.props.activeStepLabel},n.isFeaturedWings=function(){return n.props.activeStepLabel&&"#"===n.props.activeStepLabel.charAt(0)},n.getFeaturedWings=function(){return n.props.organisationStore.values.organisation.featuredWingsFamily.filter(function(e){return e.tag===n.props.activeStepLabel})[0]},n.state={activeStepOne:n.props.activeStep,scrollableClass:Math.floor(99999*Math.random())},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement(k.n,{container:!0,direction:"column",style:{height:"calc(100vh - 73px)",background:"white",overflow:"hidden"}},o.a.createElement(k.n,{item:!0,style:{background:this.props.theme.palette.primary.main,maxWidth:"100%",position:"relative",zIndex:2,boxShadow:"rgba(0, 0, 0, 0.2) 0px 1px 8px 0px, rgba(0, 0, 0, 0.14) 0px 3px 4px 0px, rgba(0, 0, 0, 0.12) 0px 3px 3px -2px"},justify:"center",direction:"row",container:!0},this.renderByStep()),o.a.createElement(k.n,{item:!0,justify:"center",direction:"row",container:!0,className:e.userWingsPosition,id:this.state.scrollableClass},o.a.createElement(k.n,{container:!0,item:!0,xs:12,sm:8,md:6,lg:4},o.a.createElement(k.n,{item:!0,xs:12},o.a.createElement(An,{handleRemoveWing:this.handleRemoveWing,wingsFamily:this.isFeaturedWings()?this.getFeaturedWings():null,scrollUserWingsToBottom:this.scrollUserWingsToBottom})))))}}]),t}(o.a.Component),Nn=Object(E.b)("commonStore","recordStore","organisationStore")(Object(E.c)(Object(O.withStyles)(function(e){var t;return{userWingsPosition:(t={paddingTop:16,height:"calc(100% - 320px)"},Object(C.a)(t,e.breakpoints.down("sm"),{height:"calc(100% - 280px)"}),Object(C.a)(t,"overflowY","auto"),t)}},{withTheme:!0})(Rn))),Ln=n(210),Un=n(196),Wn=n.n(Un),zn=n(201),Dn=n.n(zn),Bn=n(202),Mn=n.n(Bn),Fn={fabProgress:{color:G.a[500],position:"absolute",top:-6,left:-6,zIndex:1},buttonSuccess:{backgroundColor:G.a[500],color:"white","&:hover":{backgroundColor:G.a[500]}}},Hn=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).feedback=Object(f.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({loading:!0},function(){setTimeout(function(){n.setState({loading:!1,success:!0})},750)});case 1:case"end":return e.stop()}},e)})),n.state={success:!1,loading:!1},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.feedback()}},{key:"render",value:function(){var e=this.state,t=e.success,n=e.loading,a=this.props.classes,r=U()(Object(C.a)({},a.buttonSuccess,t));return o.a.createElement("div",this.props,o.a.createElement(Wn.a,{color:"inherit",className:r},t?o.a.createElement(Dn.a,null):o.a.createElement(Mn.a,null)),n&&o.a.createElement(He.a,{size:68,className:a.fabProgress}))}}]),t}(o.a.Component),Gn=Object(O.withStyles)(Fn)(Hn),Kn=n(290),Yn=Object(Kn.bindKeyboard)(Object(Kn.virtualize)(T.a)),qn=[],Vn=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).makeSteps=function(){var e=["intro","contacts","firstWings","wings"];if(n.props.organisationStore.values.organisation&&n.props.organisationStore.values.organisation.featuredWingsFamily){var t=n.props.organisationStore.values.organisation.featuredWingsFamily.map(function(e){return e.tag});e=e.concat(t)}return e},n.initializeSuggestions=function(e){!e||"wings"!==e&&"#"!==e.charAt(0)||n.props.SuggestionsController.initSuggestions(e,n.props.algoliaKey)},n.handleNext=function(){if(n.props.edit)return n.props.recordStore.setOrgId(n.props.organisationStore.values.organisation._id),n.props.recordStore.getRecordByUser().then().catch(),n.setState({redirectTo:"/"+n.props.commonStore.locale+"/"+n.props.organisationStore.values.orgTag+"/"+n.props.recordStore.values.record.tag},function(){n.forceUpdate()});if(n.initializeSuggestions(n.state.steps[n.state.activeStep+1]),n.state.activeStep===n.state.steps.length-1){var e=n.props.userStore.values.currentUser;try{qt.a.notify("#alerts","We have a new User! "+(e.email?e.email.value:e.google?e.google.email:e._id)+" in "+n.props.organisationStore.values.organisation.tag)}catch(t){}n.welcomeUser(),n.setState({redirectTo:"/"+n.props.commonStore.locale+"/"+n.props.organisationStore.values.orgTag+"/congrats"},function(){n.forceUpdate()})}else n.setState(function(e){return{activeStep:e.activeStep+1}},function(){n.forceUpdate()})},n.welcomeUser=function(){n.props.userStore.welcomeCurrentUser(n.props.organisationStore.values.organisation._id)},n.handleBack=function(){if(n.props.edit)return n.setState({redirectTo:"/"+n.props.commonStore.locale+"/"+n.props.organisationStore.values.orgTag+"/"+n.props.recordStore.values.record.tag},function(){n.forceUpdate()});n.initializeSuggestions(n.state.steps[n.state.activeStep-1]),n.setState(function(e){return{activeStep:e.activeStep-1}},function(){n.forceUpdate()})},n.handleSave=function(){var e=Object(f.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.props.recordStore.setRecordId(n.props.recordStore.values.record._id),e.next=3,n.props.recordStore.updateRecord(t).then(function(e){qn.forEach(function(e){clearTimeout(e)}),qn=[],n.setState({showFeedback:!0},function(){qn.push(setTimeout(function(){n.setState({showFeedback:!1})},2e3))})}).catch(function(e){console.error(e),n.props.enqueueSnackbar("Your data can't be saved, please check the errors",{variant:"warning"})});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.handleStepChange=function(e){n.setState({activeStep:e})},n.getNextButtonText=function(){return n.props.edit?o.a.createElement(A.b,{id:"onboard.edit.save"}):n.state.activeStep===n.state.steps.length-1?o.a.createElement(A.b,{id:"onboard.stepperFinish"}):o.a.createElement(A.b,{id:"onboard.stepperNext"})},n.shouldNextBeHighlighted=function(e){var t=n.props.recordStore.values.record;switch(e){case"intro":return!!(t.intro&&t.intro.length>1&&t.name&&t.name.length>1);case"contacts":return!!(t.links&&t.links.length>0);case"firstWings":return!!(t.hashtags&&t.hashtags.length>0);case"wings":return!!(t.hashtags&&t.hashtags.length>9);default:return!1}},n.state={activeStep:n.props.initStep||0,steps:n.makeSteps(),canNext:!0},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.initializeSuggestions(this.state.steps[this.state.activeStep])}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.initStep!==this.props.initStep&&this.setState({activeStep:e.initStep},function(){t.forceUpdate()})}},{key:"shouldComponentUpdate",value:function(e){return this.state.showFeedback!==e.showFeedback}},{key:"getStepComponent",value:function(e,t){switch(e[t]){case"intro":return yn;case"contacts":return On;default:return Nn}}},{key:"render",value:function(){var e=this,t=this.props,n=t.theme,a=t.classes,r=t.edit,i=this.props.organisationStore.values,s=i.organisation,c=i.orgTag,l=this.props.commonStore.locale,u=this.state,p=u.activeStep,g=u.steps,d=u.canNext,h=u.showFeedback,m=u.redirectTo,f="/"+l+"/"+(s.tag||c)+"/onboard/"+g[p].replace("#","%23");return m&&window.location.pathname!==m?o.a.createElement(y.a,{push:!0,to:m}):o.a.createElement(k.n,{style:{height:"100vh"},item:!0},window.location.pathname!==f&&window.location.pathname!==f+"/edit"&&!r&&o.a.createElement(y.a,{push:!0,to:f}),o.a.createElement("div",{style:{width:"100%",background:"#2B2D3C",borderBottom:"1px solid rgba(0, 0, 0, 0.12)"}},o.a.createElement(k.n,{item:!0,xs:12,sm:8,md:6,lg:4,style:{position:"relative",left:0,right:0,margin:"auto"}},o.a.createElement(sn.a,{variant:"dots",steps:3,position:"static",activeStep:r?-1:Math.min(p,2),style:{maxWidth:"100%"},className:a.root,nextButton:o.a.createElement(Ct.a,{size:"small",onClick:this.handleNext,disabled:!d,className:U()(a.stepperButton,this.shouldNextBeHighlighted(g[p])?a.stepperButtonHighlighted:null)},this.getNextButtonText(),"rtl"===n.direction?o.a.createElement(ln.a,null):o.a.createElement(pn.a,null)),backButton:o.a.createElement(Ct.a,{size:"small",onClick:this.handleBack,disabled:0===p,className:a.stepperButton},"rtl"===n.direction?o.a.createElement(pn.a,null):o.a.createElement(ln.a,null),o.a.createElement(A.b,{id:"onboard.stepperBack"}))}))),o.a.createElement(Yn,{index:p,onChangeIndex:this.handleStepChange,style:{height:"calc(100vh - 73px)"},disabled:!0,slideRenderer:function(t){var n=t.index,a=e.getStepComponent(g,n);return o.a.createElement(k.n,{item:!0,style:{height:"100%"},key:n},o.a.createElement(a,{handleSave:e.handleSave,activeStep:p,activeStepLabel:g[n],SuggestionsController:e.props.SuggestionsController}))}}),h&&o.a.createElement(Gn,{value:Date.now(),style:{position:"fixed",bottom:16,zIndex:999,left:0,right:0,margin:"auto",width:60,textAlign:"center"}}))}}]),t}(o.a.Component),Qn=Object(E.b)("commonStore","recordStore","organisationStore","userStore")(Object(E.c)(Object(Ln.withSnackbar)(Object(O.withStyles)(function(e){return{root:{background:e.palette.primary.dark},stepperButton:{background:"none",boxShadow:"none",padding:"8px 16px",color:"white","&:hover":{background:"rgba(255, 255, 255, 0.12)"},"&:first-child()":{width:40}},stepperButtonHighlighted:{background:e.palette.secondary.main,"&:hover":{background:e.palette.secondary.dark}}}},{withTheme:!0})(Vn)))),Xn=n(82),Zn=function(){function e(){var t=this;Object(c.a)(this,e),this.syncBank=function(){var e=Object(f.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nt.loadBank(t).then(function(){return ae.a.getLocalStorage("wingsBank",!0)}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.getCurrentSuggestions=function(){return t._currentSuggestions=t.removeUserWings(t._currentSuggestions),t._currentSuggestions},this.makeInitialSuggestions=function(){var e=Object(f.a)(m.a.mark(function e(n,a){var r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t._currentSuggestions=[],t._newSuggestions=[],n){e.next=15;break}return e.next=5,t.fetchSuggestions(null,!0,15);case 5:return e.next=7,t.fetchSuggestions(null,!1,10);case 7:if(!(t._currentSuggestions.length<10)){e.next=10;break}return e.next=10,t.fetchPublicHashtags(10);case 10:t.populateSuggestionsData(),(r=t.formatHashtagsQuery())&&t.syncBank(r).then(function(e){t._bank=e,t.populateSuggestionsData()}).catch(function(e){console.log(e)}),e.next=17;break;case 15:return e.next=17,t.fetchWingsFamily(n);case 17:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),this.fetchWingsFamily=function(e){return nt.fetchHits("type:hashtag AND hashtags.tag:"+e,null,null,null).then(function(e){e&&(t._currentSuggestions=e.hits)}).catch()},this.addHitsToSuggestions=function(e,n){for(var a=t._currentSuggestions,r=0;r<n;r++){var o=e.splice(r,1)[0];o&&(o.tag=o.value||o.tag,!o||t.isInSuggestions(o.tag)||t.isInUserWings(o.tag)?o&&!t.isInUserWings(o.tag)?t._newSuggestions.push(o):r--:(a.push(o),t._newSuggestions.push(o)))}return a},this.fetchPublicHashtags=function(e){return nt.fetchHashtags().then(function(n){n.hits&&0!==n.hits.length&&(t._currentSuggestions=t.addHitsToSuggestions(t.removeUserWings(n.hits),e))}).catch(function(e){console.log(e)})},this.fetchSuggestions=function(e,n,a){return nt.fetchFacetValues(e,n,"type:person",null).then(function(e){e.facetHits&&0!==e.facetHits.length&&(t._currentSuggestions=t.addHitsToSuggestions(t.removeUserWings(e.facetHits),a))}).catch(function(e){console.log(e)})},this.isInSuggestions=function(e){return t._currentSuggestions.filter(function(t){return t.tag===e}).length>0},this.isInUserWings=function(e){return Xn.a.values.record.hashtags.filter(function(t){return t.tag===e}).length>0},this.removeUserWings=function(e){var t=e;return e.forEach(function(e){var n=e.value||e.tag;try{if(Xn.a.values.record.hashtags.findIndex(function(e){return e.tag===n})>-1){var a=t.findIndex(function(e){return e.tag===n||e.value===n});a>-1&&t.splice(a,1)}}catch(r){}}),t},this.updateSuggestions=function(){var e=Object(f.a)(m.a.mark(function e(n,a){var r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t._newSuggestions=[],e.next=3,t.fetchSuggestions(n,!0,2,a);case 3:return e.next=5,t.fetchSuggestions(null,!0,2,a);case 5:return e.next=7,t.fetchSuggestions(n,!1,2,a);case 7:return e.next=9,t.fetchSuggestions(null,!1,1,a);case 9:if(!(t._newSuggestions.length<3)){e.next=12;break}return e.next=12,t.fetchPublicHashtags(4);case 12:if(t.populateSuggestionsData(!0),!(r=t.formatHashtagsQuery())){e.next=17;break}return e.next=17,t.syncBank(r).then(function(e){t._bank=e,t.populateSuggestionsData(!0)});case 17:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),this.getData=function(e){return t._bank?t._bank.find(function(t){return t.tag===e}):null},this.populateSuggestionsData=function(e){if(e){var n=t._newSuggestions;t._newSuggestions.map(function(e,a){n[a]=t.getData(e.tag)||e}),t._newSuggestions=n}else{var a=t._currentSuggestions;t._currentSuggestions.map(function(e,n){a[n]=t.getData(e.tag)||e}),t._currentSuggestions=a}},this.formatHashtagsQuery=function(){var e="";return t._currentSuggestions.forEach(function(t){t.objectID||(e+=(""!==e?" OR":"")+" tag:"+t.tag)}),e},this._currentSuggestions=[],this._bank=[],this._workInProgress=!1,this._user=[],this._randomNumber=0,this._newSuggestions=[]}return Object(l.a)(e,[{key:"init",value:function(){var e=Object(f.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt.setAlgoliaKey(t);case 2:return e.next=4,this.syncBank(null);case 4:this._bank=e.sent;case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}();Object(j.g)(Zn,{_randomNumber:j.l,_newSuggestions:j.l});var Jn=new Zn,$n=function e(){var t=this;Object(c.a)(this,e),this.getCurrentSuggestions=function(){return t._currentSuggestions},this.reset=function(){t._currentSuggestions={all:[],even:[],odd:[]},t._newSuggestions={all:[],even:[],odd:[]}},this.initSuggestions=function(e,n){t.reset(),Jn.init(n).then(function(){Jn.makeInitialSuggestions("#"===e.charAt(0)?e:null).then(function(){t._currentSuggestions.all=Jn.getCurrentSuggestions(),t.makeInitialSuggestionsList(),t._observeUpdate=Math.random()})})},this.makeNewSuggestions=function(){var e=Object(f.a)(m.a.mark(function e(n,a){var r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return-1!==(r=t._currentSuggestions.all.findIndex(function(e){return e.tag===n.tag}))&&(t._currentSuggestions.all.splice(r,1),t._currentSuggestions.even[a]&&t._currentSuggestions.even[a].tag===n.tag&&t._currentSuggestions.even.splice(a,1),t._currentSuggestions.odd[a]&&t._currentSuggestions.odd[a].tag===n.tag&&t._currentSuggestions.odd.splice(a,1)),e.next=4,Jn.updateSuggestions(n,r).then(function(){if(t._newSuggestions.all=Jn._newSuggestions,0!==t._newSuggestions.all.length){t.makeNewSuggestionsList();var e=0;t._newSuggestions.all.forEach(function(n){var a=t._currentSuggestions.all.findIndex(function(e){return e.tag===n.tag});-1===a?(t._currentSuggestions.all.splice(r+e,0,n),e++):(t._currentSuggestions.all.splice(a,1),t._currentSuggestions.all.splice(r,0,n),e++)}),t.makeInitialSuggestionsList(),t._observeUpdate=Math.random()}});case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),this.makeInitialSuggestionsList=function(){t._currentSuggestions.even=[],t._currentSuggestions.odd=[],t._currentSuggestions.all.map(function(e,n){n%2===0?t._currentSuggestions.even.push(e):t._currentSuggestions.odd.push(e)})},this.makeNewSuggestionsList=function(){t._newSuggestions.even=[],t._newSuggestions.odd=[],t._newSuggestions.all.map(function(e,n){n%2===0?t._newSuggestions.even.push(e):t._newSuggestions.odd.push(e)})},this.logData=function(e){console.log("--- --- --- ---"),e&&console.log(e),console.log("currentSuggestions all : "+t._currentSuggestions.all.length),console.log("currentSuggestions even : "+t._currentSuggestions.even.length),console.log("currentSuggestions odd : "+t._currentSuggestions.odd.length),console.log("newSuggestions all : "+t._newSuggestions.all.length),console.log("newSuggestions even : "+t._newSuggestions.even.length),console.log("newSuggestions odd : "+t._newSuggestions.odd.length),t.logSuggestionsTag(),console.log("--- --- --- ---")},this.logSuggestionsTag=function(){t._newSuggestions.all.forEach(function(e){console.log(e.tag)})},this._currentSuggestions={all:[],even:[],odd:[]},this._newSuggestions={all:[],even:[],odd:[]},this._observeUpdate=Math.random()};Object(j.g)($n,{_currentSuggestions:j.l,_newSuggestions:j.l,_observeUpdate:j.l,makeNewSuggestions:j.d,makeInitialSuggestionsList:j.d,getCurrentSuggestions:j.d});var ea=new $n;ee.a.initialize(Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_ROOT_AUTH:"auth-staging.wingzy.com",REACT_APP_API_ROOT:"wingzy-staging.wingzy.com",REACT_APP_HOST_BACKFLIP:"wingzy-staging.wingzy.com",REACT_APP_ALGOLIA_APPLICATION_ID:"RSXBUBL0PB",REACT_APP_ALGOLIA_INDEX:"world",REACT_APP_CLIENT_ID:"frontflip",REACT_APP_CLIENT_SECRET:"abcd1234",REACT_APP_GOOGLE_CLIENT_ID:"949146759338-80qp26enlj58hd3d5u2ieikrdv9o0t6a.apps.googleusercontent.com"}).REACT_APP_GOOGLE_ANALYTICS_ID);var ta=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).populateStep=function(e){switch(e){case"intro":n.setState({stepNumber:0,inOnboarding:!0});break;case"contacts":n.setState({stepNumber:1,inOnboarding:!0});break;case"firstWings":n.setState({stepNumber:2,inOnboarding:!0});break;case"wings":n.setState({stepNumber:3,inOnboarding:!0});break;default:e&&"#"===e.replace("%23","#").charAt(0)&&n.setState({stepNumber:3,inOnboarding:!0})}},n.getRecordForUser=function(){return n.props.recordStore.values.orgId||n.props.recordStore.setOrgId(n.props.organisationStore.values.organisation._id),n.props.recordStore.getRecordByUser()},n.handleEnterToOnboard=function(){n.setState({inOnboarding:!0})},n.state={inOnboarding:!1,observer:function(){},stepNumber:0,editMode:n.props.edit||!1,renderComponent:!n.props.edit},n.props.commonStore.setLocalStorage("wingsBank",[],!0),n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.history.listen(function(t,n){ee.a.pageview(window.location.pathname),setTimeout(function(){return e.populateStep(e.props.match.params.step)},10)}),this.setState({observer:Object(j.m)(this.props.recordStore.values,"record",function(t){e.forceUpdate()})}),this.props.match&&this.props.match.params&&this.props.match.params.recordId&&this.props.edit?(this.props.recordStore.setRecordId(this.props.match.params.recordId),this.props.recordStore.getRecord().then(function(){e.setState({renderComponent:!0})}).catch(function(e){return console.log(e)})):this.getRecordForUser().then(function(){e.setState({renderComponent:!0})}).catch(function(e){return console.log(e)}),this.props.match&&this.props.match.params&&this.props.match.params.step&&this.populateStep(this.props.match.params.step)}},{key:"componentWillUnmount",value:function(){this.state.observer()}},{key:"render",value:function(){var e=this.state,t=e.inOnboarding,n=e.stepNumber,a=e.editMode;return e.renderComponent?t?o.a.createElement("div",null,o.a.createElement("main",null,o.a.createElement(Qn,{initStep:n,SuggestionsController:ea,edit:a}))):o.a.createElement(rn,{handleEnterToOnboard:this.handleEnterToOnboard}):null}}]),t}(o.a.Component),na=Object(E.b)("commonStore","organisationStore","recordStore","userStore")(Object(E.c)(Object(O.withStyles)({logo:{width:"6.5rem",height:"6.5rem",boxShadow:"0 5px 15px -1px darkgrey, 0 0 0 5px transparent",bottom:"3.6rem",marginBottom:"-7rem",zIndex:2}},{withTheme:!0})(ta)));ee.a.initialize(Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_ROOT_AUTH:"auth-staging.wingzy.com",REACT_APP_API_ROOT:"wingzy-staging.wingzy.com",REACT_APP_HOST_BACKFLIP:"wingzy-staging.wingzy.com",REACT_APP_ALGOLIA_APPLICATION_ID:"RSXBUBL0PB",REACT_APP_ALGOLIA_INDEX:"world",REACT_APP_CLIENT_ID:"frontflip",REACT_APP_CLIENT_SECRET:"abcd1234",REACT_APP_GOOGLE_CLIENT_ID:"949146759338-80qp26enlj58hd3d5u2ieikrdv9o0t6a.apps.googleusercontent.com"}).REACT_APP_GOOGLE_ANALYTICS_ID);var aa=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).persistWingToAdd=function(e){try{var t=n.props.match.params.hashtags;t&&"@"!==t.charAt(0)&&n.props.commonStore.setCookie("hashtagsFilter",t),e&&n.props.commonStore.setCookie("actionInQueue",n.props.match.params.action)}catch(a){}},n.manageAccessRight=Object(f.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.props.match&&n.props.match.params&&n.props.match.params.organisationTag)){e.next=21;break}if(t=n.props.organisationStore.values.organisation,n.props.organisationStore.values.orgTag===n.props.match.params.organisationTag){e.next=7;break}return n.props.organisationStore.setOrgTag(n.props.match.params.organisationTag),e.next=6,n.props.organisationStore.getOrganisationForPublic().catch(function(e){qt.a.notifyError("Someone try to access : "+n.props.match.params.organisationTag+" and got 404.","110","quentin","MainRouteOrganisationRedirect.js"),ee.a.event({category:"Error",action:"Redirect to error layout",value:404}),n.setState({redirectTo:"/"+n.state.locale+"/error/404/organisation"})});case 6:t=e.sent;case 7:if(n.canUserAccessOrganisation(t)||!n.props.authStore.isAuth()){e.next=12;break}return e.next=10,n.redirectUserAuthWithoutAccess();case 10:e.next=19;break;case 12:if(!n.props.authStore.isAuth()){e.next=19;break}return n.props.organisationStore.setOrgId(t._id),e.next=16,n.props.organisationStore.getOrganisation().catch(function(e){403===e.status&&"Email not validated"===e.response.body.message&&(Ge.a.confirmLoginEmail(t.tag),n.setState({redirectTo:"/"+n.state.locale+"/error/"+e.status+"/email"}))});case 16:return t=e.sent,e.next=19,n.redirectUserAuthWithAccess(t,!1).catch(function(){});case 19:e.next=24;break;case 21:if(!n.props.authStore.isAuth()){e.next=24;break}return e.next=24,n.redirectUserAuthWithoutAccess();case 24:case"end":return e.stop()}},e)})),n.state={redirectTo:null,locale:n.props.commonStore.getCookie("locale")||n.props.commonStore.locale,renderComponent:!1,invitationCode:n.props.match.params&&n.props.match.params.invitationCode?n.props.match.params.invitationCode:null},n.props.hashtagsFilter&&n.props.match.params&&n.props.match.params.action&&("add"===n.props.match.params.action||"filter"===n.props.match.params.action)&&n.persistWingToAdd(n.props.match.params.action),n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;"PUSH"!==e.history.action||e.match.params.organisationTag===this.props.organisationStore.values.orgTag&&this.props.organisationStore.values.fullOrgFetch||this.setState({renderComponent:!1},function(){t.manageAccessRight().then(function(){t.setState({renderComponent:!0})}).catch(function(e){ee.a.event({category:"Error",action:"Redirect to error layout",value:500}),qt.a.notifyError(e,"32","quentin","MainRouteOrganisationRedirect.js"),t.setState({redirectTo:"/"+t.state.locale+"/error/500/routes"})})})}},{key:"componentDidMount",value:function(){var e=this;this.manageAccessRight().then(function(){e.setState({renderComponent:!0})}).catch(function(t){ee.a.event({category:"Error",action:"Redirect to error layout",value:500}),qt.a.notifyError(t,"42","quentin","MainRouteOrganisationRedirect.js"),e.setState({redirectTo:"/"+e.state.locale+"/error/500/routes"})})}},{key:"canUserAccessOrganisation",value:function(e){return!!e&&(!!e.public||!!this.props.authStore.isAuth()&&(!!this.props.userStore.values.currentUser._id&&(!!this.props.userStore.values.currentUser.superadmin||!(0===this.props.userStore.values.currentUser.orgsAndRecords.length||!this.props.userStore.values.currentUser.orgsAndRecords)&&void 0!==this.props.userStore.values.currentUser.orgsAndRecords.find(function(t){return t.organisation===e._id}))))}},{key:"redirectUserAuthWithoutAccess",value:function(){var e=Object(f.a)(m.a.mark(function e(){var t,n=this;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.props.userStore.values.currentUser.orgsAndRecords&&this.props.userStore.values.currentUser.orgsAndRecords.length>0)){e.next=13;break}if(!(t=this.props.userStore.values.currentUser.orgsAndRecords[0].organisation)){e.next=8;break}return this.props.organisationStore.setOrgId(t),e.next=6,this.props.organisationStore.getOrganisation().then(function(e){n.redirectUserAuthWithAccess(e,!0)}).catch(function(){});case 6:e.next=11;break;case 8:return window.location.href=S.a.createUrl("wingzy-staging.wingzy.com","/new/presentation",void 0),e.next=11,this.wait(3e3);case 11:e.next=16;break;case 13:return window.location.href=S.a.createUrl("wingzy-staging.wingzy.com","/new/presentation",void 0),e.next=16,this.wait(3e3);case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"redirectUserAuthWithAccess",value:function(){var e=Object(f.a)(m.a.mark(function e(t,n){var a,r=this;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(((a=this.props.userStore.values.currentUser.orgsAndRecords.find(function(e){return e.organisation===t._id}))||this.props.userStore.values.currentUser.superadmin)&&(!a||a.welcomed)){e.next=5;break}this.setState({redirectTo:"/"+this.state.locale+"/"+t.tag+"/onboard"}),e.next=9;break;case 5:if(!a){e.next=9;break}return this.props.recordStore.setRecordId(a.record),e.next=9,this.props.recordStore.getRecord().then(function(){n&&r.setState({redirectTo:"/"+r.state.locale+"/"+t.tag})}).catch(function(){r.setState({redirectTo:"/"+r.state.locale+"/"+t.tag+"/onboard"})});case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"wait",value:function(){var e=Object(f.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){return setTimeout(e,t)}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"resetRedirectTo",value:function(){this.setState({redirectTo:null})}},{key:"render",value:function(){var e=this.state,t=e.redirectTo,n=e.renderComponent,a=e.invitationCode,r=this.props.commonStore.locale,i=this.props.organisationStore.values,s=i.orgTag,c=i.organisation,l=this.props.authStore.isAuth();return t&&(this.resetRedirectTo(),window.location.pathname!==t)?o.a.createElement(y.a,{to:t}):n&&l?this.props.hashtagsFilter&&this.props.match.params&&this.props.match.params.action&&("add"===this.props.match.params.action||"filter"===this.props.match.params.action)?o.a.createElement(y.a,{to:"/"+r+"/"+s}):o.a.createElement("div",null,o.a.createElement(b.a,null,o.a.createElement(v.a,{exact:!0,path:"/:locale(en|fr|en-UK)/:organisationTag/password/forgot",component:De}),o.a.createElement(v.a,{exact:!0,path:"/:locale(en|fr|en-UK)/:organisationTag/password/reset/:token/:hash",component:Me}),o.a.createElement(v.a,{exact:!0,path:"/:locale(en|fr|en-UK)/:organisationTag/password/create/:token/:hash/:email",component:Me}),o.a.createElement(v.a,{path:"/:locale(en|fr|en-UK)/:organisationTag/signin/google/callback",component:We}),o.a.createElement(v.a,{path:"/:locale(en|fr|en-UK)/:organisationTag/signup/:invitationCode?",component:function(){return o.a.createElement(We,{initialTab:1})}}),o.a.createElement(v.a,{path:"/:locale(en|fr|en-UK)/:organisationTag/signin/:invitationCode?",component:We}),o.a.createElement(v.a,{exact:!0,path:"/:locale(en|fr|en-UK)/:organisationTag/onboard/:step?",component:na}),o.a.createElement(v.a,{exact:!0,path:"/:locale(en|fr|en-UK)/:organisationTag/onboard/:step/edit",component:function(e){return o.a.createElement(na,Object.assign({edit:!0},e))}}),o.a.createElement(v.a,{exact:!0,path:"/:locale(en|fr|en-UK)/:organisationTag/onboard/:step/edit/:recordId",component:function(e){return o.a.createElement(na,Object.assign({edit:!0},e))}}),o.a.createElement(v.a,{exact:!0,path:"/:locale(en|fr|en-UK)/:organisationTag/:profileTag?",component:nn}),o.a.createElement(v.a,{path:"/:locale(en|fr|en-UK)/:organisationTag/:action?",component:nn}))):n?o.a.createElement("div",null,o.a.createElement(b.a,null,o.a.createElement(v.a,{exact:!0,path:"/:locale(en|fr|en-UK)/:organisationTag/password/forgot",component:De}),o.a.createElement(v.a,{exact:!0,path:"/:locale(en|fr|en-UK)/:organisationTag/password/reset/:token/:hash",component:Me}),o.a.createElement(v.a,{exact:!0,path:"/:locale(en|fr|en-UK)/:organisationTag/password/create/:token/:hash/:email",component:Me}),o.a.createElement(v.a,{path:"/:locale(en|fr|en-UK)/:organisationTag/signin/google/callback",component:We}),o.a.createElement(v.a,{path:"/:locale(en|fr|en-UK)/:organisationTag/signup/:invitationCode?",component:function(){return o.a.createElement(We,{initialTab:1})}}),o.a.createElement(v.a,{path:"/:locale(en|fr|en-UK)/:organisationTag/signin/:invitationCode?",component:We}),c&&c.public&&o.a.createElement(v.a,{exact:!0,path:"/:locale(en|fr|en-UK)/:organisationTag/:profileTag",component:nn}),c&&c.public&&o.a.createElement(v.a,{exact:!0,path:"/:locale(en|fr|en-UK)/:organisationTag",component:nn}),o.a.createElement(y.a,{to:"/"+r+(s?"/"+s:"")+"/signin"+(a?"/"+a:"")+window.location.search}))):o.a.createElement("div",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)",textAlign:"center",width:"100%"}},o.a.createElement(He.a,{color:"secondary"}))}}]),t}(o.a.Component),ra=Object(E.b)("commonStore","authStore","organisationStore","userStore","recordStore")(Object(w.a)(Object(E.c)(aa)));ee.a.initialize(Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_ROOT_AUTH:"auth-staging.wingzy.com",REACT_APP_API_ROOT:"wingzy-staging.wingzy.com",REACT_APP_HOST_BACKFLIP:"wingzy-staging.wingzy.com",REACT_APP_ALGOLIA_APPLICATION_ID:"RSXBUBL0PB",REACT_APP_ALGOLIA_INDEX:"world",REACT_APP_CLIENT_ID:"frontflip",REACT_APP_CLIENT_SECRET:"abcd1234",REACT_APP_GOOGLE_CLIENT_ID:"949146759338-80qp26enlj58hd3d5u2ieikrdv9o0t6a.apps.googleusercontent.com"}).REACT_APP_GOOGLE_ANALYTICS_ID);var oa=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={locale:n.props.commonStore.getCookie("locale")||n.props.commonStore.locale,errorCode:null,errorType:null},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){ee.a.pageview(window.location.pathname),this.props.match&&this.props.match.params&&this.setState({errorCode:this.props.match.params.errorCode,errorType:this.props.match.params.errorType})}},{key:"render",value:function(){var e=this.props.classes,t=this.state,n=t.errorCode,a=t.errorType,r=this.props.userStore.values.currentUser,i=this.props.organisationStore.values.orgTag;return o.a.createElement("div",null,o.a.createElement(Le,null),o.a.createElement("main",null,o.a.createElement(k.n,{container:!0,className:e.layout,alignItems:"center",justify:"center"},o.a.createElement(k.n,{item:!0,xs:12,md:6},o.a.createElement(k.n,{container:!0,spacing:16,className:e.subLayout,alignItems:"center",direction:"column",justify:"center"},o.a.createElement(k.n,{item:!0},o.a.createElement("img",{className:e.bigPicture,src:Qe.getEmojiUrl("\ud83e\uddf0"),alt:"bigPicture"})),o.a.createElement(k.n,{item:!0},o.a.createElement(k.H,{variant:"h1",className:e.title},n," Oops")),o.a.createElement(k.n,{item:!0},"email"===a&&o.a.createElement(k.H,{variant:"subheading"},o.a.createElement(A.a,{id:"errorPage.emailNotValidated",values:{email:r.email.value}})),"organisation"===a&&"404"===n&&o.a.createElement(k.H,{variant:"subheading"},o.a.createElement(A.a,{id:"errorPage.organisationNotFound",values:{newOrgLink:S.a.createUrl("wingzy-staging.wingzy.com","/new/presentation",null,null),orgTag:i}})),"500"===n&&"routes"===a&&o.a.createElement(k.H,{variant:"subheading"},o.a.createElement(A.a,{id:"errorPage.unhandledError"}))))))))}}]),t}(o.a.Component),ia=Object(E.b)("commonStore","organisationStore","authStore","recordStore","userStore")(Object(E.c)(Object(O.withStyles)(function(e){return{layout:{height:"calc(100vh - 72px)",flexGrow:1},title:{fontSize:"4rem"},subLayout:{height:"auto"}}},{withTheme:!0})(oa))),sa=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={isAuth:n.props.authStore.isAuth()},n.props.match&&n.props.match.params&&n.props.match.params.locale&&(n.props.commonStore.locale=n.props.match.params.locale,n.props.commonStore.populateLocale()),n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.isAuth,t=this.props.match.params.locale;return o.a.createElement("div",null,o.a.createElement(b.a,null,o.a.createElement(v.a,{exact:!0,path:"/:locale(en|fr|en-UK)/password/forgot",component:De}),o.a.createElement(v.a,{exact:!0,path:"/:locale(en|fr|en-UK)/password/reset/:token/:hash",component:Me}),o.a.createElement(v.a,{exact:!0,path:"/:locale(en|fr|en-UK)/password/create/:token/:hash/:email",component:Me}),o.a.createElement(v.a,{path:"/:locale(en|fr|en-UK)/signup",component:function(){return o.a.createElement(We,{initialTab:1})}}),o.a.createElement(v.a,{path:"/:locale(en|fr|en-UK)/signin",component:We}),o.a.createElement(v.a,{exact:!0,path:"/:locale(en|fr|en-UK)/error/:errorCode/:errorType",component:ia}),o.a.createElement(v.a,{exact:!0,path:"/:locale(en|fr|en-UK)/:organisationTag/onboard/:step/edit/:recordId",component:ra}),o.a.createElement(v.a,{exact:!0,path:"/:locale(en|fr|en-UK)/:organisationTag/onboard/:step/edit",component:ra}),o.a.createElement(v.a,{exact:!0,path:"/:locale(en|fr|en-UK)/:organisationTag/onboard/:step?",component:ra}),o.a.createElement(v.a,{path:"/:locale(en|fr|en-UK)/:organisationTag/:hashtags/:action/:invitationCode",component:function(e){return o.a.createElement(ra,Object.assign({hashtagsFilter:!0},e))}}),o.a.createElement(v.a,{path:"/:locale(en|fr|en-UK)/:organisationTag/:hashtags/:action",component:function(e){return o.a.createElement(ra,Object.assign({hashtagsFilter:!0},e))}}),o.a.createElement(v.a,{path:"/:locale(en|fr|en-UK)/:organisationTag",component:ra}),o.a.createElement(v.a,{path:"/:locale(en|fr|en-UK)",component:ra}),e&&o.a.createElement(y.a,{to:"/"+t}),!e&&o.a.createElement(y.a,{to:"/"+t+"/signin"})))}}]),t}(o.a.Component),ca=Object(E.b)("commonStore","authStore")(Object(w.a)(Object(E.c)(sa))),la=n(291),ua=n(292);function pa(){var e=Object(la.a)(["\n  z-index: 99999;\n  box-sizing: border-box;\n  width: calc(100% - 32px);\n  position: fixed;\n  bottom: 0;\n  margin: 16px;\n  padding: 16px;\n  background: rgb(50,50,50);\n  color: rgb(200,200,200);\n  cursor: pointer;\n  animation: "," 1s linear;\n  text-align:center;\n  & a {\n    color: white;\n    font-weight: 600;\n  }\n"]);return pa=function(){return e},e}function ga(){var e=Object(la.a)(["\n  from {\n    opacity 0;\n  }\n  to {\n    opacity 1;\n  }\n"]);return ga=function(){return e},e}var da=Object(ua.b)(ga()),ha=ua.a.div(pa(),da),ma=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(p.a)(t).call(this))).onClick=function(){window.location.reload(!0)},e.state={show:!1},e}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("newContentAvailable",function(){e.setState({show:!0})})}},{key:"render",value:function(){return this.state.show?o.a.createElement(ha,{onClick:this.onClick},o.a.createElement("span",null," New Content Available. Restart to update.")):null}}]),t}(r.Component),fa=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={locale:n.props.commonStore.getCookie("locale")||n.props.commonStore.locale,renderComponent:!n.props.authStore.isAuth()},n.props.commonStore.removeCookie("searchFilters"),n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getUser()}},{key:"getUser",value:function(){var e=Object(f.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.authStore.isAuth()){e.next=4;break}return e.next=3,this.props.userStore.getCurrentUser().catch(function(){});case 3:this.state.renderComponent||this.setState({renderComponent:!0});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.renderComponent,n=e.locale,a=window.location.pathname+window.location.search;return!this.props.userStore.values.currentUser&&this.props.authStore.isAuth()&&this.getUser(),t?o.a.createElement("div",null,o.a.createElement(ma,null),o.a.createElement(b.a,null,o.a.createElement(v.a,{path:"/:locale(en|fr|en-UK)",component:ca}),o.a.createElement(y.a,{from:"*",to:"/"+(n||"en")+a}))):o.a.createElement("div",null,o.a.createElement(ma,null),o.a.createElement("div",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)",textAlign:"center",width:"100%"}},o.a.createElement(He.a,{color:"secondary"})))}}]),t}(o.a.Component),ba=Object(E.b)("authStore","userStore","commonStore")(Object(w.a)(Object(E.c)(fa))),va=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(d.a,null,o.a.createElement(Ln.SnackbarProvider,{maxSnack:3},o.a.createElement(ba,null)))}}]),t}(r.Component);n(6241).config();var ya=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function wa(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){if("installed"===n.state)if(navigator.serviceWorker.controller){var a=new Event("newContentAvailable");window.dispatchEvent(a),console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)}else console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)})}}).catch(function(e){console.error("Error during service worker registration:",e)})}console.log("public url:");var Sa=n(160),Ea=n(62),ka=n(472),Oa=n.n(ka),Ca=n(473),Aa=n.n(Ca),ja=n(474),xa=n.n(ja),Ta=n(475),Pa=n(476);Object(A.d)([].concat(Object(a.a)(Aa.a),Object(a.a)(xa.a)));var _a={fr:Ta,en:Pa},Ia={authStore:Sa.a,userStore:Ea.a,recordStore:Xn.a,commonStore:ae.a,organisationStore:tt.a,suggestionsController:ea},Ra=ae.a.locale;"en-UK"===Ra&&(Ra="en"),s.a.render(o.a.createElement(Oa.a,null,o.a.createElement(E.a,Ia,o.a.createElement(O.MuiThemeProvider,{theme:rt},o.a.createElement(A.c,{locale:Ra,messages:_a[Ra]},o.a.createElement(va,null))))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");ya?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):wa(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):wa(t,e)})}}()},65:function(e,t,n){e.exports=n.p+"static/media/placeholder_person.f524a61d.png"},66:function(e,t,n){"use strict";var a=n(5),r=n(7),o=n(5983)("https://hooks.slack.com/services/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"),i=function(){function e(){Object(a.a)(this,e)}return Object(r.a)(e,null,[{key:"notifyError",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={channel:"#errors"+(n?"-"+n:""),text:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"slack_helper.js")+":line:"+t+" - "+e+"                                      {Navigator data : ("+window.navigator.appCodeName+"|"+window.navigator.appVersion+"|"+window.navigator.cookieEnabled+")}"};o.send(a)}},{key:"notify",value:function(e,t){o.send({channel:e,text:t})}}]),e}();t.a=i},69:function(e,t,n){"use strict";var a=n(16),r=n.n(a),o=n(24),i=n(5),s=n(7),c=n(4),l=n(38),u=n(18),p=n(62),g=function(){function e(){Object(i.a)(this,e),this.inProgress=!1,this.errors=null,this.values={orgTag:"",orgId:"",organisation:{},currentUserOrganisations:[],fullOrgFetch:!1}}return Object(s.a)(e,[{key:"setOrgTag",value:function(e){this.values.orgTag=e}},{key:"setOrgId",value:function(e){this.values.orgId=e}},{key:"setOrganisation",value:function(e){this.values.organisation=e}},{key:"setFullOrgFetch",value:function(e){this.values.fullOrgFetch=e}},{key:"reset",value:function(){this.values.organisation={},this.values.orgTag=""}},{key:"getOrganisation",value:function(){var e=this;return this.values.orgId?(this.inProgress=!0,this.errors=null,l.a.Organisation.get(this.values.orgId).then(function(t){return e.setOrganisation(t.organisation),e.setFullOrgFetch(!0),e.getAlgoliaKey(!0).then(function(){return e.values.organisation})}).catch(Object(c.d)(function(t){throw e.errors=t.response&&t.response.body&&t.response.body.errors,t})).finally(Object(c.d)(function(){e.inProgress=!1}))):Promise.resolve()}},{key:"getCurrentUserOrganisations",value:function(){var e=Object(o.a)(r.a.mark(function e(){var t=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(p.a.values.currentUser&&p.a.values.currentUser.orgsAndRecords.length>0)){e.next=4;break}return this.values.currentUserOrganisations=[],e.next=4,this.asyncForEach(p.a.values.currentUser.orgsAndRecords,function(){var e=Object(o.a)(r.a.mark(function e(n){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.Organisation.get(n.organisation).catch();case 2:(a=e.sent)&&a.organisation&&!t.values.currentUserOrganisations.some(function(e){return e.tag===a.organisation.tag})&&t.values.currentUserOrganisations.push(a.organisation);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"asyncForEach",value:function(){var e=Object(o.a)(r.a.mark(function e(t,n){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<t.length)){e.next=7;break}return e.next=4,n(t[a],a,t);case 4:a++,e.next=1;break;case 7:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAlgoliaKey",value:function(e){var t=this;return this.inProgress=!0,this.errors=null,(!u.a.algoliaKey&&!u.a.getCookie("algoliaKey")||e)&&(u.a.algoliaKeyOrganisation!==this.values.organisation.tag||e)?l.a.Organisation.getAlgoliaKey(this.values.organisation._id,this.values.organisation.public).then(function(e){return e?(u.a.setAlgoliaKey(e.public_key,t.values.organisation.tag),e.public_key.value):null}).catch(Object(c.d)(function(e){throw t.errors=e.response&&e.response.body&&e.response.body.errors,e})).finally(Object(c.d)(function(){t.inProgress=!1})):Promise.resolve(u.a.algoliaKey)}},{key:"getOrganisationForPublic",value:function(){var e=this;return this.values.orgTag?(this.inProgress=!0,this.errors=null,l.a.Organisation.getForPublic(this.values.orgTag).then(function(t){return e.setOrganisation(t.organisation),e.setFullOrgFetch(!1),e.values.organisation.public?e.getAlgoliaKey(!0).then(function(){return e.values.organisation}):e.values.organisation}).catch(Object(c.d)(function(t){throw e.errors=t.response&&t.response.body&&t.response.body.errors,t})).finally(Object(c.d)(function(){e.inProgress=!1}))):Promise.resolve()}},{key:"isKeyStillValid",value:function(){if(u.a.algoliaKey&&u.a.algoliaKeyValidity){var e=new Date(parseInt(u.a.algoliaKeyValidity));return(new Date).getTime()+36e5<e.getTime()}return!1}}]),e}();Object(c.g)(g,{inProgress:c.l,errors:c.l,values:c.l,reset:c.d,setOrganisation:c.d,setFullOrgFetch:c.d,setOrgTag:c.d,setOrgId:c.d,getOrganisation:c.d,getAlgoliaKey:c.d,getOrganisationForPublic:c.d,getCurrentUserOrganisations:c.d}),t.a=new g},82:function(e,t,n){"use strict";var a=n(5),r=n(7),o=n(4),i=n(38),s=n(62),c=function(){function e(){Object(a.a)(this,e),this.inProgress=!1,this.errors=null,this.values={orgId:"",recordId:"",recordTag:"",record:{},otherRecord:{}}}return Object(r.a)(e,[{key:"setOrgId",value:function(e){this.values.orgId=e}},{key:"setRecordTag",value:function(e){e&&(e=e.replace("#","%23")),this.values.recordTag=e}},{key:"setRecordId",value:function(e){this.values.recordId=e}},{key:"setRecord",value:function(e){this.values.record=e}},{key:"setOtherRecord",value:function(e){this.values.otherRecord=e}},{key:"reset",value:function(){this.values.orgId="",this.values.recordId="",this.values.record={}}},{key:"getRecord",value:function(){var e=this;return this.values.recordId?(this.inProgress=!0,this.errors=null,i.a.Record.get(this.values.recordId).then(function(t){return e.values.record=t?t.record:{},e.values.record}).catch(Object(o.d)(function(t){throw e.errors=t.response&&t.response.body&&t.response.body.errors,t})).finally(Object(o.d)(function(){e.inProgress=!1}))):Promise.reject(new Error("No record Id"))}},{key:"getRecordByTag",value:function(){var e=this;return this.values.recordTag?(this.inProgress=!0,this.errors=null,i.a.Record.getByTag(this.values.recordTag,this.values.orgId).then(function(t){return e.values.otherRecord=t?t.record:{},e.values.otherRecord}).catch(Object(o.d)(function(t){throw e.errors=t.response&&t.response.body&&t.response.body.errors,t})).finally(Object(o.d)(function(){e.inProgress=!1}))):Promise.reject(new Error("No record Tag"))}},{key:"getRecordByUser",value:function(){var e=this;return s.a.values.currentUser._id&&this.values.orgId?(this.inProgress=!0,this.errors=null,i.a.Record.getByUser(s.a.values.currentUser._id,this.values.orgId).then(function(t){return e.values.record=t?t.record:null,e.values.record}).catch(Object(o.d)(function(t){throw e.errors=t.response&&t.response.body&&t.response.body.errors,t})).finally(Object(o.d)(function(){e.inProgress=!1}))):Promise.reject(new Error("Bad parameters"))}},{key:"postRecord",value:function(e){var t=this;return this.inProgress=!0,this.errors=null,i.a.Record.post(this.values.orgId,e||this.values.record).then(function(n){return e||(t.values.record=n.record),n.record}).catch(Object(o.d)(function(e){throw t.errors=e.response&&e.response.body&&e.response.body.errors,e})).finally(Object(o.d)(function(){t.inProgress=!1}))}},{key:"updateRecord",value:function(e){var t=this;this.inProgress=!0,this.errors=null;var n=this.buildRecordToUpdate(e);return i.a.Record.put(this.values.orgId,this.values.recordId,n).then(function(e){return t.values.record=e?e.record:{},t.values.record}).catch(Object(o.d)(function(e){throw t.errors=e.response&&e.response.body&&e.response.body.errors,e})).finally(Object(o.d)(function(){t.inProgress=!1}))}},{key:"buildRecordToUpdate",value:function(e){var t=this,n={};return e?e.forEach(function(e){n[e]=t.values.record[e]}):n=this.values.record,n}},{key:"deleteRecord",value:function(){var e=this;return this.inProgress=!0,this.errors=null,i.a.Record.delete(this.values.recordId).then(function(t){e.values.record={},e.values.recordId=""}).catch(Object(o.d)(function(t){throw e.errors=t.response&&t.response.body&&t.response.body.errors,t})).finally(Object(o.d)(function(){e.inProgress=!1}))}}]),e}();Object(o.g)(c,{inProgress:o.l,errors:o.l,values:o.l,setOrgId:o.d,reset:o.d,setRecordTag:o.d,setRecordId:o.d,setRecord:o.d,getRecord:o.d,getRecordByTag:o.d,postRecord:o.d,updateRecord:o.d,deleteRecord:o.d}),t.a=new c}},[[5729,1,2]]]);
//# sourceMappingURL=main.67bff2f4.chunk.js.map
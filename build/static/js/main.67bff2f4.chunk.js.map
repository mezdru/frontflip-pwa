{"version":3,"sources":["stores/auth.store.js","stores/common.store.js","services/email.service.js","resources/images/fly_away.jpg","services/url.service.js","agent.js","resources/images/g.svg","resources/images/placeholder_hashtag.png","resources/images/chat.png","resources/images/colleagues.png","resources/icons/addToHomescreenIOs.png","stores/user.store.js","components/utils/buttons/GoogleButton.js","components/utils/snackbars/SnackbarCustom.js","components/auth/login/Login.js","components/auth/register/Register.js","components/auth/Auth.js","components/utils/banner/Banner.js","components/header/Header.css.js","components/header/HeaderLinks.js","components/utils/logo/Logo.js","components/header/HeaderToolBar.js","components/header/HeaderAppBar.js","components/availabilityToggle/AvailabilityToggle.js","components/utils/orgsList/OrganisationsList.js","components/header/HeaderDrawer.js","components/header/Header.js","pages/auth/AuthPage.js","pages/auth/PasswordForgot.js","pages/auth/PasswordReset.js","services/profile.service.js","components/algolia/SearchFieldElements.js","services/algolia.service.js","theme.js","components/algolia/SearchField.js","components/profile/menuButton.js","components/utils/wing/Wing.js","components/profile/ProfileLayout.js","components/profile/ProfileLayout.css.js","components/algolia/SearchSuggestions.js","components/algolia/SearchResults.js","components/availabilityToggle/Availability.js","components/card/CardProfile.js","components/onboard/steps/OnboardCongratulation.js","components/utils/prompt/PromptIOsInstall.js","components/utils/addWing/AddWingPopup.js","pages/SearchPage.js","components/algolia/WingsSuggestion.js","components/onboard/steps/OnboardFirstWings.js","pages/SearchPage.css.js","components/onboard/OnboardWelcome.js","components/utils/uploadcare/Uploader.js","components/utils/fields/PictureField.js","components/onboard/steps/OnboardIntro.js","components/utils/fields/AddContactField.js","components/onboard/steps/OnboardContacts.js","components/utils/wing/UserWings.js","components/algolia/WingsSuggestion.css.js","components/onboard/steps/OnboardFirstWings.css.js","components/onboard/steps/OnboardWings.js","components/utils/buttons/LoaderFeedback.js","components/onboard/OnboardStepper.js","services/suggestions.service.js","services/suggestionsController.service.js","pages/OnboardPage.js","routes/MainRouteOrganisationRedirect.js","pages/ErrorPage.js","routes/MainRouteOrganisation.js","components/utils/reloader/ReloadModal.js","routes/MainRoute.js","App.js","serviceWorker.js","index.js","resources/images/placeholder_person.png","services/slack.service.js","stores/organisation.store.js","stores/record.store.js"],"names":["AuthStore","inProgress","errors","values","email","password","orgTag","invitationCode","temporaryToken","this","tToken","commonStore","getAccessToken","getRefreshToken","_this","agent","Auth","login","then","response","access_token","SlackService","notifyError","setAuthTokens","userStore","getCurrentUser","catch","action","err","body","finally","_this2","googleCallbackLogin","Promise","reject","_this3","register","data","respLogin","emailService","confirmLoginEmail","respEmail","_this4","organisationStore","organisation","_id","registerToOrg","_this5","Email","passwordForgot","token","hash","_this6","updatePassword","setEmail","removeAuthTokens","removeCookie","forgetUser","resolve","Test","getUser","user","decorate","observable","setPassword","setOrgTag","setInvitationCode","reset","logout","__webpack_exports__","cookies","Cookies","CommonStore","Object","_home_quentin_Documents_Wingzy_frontflip_pwa_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","locale","searchFilters","getCookie","setSearchFilters","setCookie","JSON","stringify","getSearchFilters","name","get","init","accessToken","refreshToken","algoliaKey","algoliaKeyOrganisation","populateLocale","localesAccepted","window","location","pathname","split","some","lg","navigator","language","userLanguage","isObject","parse","localStorage","getItem","value","setItem","expires","set","path","domain","options","remove","tokens","expDate","Date","setMinutes","getMinutes","refresh_token","expDate2","setFullYear","getFullYear","valid_until","appName","setToken","setAlgoliaKey","EmailService","console","log","status","module","exports","__webpack_require__","p","UrlService","env","process","href","search","httpType","host","organisationTag","params","checkEnv","checkLocale","checkHttp","url","global","superagent_promise__WEBPACK_IMPORTED_MODULE_0__","superagent_promise__WEBPACK_IMPORTED_MODULE_0___default","n","superagent__WEBPACK_IMPORTED_MODULE_1__","superagent__WEBPACK_IMPORTED_MODULE_1___default","_stores_auth_store__WEBPACK_IMPORTED_MODULE_2__","_stores_common_store__WEBPACK_IMPORTED_MODULE_3__","_services_url_service__WEBPACK_IMPORTED_MODULE_4__","superagent","superagentPromise","_superagent","API_ROOT_AUTH","API_ROOT","handleErrors","authStore","createUrl","responseBody","res","tokenPlugin","req","requests","validateToken","del","concat","timeout","use","end","put","post","client_id","client_secret","grant_type","text","username","orgId","User","getCurrent","welcomeUser","userId","organisationId","update","Record","recordId","getByTag","recordTag","getByUser","record","delete","Organisation","getForPublic","getAlgoliaKey","isPublic","userEmail","UserStore","currentUser","syncRecord","recordStore","currentOrgAndRecord","orgsAndRecords","find","orgAndRecord","setRecordId","getRecord","undefined","updateUser","withStyles","theme","root","&:not(:hover)","backgroundColor","&:hover","color","_ref","id","props","objectWithoutProperties","react_default","a","createElement","index_es","assign","className","classes","src","googleLogo","style","width","height","position","left","alt","lib_index_es","variantIcon","success","CheckCircleIcon","warning","WarningIcon","error","ErrorIcon","info","InfoIcon","SnackbarCustom","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","open","_this$props","variant","onClose","message","other","Icon","SnackbarContent_default","classNames","aria-describedby","icon","iconVariant","dangerouslySetInnerHTML","__html","React","Component","green","palette","dark","primary","amber","fontSize","opacity","marginRight","spacing","unit","display","alignItems","verticalCenter","right","margin","maxWidth","ReactGA","initialize","REACT_APP_GOOGLE_ANALYTICS_ID","Login","handleEmailChange","e","target","handlePasswordChange","handleSubmitForm","preventDefault","event","category","setState","redirectTo","loginErrors","intl","formatMessage","errorMessage","error_description","forgotPasswordLink","isAuth","_this$props$authStore","_this$state","Redirect","push","to","onSubmit","container","item","direction","snackbars_SnackbarCustom","buttons_GoogleButton","fullWidth","onClick","handleGoogleAuth","textAlign","label","type","autoComplete","onChange","required","justify","component","Link","inject","injectIntl","observer","Register","registerSuccess","registerSuccessMessage","orgName","forEach","param","dumbCount","parseInt","msg","toLocaleString","registerErrors","queryString","require","handleGoogleCallback","asyncToGenerator","regenerator_default","mark","_callee","query","wrap","_context","prev","next","abrupt","setTemporaryToken","stop","_x","apply","arguments","handleChange","handleChangeIndex","index","tag","initialTab","queryParams","displayLoader","pageview","observe","change","googleState","superadmin","xs","tabs","indicatorColor","textColor","leftTabs","rightTabs","lib_default","axis","onChangeIndex","login_Login","register_Register","withTheme","defineProperty","marginTop","breakpoints","down","padding","paddingLeft","paddingRight","Banner","source","cover","defaultBanner","org","objectSpread","backgroundImage","rootBanner","children","up","boxShadow","backgroundSize","backgroundPosition","backgroundRepeat","styles","menuLink","minWidth","secondary","main","title","lineHeight","sectionDesktop","sectionMobile","appBar","transition","transitions","create","easing","sharp","duration","leavingScreen","background","zIndex","appBarShift","marginLeft","easeOut","enteringScreen","hide","drawer","flexShrink","drawerPaper","drawerHeader","mixins","toolbar","justifyContent","drawerIconButton","drawerIcon","content","flexGrow","contentShift","fixToRight","leftSubmenuLogo","top","transform","divider","menuButton","cursor","logoBorder","backgroundCOlor","border","HeaderLinks","auth","grow","defaultLogo","Logo","logo","HeaderToolBar","handleDrawerOpen","logo_Logo","header_HeaderLinks","HeaderAppBar","header_HeaderToolBar","AvailabilityToggle","_React$Component","current","labels","middle","inherits","createClass","key","personAvailability","newValue","newCurrent","updateRecord","handleAvailabilityClick","OrganisationsList","getCurrentUserOrganisations","forceUpdate","_this$props$organisat","currentUserOrganisations","orgsContainer","map","i","button","orgItem","itemLogo","itemName","listStyleType","textTransform","fontWeight","whiteSpace","textOverflow","overflow","entities","Entities","XmlEntities","App","handleLogout","bind","assertThisInitialized","picture","uri","handleDrawerClose","decode","anchor","onOpen","paper","tabIndex","role","onKeyDown","icons_index_es","Fragment","getPicturePath","defaultPicture","primaryTypographyProps","noWrap","handleDisplayProfile","availabilityToggle_AvailabilityToggle","canInvite","admin","premium","length","orgsList_OrganisationsList","withRouter","successLogout","header_HeaderAppBar","HeaderDrawer","AuthPage","match","Header","banner_Banner","sm","auth_Auth","bottom","marginBottom","PasswordForgot","successPasswordReset","emailError","getOrganisationForPublic","form","intro","PasswordReset","passwordErrors","disabled","term","protectingData","paddingTop","paddingBottom","profile_service","EXTRA_LINK_LIMIT","makeHightlighted","filters","hashtags","hashtag","filterValue","toLowerCase","class","orderHashtags","highlighted","notHighlighted","htmlDecode","input","document","innerHTML","childNodes","nodeValue","number","charAt","defaultHashtagPicture","links","link","array","makeLinkDisplay","makeLinkIcon","makeLinkUrl","encodeURIComponent","setWorkplaceLink","setWorkchatLink","linkUrl","mobileAndTabletcheck","linkUrlArray","join","newLinkUrl","check","userAgent","vendor","opera","test","substr","size","resizePicture","emoji","getEmojiUrl","pictureUrl","urlSplited","arrayOfEmoji","randomIndex","Math","floor","random","str","twemoji","MultiValueContainer","Option","innerProps","picturePath","ProfileService","getProfileType","customStyles","control","base","borderRadius","boxSizing","isFocused","borderColor","minHeight","maxHeight","menu","hyphens","wordWrap","menuList","multiValue","placeholder","valueContainer","provided","overflowY","WebkitFlexWrap","flexWrap","MsFlexWrap","scrollbarWidth","&:last-child","algolia_service","AlgoliaService","indexName","client","algoliasearch","initIndex","clearCache","lastSelection","privateOnly","searchForFacetValues","facetName","facetQuery","maxFacetHits","facetFilters","makeFacetFilters","currentBank","getLocalStorage","hitsPerPage","addToLocalStorage","hits","hit","findIndex","elt","Tag","setLocalStorage","inputValue","hashtagOnly","wingsFamily","makeOptionsFilters","attributesToRetrieve","restrictSearchableAttributes","highlightPreTag","highlightPostTag","filter","page","attributesToSnippet","light","hover","contrastText","default","createMuiTheme","typography","useNextVariants","fontFamily","overrides","MuiGrid","spacing-xs-16","MuiTypography","h6","h5","h4","body1","body2","MuiAvatar","img","MuiButton","contained","MuiIconButton","MuiChip","& div","& div:nth-child(2)","colorPrimary","colorSecondary","MuiBackdrop","MuiCard","MuiFab","MuiCardActions","MuiCardContent","overflowX","MuiCardHeader","resize","MuiAppBar","MuiDrawer","MuiPaper","MuiDialog","MuiOutlinedInput","adornedEnd","MuiInputLabel","shrink","MuiList","MuiListItem","MuiTab","labelContainer","MuiMobileStepper","dot","dotActive","MuiInput","SearchField","prepareLabels","arrayOfLabel","displayedName","displayedNameText","getTextLabel","_highlightResult","name_translated","labelText","getOptionValue","option","getOptionLabel","selectedOption","scrollToBottom","handleAddWing","refineWithSelectedOptions","updateFilters","optionsString","updateOptions","getOptions","algoliaResponse","sent","_ref2","_callee2","_context2","fetchOptions","_x2","handleCreateOption","_ref3","_callee3","arrayOfOption","newRecord","wingsFamilyRecord","_context3","trim","setRecordTag","getRecordByTag","postRecord","recordSaved","_x3","noOptionsMessage","createOptionMessage","handleSearchClick","selectProps","onInputChange","_ref4","menuIsOpen","keyCode","defaultValue","nextProps","newFilter","val","newSelectedOption","setTimeout","querySelector","scrollLeft","scrollWidth","defaultOptions","react_select_esm","formatCreateLabel","loadOptions","onCreateOption","components","DropdownIndicator","isMulti","onSelectResetsInput","onBlurResetsInput","onCloseResetsInput","arrowRenderer","clearRenderer","MenuButton","handleToggle","handleClose","anchorEl","contains","deleteAlert","alert","urlUpdateCover","urlEditIntro","urlEditAboutMe","urlDeleteProfile","buttonRef","node","aria-owns","aria-haspopup","disablePortal","TransitionProps","placement","transformOrigin","onClickAway","wingImg","suggestionWing","removable","animated","animation","animationFillMode","bigWing","@keyframes wingEaseIn","from","85%","avatar","onDelete","onMouseDown","onMouseUp","onBlur","ProfileLayout","canEdit","workingRecord","objectID","handleReturnToSearch","element","displayIn","addToFilters","handleRedirectToEditWings","setOrgId","rootUrl","currentHit","transformLinks","profileContainerHide","aria-label","returnButton","returnButtonSize","generalPart","getPicturePathResized","subheader","rel","contactIcon","hashtagsPart","minHeightPossible","wing_Wing","aboutMe","description","_generalPart","_hashtagsPart","_minHeightPossible","logoContainer","& img","LOGO_HEIGHT","wordBreak","buttonIcon","wings","editButton","updateCoverButton","& ul","animationName","animationDuration","SearchSuggestions","facetHits","fetchSuggestions","_ismounted","fetchFacetValues","suggestionsContainer","shouldDisplaySuggestion","suggestionLabel","suggestionCount","count","suggestion","animationDelay","@keyframes easeIn","SearchResults","fetchHits","showNoResult","hideShowMore","hitsAlreadyDisplayed","min","nbHits","nbPages","endTask","loadInProgress","handleShowMore","shuffleArray","arrayOut","splice","HitComponent","hitsResult","hitList","WebkitAnimationDelay","md","cardMobileView","alignContent","chat","image","Availability","dispo","available","setExtraLinkLimit","CardProfile","getLogoSize","backgroundLogo","availabilityToggle_Availability","titleSmallestView","gutterBottom","_snippetResult","cardHeader","contactField","disableActionSpacing","contact","contactButton","wingsContainer","withWidth","_contactButton","_dispo","& span em","unavailable","backgroundPositionX","backgroundPositionY","Transition","Slide_default","OnboardCongratulation","isOpen","handleOnboardEnd","Dialog_default","TransitionComponent","keepMounted","aria-labelledby","DialogContent_default","ColleagueImg","DialogContentText_default","organisationName","DialogActions_default","actions","Button_default","_title","titleEmoji","PromptIOsInstall","isIOs","isInStandaloneMode","standalone","handleClickAway","canDisplayPopup","ClickAwayListener_default","popupContainer","shareIcon","AddToHomescreenIOs","triangle","borderLeft","borderRight","borderTop","clear","AddWingPopup","wingsPopulated","notify","populateWingsToAdd","asyncForEach","wingsToAdd","wing","hashtagToAdd","recordHasHashtag","callback","xsDown","wingsCount","wingsList","buttons","smUp","interval","interval2","SearchPage","addHashtagsToSearch","newFilters","shouldAwaitToUpdateLayout","resultsType","displayedHit","shouldUpdateUrl","selectedOptions","shouldDisplayHitResults","newQuery","getSearchBarWidth","isWidthUp","shouldSetRootUrl","getHashtagsFilter","getActionInQueue","hashtagsFilter","actionInQueue","history","listen","showCongratulation","profileTag","searchBarWidth","isWidthDown","searchBar","components_algolia_SearchField","algolia_SearchSuggestions","algolia_SearchResults","Card","profile_ProfileLayout","profileContainer","steps_OnboardCongratulation","addWing_AddWingPopup","prompt_PromptIOsInstall","hitListContainer","@keyframes popIn","@keyframes popOut","@keyframes fadeIn","& ul li","& ul li > div:first-child","searchBanner","OnboardWelcome","smDown","banner","mdUp","handleEnterToOnboard","_banner","Uploader","widget","uploadcare","Widget","uploader","onUploadComplete","files","onDialogOpen","dialog","attributes","getInputAttributes","ref","PictureField","file","loading","setRecord","handleSave","handleUploadComplete","cdnUrl","handleResetPicture","pictureContainer","uploadcare_Uploader","data-tabs","data-crop","data-image-shrink","data-images-only","_picture","OnboardIntro","field","flexBasis","fields_PictureField","helperText","AddContactField","addLink","typeOfField","getIcon","linkName","capitalize","& div[role=\"tooltip\"]","&::before","btnPopup","&:first-child()","OnboardContacts","handleLinksChange","deleteLink","linkToRemove","newLinkIndex","getLinkByType","typeWanted","setTypeInput","setTypePattern","pattern","string","toUpperCase","slice","setDefaultLinks","types","_loop","_i","defaultLink","InputProps","startAdornment","endAdornment","fields_AddContactField","parent","@keyframes linkPop","UserWings","shoudlRenderWing","shouldAnimateWing","newTag","currentHashtagsLength","scrollUserWingsToBottom","handleRemoveWing","WingsSuggestions","handleSelectSuggestion","currentTarget","parentNode","eltChild","classList","add","suggestionSelected","animationInProgress","animateOut","blur","suggestionsController","makeNewSuggestions","suggestions","getCurrentSuggestions","shouldUpdate","handleMouseDown","setProperty","handleMouseUp","reduceElt","initWidth","offsetWidth","currentInterval","setInterval","max","clearInterval","getDisplayedName","isNewSuggestions","_newSuggestions","all","renderWing","animateIn","offsetSuggestionsIndex","renderWingsList","isEven","suggestionsDisplayed","even","odd","suggestionList","scrollToSuggestion","getElementsByClassName","scrollableClass","initialScrollLeft","suggestionInterval","scroll1","scroll2","scrollRight","scrollStop","isInViewport","offset","elementNode","getBoundingClientRect","innerWidth","SuggestionsController","bank","renderComponent","onlyViewport","_currentSuggestions","nextState","el","scrollButton","transparentGradientBoxLeft","transparentGradientBoxRight","_transparentGradientB","scrollbarColor","& li ","@keyframes easeOut","50%","OnboardFirstWings","fetchFirstWings","firstWings","getFirstWingsStyle","recordObserver","firstWingsList","firstWing","_img","_firstWing","OnboardWings","getElementById","scrollTop","scrollHeight","addAndSave","hashtagRecord","newHashtags","renderTitleByStep","isFirstWings","Typography_default","isFeaturedWings","getFeaturedWings","renderByStep","steps_OnboardFirstWings","activeStepLabel","WingsSuggestion","stepLabel","featuredWingsFamily","fam","activeStepOne","activeStep","userWingsPosition","wing_UserWings","_userWingsPosition","fabProgress","buttonSuccess","LoaderFeedback","feedback","buttonClassname","Fab_default","Check_default","Save_default","CircularProgress_default","VirtualizeSwipeableViews","bindKeyboard","virtualize","SwipeableViews","timeoutArray","OnboardStepper","makeSteps","steps","familySteps","initializeSuggestions","currentStep","initSuggestions","handleNext","edit","getRecordByUser","google","welcomeCurrentUser","handleBack","arrayOfLabels","tm","clearTimeout","showFeedback","enqueueSnackbar","handleStepChange","getNextButtonText","shouldNextBeHighlighted","initStep","canNext","wantedUrl","replace","borderBottom","MobileStepper_default","nextButton","stepperButton","stepperButtonHighlighted","KeyboardArrowLeft_default","KeyboardArrowRight_default","backButton","slideRenderer","StepComponent","getStepComponent","buttons_LoaderFeedback","now","withSnackbar","SuggestionsService","syncBank","loadBank","removeUserWings","makeInitialSuggestions","fetchPublicHashtags","populateSuggestionsData","formatHashtagsQuery","_bank","fetchWingsFamily","addHitsToSuggestions","nbHitToAdd","suggestionToAdd","isInSuggestions","isInUserWings","fetchHashtags","suggestionsToReturn","suggestionTag","sugInRet","updateSuggestions","_x4","_x5","getData","bankElt","_workInProgress","_user","_randomNumber","suggestions_service","SuggestionsControllerService","makeInitialSuggestionsList","_observeUpdate","indexRemoved","makeNewSuggestionsList","counter","newS","indexInCurrent","sug","logData","logSuggestionsTag","suggestionsController_service","OnboardPage","populateStep","stepNumber","inOnboarding","getRecordForUser","editMode","step","onboard_OnboardStepper","onboard_OnboardWelcome","MainRouteOrganisationRedirect","persistWingToAdd","isAction","manageAccessRight","canUserAccessOrganisation","redirectUserAuthWithoutAccess","getOrganisation","redirectUserAuthWithAccess","fullOrgFetch","public","wait","isNewOrg","welcomed","ms","r","j","resetRedirectTo","Switch","Route","exact","auth_AuthPage","pages_OnboardPage","ErrorPage","errorCode","errorType","layout","subLayout","bigPicture","newOrgLink","MainRouteOrganisation","routes_MainRouteOrganisationRedirect","keyframes","_templateObject","Modal","styled","div","_templateObject2","ReloadModal","reload","show","addEventListener","MainRoute","endUrl","ReloadModal_ReloadModal","BrowserRouter","build","maxSnack","routes_MainRoute","config","isLocalhost","Boolean","hostname","registerValidSW","swUrl","serviceWorker","registration","onupdatefound","installingWorker","installing","onstatechange","controller","Event","dispatchEvent","onUpdate","onSuccess","addLocaleData","toConsumableArray","locale_en","locale_fr","messages","fr","messages_fr","en","messages_en","stores","ReactDOM","render","react_https_redirect_lib_default","index_module","core_styles","src_App","URL","origin","fetch","contentType","headers","indexOf","ready","unregister","checkValidServiceWorker","slack","line","developerName","slackObject","channel","appCodeName","appVersion","cookieEnabled","send","OrganisationStore","setOrganisation","setFullOrgFetch","_home_quentin_Documents_Wingzy_frontflip_pwa_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_home_quentin_Documents_Wingzy_frontflip_pwa_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","currentOrg","public_key","algoliaKeyValidity","valid_until_date","getTime","RecordStore","otherRecord","Error","arrayOfFields","recordToUpdate","buildRecordToUpdate","_this7","deleteRecord"],"mappings":"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","file":"static/js/main.67bff2f4.chunk.js","sourcesContent":["import { observable, action, decorate } from \"mobx\";\nimport agent from '../agent';\nimport commonStore from \"./common.store\";\nimport userStore from \"./user.store\";\nimport organisationStore from \"./organisation.store\";\nimport emailService from \"../services/email.service\";\nimport SlackService from '../services/slack.service';\n\nclass AuthStore {\n  inProgress = false;\n  errors = null;\n  values = {\n    email: '',\n    password: '',\n    orgTag: '',\n    invitationCode: '',\n    temporaryToken: null,\n  };\n\n  setEmail(email) {\n    this.values.email = email;\n  }\n\n  setTemporaryToken(tToken) {\n    this.values.temporaryToken = tToken;\n  }\n\n  setPassword(password) {\n    this.values.password = password;\n  }\n\n  setOrgTag(orgTag) {\n    this.values.orgTag = orgTag;\n  }\n\n  setInvitationCode(invitationCode) {\n    this.values.invitationCode = invitationCode;\n  }\n\n  reset() {\n    this.values.email = '';\n    this.values.password = '';\n    this.values.orgTag = '';\n    this.values.invitationCode = '';\n    this.values.temporaryToken = null;\n  }\n\n  isAuth() {\n    if (commonStore.getAccessToken() || commonStore.getRefreshToken()) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n\n  /**\n   * @description Call authentification service to fetch tokens\n   */\n  login() {\n    this.inProgress = true;\n    this.errors = null;\n\n    return agent.Auth.login(this.values.email, this.values.password)\n      .then((response) => {\n        if (response && response.access_token) {\n          SlackService.notifyError(this.values.email + ' logged in with email and password.', '61', 'quentin', 'auth.store.js');\n          commonStore.setAuthTokens(response);\n          return userStore.getCurrentUser()\n            .then(() => { return 200; });\n        }\n        else return 403;\n      })\n      .catch(action((err) => {\n        this.errors = err.response && err.response.body && err.response.body.errors;\n        throw err;\n      }))\n      .finally(action(() => { this.inProgress = false; }));\n  }\n\n  googleCallbackLogin() {\n    if(!this.values.temporaryToken) return Promise.reject();\n\n    this.inProgress = true;\n    this.errors = null;\n\n    return agent.Auth.googleCallbackLogin(this.values.temporaryToken)\n      .then((response) => {\n        if (response && response.access_token) {\n          SlackService.notifyError(this.values.email + ' google callback login successful.', '90', 'quentin', 'auth.store.js');\n          commonStore.setAuthTokens(response);\n          return userStore.getCurrentUser()\n            .then(() => { return 200; });\n        }\n        else return 403;\n      })\n      .catch(action((err) => {\n        this.errors = err.response && err.response.body && err.response.body.errors;\n        throw err;\n      }))\n      .finally(action(() => { this.inProgress = false; }));\n  }\n\n  /**\n   * @description Call authentification service to register a new User\n   */\n  register() {\n    this.inProgress = true;\n    this.errors = null;\n\n    return agent.Auth.register(this.values.email, this.values.password)\n      .then((data) => {\n        return this.login(this.values.email, this.values.password)\n          .then((respLogin) => {\n            return emailService.confirmLoginEmail(null)\n              .then((respEmail) => {\n                return true;\n              });\n          });\n      })\n      .catch(action((err) => {\n        // any other response status than 20X is an error\n        this.errors = err.response && err.response.body && err.response.body.errors;\n        throw err;\n      }))\n      .finally(action(() => { this.inProgress = false; }));\n  }\n\n  /**\n   * @description Call authentification service to register an User to an Organisation\n   * @param {access_token} needed.\n   */\n  registerToOrg() {\n    if(!organisationStore.values.organisation._id) return;\n    this.inProgress = true;\n    this.errors = null;\n\n    return agent.Auth.registerToOrg(organisationStore.values.organisation._id, this.values.invitationCode)\n      .then((data) => {\n        return data;\n      })\n      .catch(action((err) => {\n        this.errors = err.response && err.response.body && err.response.body.errors;\n        throw err;\n      }))\n      .finally(action(() => { this.inProgress = false; }));\n  }\n\n  passwordForgot() {\n    this.inProgress = true;\n    this.errors = null;\n\n    return agent.Email.passwordForgot(this.values.email)\n      .then((data) => {\n        return data;\n      })\n      .catch(action((err) => {\n        this.errors = err;\n        throw err;\n      }))\n      .finally(action(() => { this.inProgress = false; }));\n  }\n  updatePassword(token, hash) {\n    this.inProgress = true;\n    this.errors = null;\n\n    return agent.Email.updatePassword(token, hash, this.values.password)\n      .then((data) => {\n        this.setEmail(data.email);\n        return this.login();\n      })\n      .catch((err) => {\n        this.errors = err;\n        throw err;\n      })\n      .finally(action(() => { this.inProgress = false; }));\n  }\n\n  logout() {\n    commonStore.removeAuthTokens();\n    commonStore.removeCookie('algoliaKey');\n    commonStore.removeCookie('algoliaKeyOrganisation');\n    userStore.forgetUser();\n    return Promise.resolve();\n  }\n\n  /**\n   * @description test call\n   */\n  getUser() {\n    return agent.Test.getUser()\n      .then((user) => {\n        return user;\n      });\n  }\n}\n\ndecorate(AuthStore, {\n  inProgress: observable,\n  errors: observable,\n  values: observable,\n  setEmail: action,\n  setPassword: action,\n  setOrgTag: action,\n  setInvitationCode: action,\n  reset: action,\n  login: action,\n  logout: action,\n  register: action,\n  registerToOrg: action\n});\n\nexport default new AuthStore();","import { observable, action, decorate } from 'mobx';\nimport Cookies from 'universal-cookie';\nconst cookies = new Cookies();\n\n\nclass CommonStore {\n\n  accessToken;\n  refreshToken;\n  algoliaKey;\n  algoliaKeyOrganisation;\n  locale = 'en-UK';\n  searchFilters = [];\n\n  constructor() {\n    this.init();\n  }\n\n  init() {\n    this.accessToken = this.getCookie('accessToken');\n    this.refreshToken = this.getCookie('refreshToken');\n    this.algoliaKey = this.getCookie('algoliaKey');\n    this.algoliaKeyOrganisation = this.getCookie('algoliaKeyOrganisation');\n    this.searchFilters = this.getCookie('searchFilters');\n    this.populateLocale();\n  }\n\n  populateLocale() {\n    let localesAccepted = ['en', 'fr'];\n    this.locale = window.location.pathname.split('/')[1];\n    if (!localesAccepted.some(lg => lg === this.locale)) this.locale = this.getCookie('locale');\n    if (!this.locale) {\n      this.locale = navigator.language || navigator.userLanguage || 'en';\n      if(localesAccepted.some(lg => lg === this.locale)){\n        this.setCookie('locale', this.locale);\n      }else {\n        this.setCookie('locale', 'en');\n      }\n    }\n  }\n\n  getLocalStorage(name, isObject) {\n    if(isObject) return JSON.parse(localStorage.getItem(name));\n    else return localStorage.getItem(name);\n  }\n\n  setLocalStorage(name, value, isObject) {\n    return Promise.resolve().then(function () {\n      if(isObject) localStorage.setItem(name, JSON.stringify(value));\n      else localStorage.setItem(name, value);\n    });\n  }\n\n  getAccessToken = () => this.getCookie('accessToken');\n  getRefreshToken = () => this.getCookie('refreshToken');\n  setSearchFilters = (searchFilters) => this.setCookie('searchFilters', JSON.stringify(searchFilters));\n  getSearchFilters = () => this.getCookie('searchFilters');\n\n  setCookie(name, value, expires) {\n    if (process.env.NODE_ENV === 'production' || process.env.NODE_ENV === 'staging') {\n      cookies.set(name, value, (expires ? { expires: expires, path: '/', domain: 'wingzy.com' } : { path: '/', domain: 'wingzy.com' }));\n    } else {\n      cookies.set(name, value, (expires ? { expires: expires, path: '/' } : { path: '/' }));\n    }\n    this.init();\n  }\n\n  getCookie = (name) => cookies.get(name);\n\n  removeCookie(name) {\n    let options = {};\n    if (process.env.NODE_ENV === 'production' || process.env.NODE_ENV === 'staging') {\n      options = { path: '/', domain: 'wingzy.com' };\n    } else {\n      options = { path: '/' };\n    }\n    cookies.remove(name, options);\n    this.init();\n  }\n\n  removeAuthTokens() {\n    let options = {};\n    if (process.env.NODE_ENV === 'production' || process.env.NODE_ENV === 'staging') {\n      options = { path: '/', domain: 'wingzy.com' };\n    } else {\n      options = { path: '/' };\n    }\n    cookies.remove('accessToken', options);\n    cookies.remove('refreshToken', options);\n    this.init();\n  }\n\n  setAuthTokens(tokens) {\n    if (tokens) {\n      let expDate = new Date();\n      expDate.setMinutes(expDate.getMinutes() + 55);\n\n      this.accessToken = tokens.access_token;\n      this.setCookie('accessToken', this.accessToken, expDate);\n\n      if(tokens.refresh_token && (tokens.refresh_token !== 'undefined')) {\n        let expDate2 = new Date();\n        expDate2.setFullYear(expDate2.getFullYear() + 1);\n  \n        this.refreshToken = tokens.refresh_token;\n        this.setCookie('refreshToken', this.refreshToken, expDate2);\n      }\n    }\n    this.init();\n  }\n\n  setAlgoliaKey(algoliaKey, orgTag) {\n    this.algoliaKey = algoliaKey.value;\n    let expDate = new Date(algoliaKey.valid_until);\n    this.setCookie('algoliaKey', this.algoliaKey, expDate);\n    this.setCookie('algoliaKeyOrganisation', orgTag, expDate);\n    this.init();\n  }\n}\n\ndecorate(CommonStore, {\n  appName: observable,\n  accessToken: observable,\n  refreshToken: observable,\n  algoliaKey: observable,\n  algoliaKeyOrganisation: observable,\n  searchFilters: observable,\n  locale: observable,\n  setToken: action,\n  setAlgoliaKey: action,\n  getCookie: action,\n  setCookie: action,\n  removeCookie: action,\n  removeAuthTokens: action,\n  setSearchFilters: action,\n  getSearchFilters: action\n});\n\nexport default new CommonStore();","import agent from '../agent';\n\nclass EmailService {\n  inProgress = false;\n  errors = null;\n\n  confirmLoginEmail(orgTag) {\n    this.inProgress = true;\n    this.errors = null;\n\n    return agent.Email.confirmLoginEmail(orgTag)\n      .then((response) => {\n        console.log(JSON.stringify(response));\n        return true;\n      })\n      .catch((err) => {\n        console.log(err);\n        console.log(err.status);\n        this.errors = err.response && err.response.body && err.response.body.errors;\n        throw err;\n      })\n      .finally(() => { this.inProgress = false; });\n  }\n}\n\n\n\nexport default new EmailService();","module.exports = __webpack_public_path__ + \"static/media/fly_away.bad63307.jpg\";","import commonStore from '../stores/common.store';\n\nclass UrlService {\n\n  env;\n  httpType;\n  url;\n  locale;\n\n  checkEnv() {\n    this.env = process.env.NODE_ENV;\n    if (window.location.href.search('staging') !== -1) {\n      this.env = 'staging';\n    }\n  }\n\n  checkLocale() {\n    this.locale = ((this.env === 'production' || this.env === 'staging') ? (commonStore.getCookie('locale') || commonStore.locale) : 'en-UK');\n  }\n\n  checkHttp() {\n    if (this.env === 'production') {\n      this.httpType = 'https://';\n    } else {\n      this.httpType = 'http://';\n    }\n  }\n\n  createUrl(host, path, organisationTag, params) {\n    this.checkEnv();\n    this.checkLocale();\n    this.checkHttp();\n\n    if (this.env === 'production') {\n      if (organisationTag) {\n        this.url = this.httpType + organisationTag + '.' + host + '/' + this.locale + path + (params ? '?' + params : '');\n      } else {\n        this.url = this.httpType + host + '/' + this.locale + path + (params ? '?' + params : '');\n      }\n    } else {\n      if (organisationTag) {\n        this.url = this.httpType + host + '/' + this.locale + path + '?subdomains=' + organisationTag + (params ? '&' + params : '');\n      } else {\n        this.url = this.httpType + host + '/' + this.locale + path + (params ? '?' + params : '');\n      }\n    }\n    return this.url;\n  }\n}\n\n\n\nexport default new UrlService();","import superagentPromise from 'superagent-promise';\nimport _superagent from 'superagent';\nimport authStore from './stores/auth.store';\nimport commonStore from './stores/common.store';\nimport UrlService from './services/url.service';\n\nconst superagent = superagentPromise(_superagent, global.Promise);\nconst locale = ((process.env.NODE_ENV === 'production' || process.env.NODE_ENV === 'staging') ? (commonStore.getCookie('locale') || commonStore.locale) : 'en-UK');\nconst API_ROOT_AUTH = process.env.REACT_APP_API_ROOT_AUTH;\nconst API_ROOT = process.env.REACT_APP_API_ROOT + '/' + locale;\n\nconst handleErrors = err => {\n  if (err && err.response && err.response.status === 401) {\n    authStore.logout();\n    window.location.href = UrlService.createUrl(window.location.host, '/signin', null);\n  }\n  return err;\n};\n\nconst responseBody = res => res.body;\n\n/**\n * @description Set token to header\n */\nconst tokenPlugin = req => {\n  if (commonStore.getAccessToken() || commonStore.accessToken) {\n    req.set('Authorization', `Bearer ` + (commonStore.getAccessToken() || commonStore.accessToken));\n  }\n};\n\n/**\n * @description Create requests, will be used by all other actions in this file\n */\nconst requests = {\n  del: (url) => {\n    return validateToken()\n      .then(() =>\n        superagent\n          .del((process.env.NODE_ENV === 'development' ? 'http://' : 'https://') + `${url}`)\n          .timeout({\n            response: 30000,\n          })\n          .use(tokenPlugin)\n          .end(handleErrors)\n          .then(responseBody)\n      );\n  },\n\n  get: (url) => {\n    return validateToken()\n      .then(() =>\n        superagent\n          .get((process.env.NODE_ENV === 'development' ? 'http://' : 'https://') + `${url}`)\n          .timeout({\n            response: 30000,\n          })\n          .use(tokenPlugin)\n          .end(handleErrors)\n          .then(responseBody)\n      );\n  },\n\n  put: (url, body) => {\n    return validateToken()\n      .then(() =>\n        superagent\n          .put((process.env.NODE_ENV === 'development' ? 'http://' : 'https://') + `${url}`, body)\n          .timeout({\n            response: 30000,\n          })\n          .use(tokenPlugin)\n          .end(handleErrors)\n          .then(responseBody)\n      );\n  },\n\n  post: (url, body) => {\n    return validateToken()\n      .then(() =>\n        superagent\n          .post((process.env.NODE_ENV === 'development' ? 'http://' : 'https://') + `${url}`, body)\n          .timeout({\n            response: 30000,\n          })\n          .use(tokenPlugin)\n          .end(handleErrors)\n          .then(responseBody)\n      );\n  },\n};\n\n/**\n * @description Get new access token if the older one is expired\n */\nlet validateToken = () => {\n  if (commonStore.getRefreshToken() && !commonStore.getAccessToken()) {\n    return new Promise((resolve, reject) => {\n      superagent.post(\n        (process.env.NODE_ENV === 'development' ? 'http://' : 'https://') + `${API_ROOT_AUTH}/locale`,\n        {\n          client_id: 'frontflip',\n          client_secret: 'abcd1234',\n          grant_type: 'refresh_token',\n          refresh_token: commonStore.getRefreshToken()\n        }\n      )\n        .timeout({\n          response: 30000,\n        })\n        .end(handleErrors)\n        .then((response) => {\n          commonStore.setAuthTokens(JSON.parse(response.text));\n          resolve();\n        }).catch((err) => {\n          authStore.logout();\n          window.location.href = UrlService.createUrl(window.location.host, '/signin', null);\n        });\n    });\n  } else {\n    return Promise.resolve();\n  }\n};\n\n/**\n * @description Authentification actions\n *              We have 2 levels of register / login :\n *              - register to Wingzy (classic)\n *              - register to an Organisation of Wingzy\n *              1 User can have many Organisation\n */\nconst Auth = {\n  login: (email, password) =>\n    requests.post(\n      `${API_ROOT_AUTH}/locale`,\n      {\n        username: email,\n        password: password,\n        client_id: process.env.REACT_APP_CLIENT_ID,\n        client_secret: process.env.REACT_APP_CLIENT_SECRET,\n        grant_type: 'password'\n      }\n    ),\n  googleCallbackLogin: (token) =>\n    requests.post(\n      API_ROOT_AUTH + '/locale/exchange',\n      {\n        token: token,\n        client_id: process.env.REACT_APP_CLIENT_ID,\n        client_secret: process.env.REACT_APP_CLIENT_SECRET\n      }\n    ),\n  register: (email, password) =>\n    requests.post(\n      `${API_ROOT_AUTH}/register`,\n      {\n        email: email,\n        password: password\n      }\n    ),\n  registerToOrg: (orgId, invitationCode) =>\n    requests.post(\n      `${API_ROOT_AUTH}/register/organisation/` + orgId + `/` + (invitationCode ? invitationCode : '')\n    )\n};\n\nconst User = {\n  getCurrent: () =>\n    requests.get(\n      API_ROOT + '/api/users/current'\n    ),\n  welcomeUser: (userId, organisationId) =>\n    requests.put(\n      API_ROOT + '/api/users/welcome/'+ userId +'/organisation/' + organisationId\n    ),\n  update: (userId, user) =>\n    requests.put(\n      API_ROOT + '/api/users/' + userId,\n      {\n        user: user\n      }\n    )\n}\n\nconst Record = {\n  get: (recordId) =>\n    requests.get(\n      API_ROOT + '/api/profiles/' + recordId\n    ),\n  getByTag: (recordTag, orgId) =>\n    requests.get(\n      API_ROOT + '/api/profiles/tag/' + recordTag + '/organisation/' + orgId\n    ),\n  getByUser: (userId, orgId) =>\n    requests.get(\n      API_ROOT + '/api/profiles/user/' + userId + '/organisation/' + orgId\n    ),\n  post: (orgId, record) =>\n    requests.post(\n      API_ROOT + '/api/profiles/',\n      {\n        orgId: orgId,\n        record: record\n      }\n    ),\n  put: (orgId, recordId, record) =>\n    requests.put(\n      API_ROOT + '/api/profiles/' + recordId,\n      {\n        orgId: orgId,\n        record: record\n      }\n    ),\n  delete: (recordId) =>\n    requests.del(\n      API_ROOT + '/api/profiles/' + recordId\n    )\n\n};\n\nconst Organisation = {\n  getForPublic: (orgTag) =>\n    requests.get(\n      API_ROOT + '/api/organisations/' + orgTag + '/forpublic'\n    ),\n  getAlgoliaKey: (orgId, isPublic) =>\n    requests.get(\n      API_ROOT + '/api/organisations/' + orgId + '/algolia/' + (isPublic ? 'public' : 'private')\n    ),\n  get: (orgId) =>\n    requests.get(\n      API_ROOT + '/api/organisations/' + orgId\n    )\n}\n\n/**\n * @description Email API\n */\nconst Email = {\n  confirmLoginEmail: (orgTag) =>\n    requests.post(\n      API_ROOT + '/api/emails/confirmation/' + (orgTag ? orgTag : '')\n    ),\n  passwordForgot: (userEmail) =>\n    requests.post(\n      API_ROOT + '/api/emails/password',\n      {\n        userEmail: userEmail\n      }\n    ),\n  updatePassword: (token, hash, password) =>\n    requests.post(\n      API_ROOT_AUTH + '/password/reset/' + token + '/' + hash,\n      {\n        password: password\n      }\n    )\n}\n\n/**\n * @description Test get user with secure call to API\n */\nconst Test = {\n  getUser: () =>\n    requests.get('/test/secure')\n};\n\nexport default {\n  Auth,\n  Test,\n  Record,\n  Organisation,\n  User,\n  Email\n}","module.exports = __webpack_public_path__ + \"static/media/g.09aea0f5.svg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAYAAAA+VemSAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gMXDzY1ycUXtAAABRhJREFUeNrt3cFtGlEQBuCdHHEL0Ae+uRBcEG4jjeCT3YdpAY5+PrCSL4lklCXMvPd9FViz+zPzB4nExM211lrGvysiotgcV9M0nczw2y/xGlO18M5OnpwAgwADAqz/ck3/VUMEGP3XBgYEGBDgvL3tYAqLzHGthvzl7/B63PTFa148c7SBAQEGAUb/1X/T1BAdWG8zx8JztIHBCQ0IsP6L/qsD62367yhztIHBCQ0IcB/n894U9F8dWP/Vf83RBgYnNCDA+i8/nOPW+awD623zh3RENHPsM8A2cOeqhRcBBgFG/9V/c5/POrD+a47FA2wD6784oQEB1n/1X+ezDqy36b+jBNgG1n9xQgMCXPN83pmC/qsD679LeoiIszn2H2AbuM/+ezYFJzQgwPov9eZY5WeIdGD91xwLB9gG1n9xQgMCrLeZo/NZB9Z/zXGUANvA+i9OaECA65x9W1PQf3Vg/Vf/FWAbGP3XCQ0IsP6L/qsD623X2UTE0RwFGC+eOTqhAQHWf3udY7rf0a64fZ3Q+q85CrAAe/HM0QkNCPANt8baFPTfLk/o+eX+8HqCDQwIMAgwIMCAAAMCDAIMCDAgwCDAgAADAgwIMAgwIMCAAAMCDAIMCDAgwCDAgAADAgwIMAgwIMCAAIMAGwEIMCDAgACDAAMCDAgwIMDQlTCCaWqttXQPJiLMccw52sDghB5m+269BovM8WAKTmhn3/zBGhHNHJ3PNnDFT9Vi4UWAAQG++uzbeQW6rSE6sBdPbzNHGxgQYECAv8++g8ev/+rAXjz91xxtYECAQYCdz5ijAKO3maMAAwIMAqy3YY4CjP5rjgIMNjAgwHqbOSLAehvmKMAgwPCn89nFIMB62+y14Cg/xSZRdRBgvc0cbWBAgEm+fVemIMDOvouXgqM8iYwOLMD6r/5rAwPdB9j3lovN0X/DKsB3kfF7y+eCc3wTFx1Yb9N/9V8bGOg+wL63XGyO/htWJ7Szb/YYEe/m6IQWYL3NHJ3QgADn2xq+t1xmjntTcEI7+y42EXE0Rye0AOtt5ogODAKcb2v43nKZOR5MIfkJ7Td+4b9a9N9BnNDghAYEGBBgEGBAgAEBBgQYBBgQYECAQYABAQYEGBBgEGBAgAEBBgQYBBgQYECAQYABAQYEGBBgEGBAgAEBBgQYBBgQYECAQYABAQZuLCr+0a21lm6QEWGOY87RBoaLVyPoPMCttZ3HtsgcDwm375Mn0/kJnfHsm6bpISLO5uh8toErfgoWCy8CDAiw/qv/Op+H6cD6r/6LE1r/RYABAb7m7Nt6XPovRTtw0v67iYij/ivAAuzFM0d0YBBg/bfX/ru3fZ3Qzj79V4AF2ItnjgKsA4MA67/6r+3rhNZ/zVGABdiLZ47owCDAd94aa49I/6XoCa3/Op8RYP3XHJ3QgADrv/qv7TvCCZ20/z5GxLvzWYAF2ItnjujAIMD6b6/9N93vaNu+A5zQ+q/zGQHWf83RCQ0IsP6r/9q+I5zQ+q/zGQHWf83RCQ0I8DVbY+WR6L/U3cCnhDN6Lvhcf3u1dWC9Tf+1gW1goPsA67+LzTHd72jbvmNsYP13GW9eax1Yb9N/bWAbGOg+wPqv/kvtDaz/6r9U7cB6mzmiA4MA32Fr+ITWfym8gT/1X/2Xoh1YbzNHdGAQYP23bP9N9ztitu8YGzhj/30p+Bw/vMo6sN6m/9rANjDQfYD1X/2X2htY/9V/qdqB9TZz5N99AbWj7JsZ3ObQAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/chat.28c98f63.png\";","module.exports = __webpack_public_path__ + \"static/media/colleagues.204f9a60.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE4AAABZCAIAAAAfG4VpAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wMZDhIfydfxZQAAA5RJREFUeNrt3F1MU2cYwPH/abG0UMoBViYgA0KcVTeETseMRl02PzKyr5uh0RCNF5txWcwuhmbLkiVG3ca+4i7Ikm3JsmwXJmYmSiQS2RQ2ZCEbIwZRC6JRQGphME7p59mNXMwZLbQltDzP5TnP+578ct7z5nnPl6LrOvMjDMybmEfUlNk8mFvjkxbcGsUq725IXqp7gqNt1F8gGCYjlWwLeyqTkerW+PYPvmxjdBJgIsDBZlQL1U9gMCTRterRONbFpy14tLtbdJ2BcfY30nCZQDhZqCNefuqm7jyD4//ZrsP1UWobaXYRCCU+dcxH4xXqWugbxWRkkW3qqArFKsClYQ6c4febs6GNI3XCT5OLD8/RM8wCA+V5HFh/d5clhboXyLehw5+3qD1N52DctfGiegM09/LxebqGMCgsz+W9Z1lTNDUZGtmymCObyLagQ9sN3m/i4u34auNC9QVp6eeLX+m4CToOO++s57lSUqfmewXSTby6jA+eJ8tCSOdsL4d+psdNMJw41GCY367zeSut/YTCPP4Ib6+laglpC+7NtKayfQW161DN+EM0XOajc7g8hPREoIZ1LtzgaBu/9DEZojSHNyp5eSkZpvvnq2Z2OtlTiWpG83Oim89acd0hrM9talin4xb17TRdZSJASRa7n+K1J8m2PKhVbjqvr2KnE5uZMR/Huqhvp2+EmK+4YkbVdboG+aqdhh7GfBSp1FSwo5yF1oe3fUxl7zNsK0M14/HyQydfd9A/GmNt7M6qwsA4F4fweCmwUV1GTQUFtkhbl2bz5mpeXEpmKkP/0DmAx4uizMkaWAGHnaolpBgpz2OXk5Ks6fWwPJe3VqP5uaPxkoNFmXO43C/OosbJ04U8asVhn0kPKwvYtwZ/kBV55KTN7ZVNYSaF0Z2NtUVyF0KoQhXqPIkHzcCneoimXMnPwJkfafLZXrRAVBKriQ0lM6W+8n1US6qtZfxYHWny7uNcG4mK6rDTvU8GcOQlhDMfk3HaXS/OmUZyRV5EC4P/x9+TdA/HjnpiR+wr0nvi+PYZNmxysfEbmYGFKlShClWoQhWqUIUqVKEKVahCFapQhSpUoQpVqLP7Qrs9ncObAczGZKfmpLF/nQxgoQpVqEIVqlCFKlShClWoQhWqUIUqVKEKVahCFapQhRphRPQgo+q7mXyRMTsx5osp9a9BGcBJM4BP1pBAv4izmh6SoMgf74SayPEvY8QJ961F2JoAAAAASUVORK5CYII=\"","import { observable, action, decorate } from 'mobx';\nimport agent from '../agent';\nimport recordStore from './record.store';\nimport organisationStore from './organisation.store';\n\nclass UserStore {\n\n  inProgress = false;\n  errors = null;\n  values = {\n    currentUser: {}\n  };\n\n  setCurrentUser(user) {\n    this.values.currentUser = user;\n  }\n\n  getCurrentUser() {\n    this.inProgress = true;\n    this.errors = null;\n\n    return agent.User.getCurrent()\n      .then(data => {\n        this.values.currentUser = (data ? data.user : {});\n        this.syncRecord();\n        return this.values.currentUser;\n      })\n      .catch(action((err) => {\n        this.errors = err.response && err.response.body && err.response.body.errors;\n        throw err;\n      }))\n      .finally(action(() => { this.inProgress = false; }));\n  }\n\n  welcomeCurrentUser(orgId) {\n    this.inProgress = true;\n    this.errors = null;\n\n    return agent.User.welcomeUser(this.values.currentUser._id, orgId)\n      .then(data => {\n        this.values.currentUser = (data ? data.user : {});\n        this.syncRecord();\n        return this.values.currentUser;\n      })\n      .catch(action((err) => {\n        this.errors = err.response && err.response.body && err.response.body.errors;\n        throw err;\n      }))\n      .finally(action(() => { this.inProgress = false; }));\n  }\n\n  syncRecord() {\n    if (!recordStore.values.record._id && organisationStore.values.organisation._id) {\n      let currentOrgAndRecord = this.values.currentUser.orgsAndRecords.find(orgAndRecord => orgAndRecord.organisation === organisationStore.values.organisation._id);\n      if (currentOrgAndRecord) {\n        recordStore.setRecordId(currentOrgAndRecord.record);\n        recordStore.getRecord();\n      }\n    }\n  }\n\n  forgetUser() {\n    this.currentUser = undefined;\n  }\n\n}\ndecorate(UserStore, {\n  inProgress: observable,\n  errors: observable,\n  values: observable,\n  getCurrentUser: action,\n  updateUser: action,\n  forgetUser: action\n});\n\nexport default new UserStore();","import React from 'react';\nimport { Button, withStyles } from '@material-ui/core';\nimport googleLogo from '../../../resources/images/g.svg';\nimport { FormattedMessage } from 'react-intl';\n\nconst styles = theme => ({\n  root: {\n    '&:not(:hover)': {\n      backgroundColor: \"white\"\n    },\n    '&:hover': {\n      backgroundColor: '#d5d5d5',\n      color: 'black',\n    }\n  }\n});\n\nconst GoogleButton = ({ id, ...props }) =>\n  <Button {...props} className={props.classes.root}>\n    <img src={googleLogo} style={{ width: '25px', height: '25px', position: 'absolute', left: '13px' }} alt=\"google\" />\n    <FormattedMessage id={id} />\n  </Button>;\n\nexport default withStyles(styles)(GoogleButton);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport InfoIcon from '@material-ui/icons/Info';\nimport green from '@material-ui/core/colors/green';\nimport amber from '@material-ui/core/colors/amber';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst variantIcon = {\n  success: CheckCircleIcon,\n  warning: WarningIcon,\n  error: ErrorIcon,\n  info: InfoIcon,\n};\n\nconst styles = theme => ({\n  success: {\n    backgroundColor: green[600],\n  },\n  error: {\n    backgroundColor: theme.palette.error.dark,\n  },\n  info: {\n    backgroundColor: theme.palette.primary.dark,\n  },\n  warning: {\n    backgroundColor: amber[700],\n  },\n  icon: {\n    fontSize: 20,\n  },\n  iconVariant: {\n    opacity: 0.9,\n    marginRight: theme.spacing.unit,\n  },\n  message: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n  verticalCenter: {\n    position: 'relative',\n    left: 0,\n    right: 0,\n    margin: 'auto'\n  },\n  root: {\n    maxWidth: 604,\n  }\n});\n\nclass SnackbarCustom extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: true\n    };\n  }\n\n  render() {\n    const { classes, className, onClose, variant, message, ...other } = this.props;\n    const Icon = variantIcon[variant];\n    const { open } = this.state;\n\n    return (\n      (open &&\n        <SnackbarContent\n          className={classNames(classes[variant], className, classes['verticalCenter'], classes.root)}\n          aria-describedby=\"client-snackbar\"\n          message={\n            <span id=\"client-snackbar\" className={classes.message}>\n              <Icon className={classNames(classes.icon, classes.iconVariant)} />\n              <span dangerouslySetInnerHTML={{ __html: message }}></span>\n            </span>\n          }\n          {...other}\n        />\n      )\n\n    );\n  }\n}\n\nSnackbarCustom.propTypes = {\n  classes: PropTypes.object.isRequired,\n  className: PropTypes.string,\n  message: PropTypes.node,\n  onClose: PropTypes.func,\n  variant: PropTypes.oneOf(['success', 'warning', 'error', 'info']).isRequired,\n};\n\nexport default withStyles(styles)(SnackbarCustom);\n","import React from 'react';\nimport {FormattedMessage, injectIntl} from 'react-intl';\nimport {Link, Redirect} from 'react-router-dom';\nimport {inject, observer} from 'mobx-react';\n\nimport {Button, CircularProgress, Grid, TextField, Typography} from '@material-ui/core';\nimport GoogleButton from \"../../utils/buttons/GoogleButton\";\nimport SnackbarCustom from '../../utils/snackbars/SnackbarCustom';\nimport ReactGA from 'react-ga';\nReactGA.initialize(process.env.REACT_APP_GOOGLE_ANALYTICS_ID);\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: 0,\n      redirectTo: null,\n      loginErrors: null,\n      locale: this.props.commonStore.getCookie('locale') || this.props.commonStore.locale,\n      isAuth: this.props.authStore.isAuth()\n    };\n  }\n\n  handleEmailChange = (e) => {\n    this.props.authStore.setEmail(e.target.value);\n  };\n\n  handlePasswordChange = (e) => {\n    this.props.authStore.setPassword(e.target.value)\n  };\n\n  handleSubmitForm = (e) => {\n    e.preventDefault();\n    this.props.authStore.login()\n      .then((response) => {\n        if (response === 200) {\n          ReactGA.event({category: 'User',action: 'Login with password'});\n          this.setState({ redirectTo: '/' + this.state.locale + (this.props.organisationStore.values.orgTag ? '/' + this.props.organisationStore.values.orgTag : '') });\n        } else {\n          this.setState({ loginErrors: this.props.intl.formatMessage({ id: 'signin.error.generic' }) });\n        }\n      }).catch((err) => {\n        // Err can have 3 forms : User has no password. || Wrong password. || User does not exists.\n        let errorMessage;\n        if (err.status === 404) {\n          errorMessage = this.props.intl.formatMessage({ id: 'signin.error.unknown' });\n        } else if (err.status === 403) {\n          if (err.response.body.error_description === 'Wrong password.') {\n            errorMessage = this.props.intl.formatMessage({ id: 'signin.error.wrongPassword' }, { forgotPasswordLink: '/' + this.state.locale + '/password/forgot' });\n          } else if (err.response.body.error_description === 'User use Google Auth.') {\n            errorMessage = this.props.intl.formatMessage({ id: 'signin.error.useGoogle' });\n          } else {\n            errorMessage = this.props.intl.formatMessage({ id: 'signin.error.noPassword' }, { forgotPasswordLink: '/' + this.state.locale + '/password/forgot' });\n          }\n        }\n        if (!errorMessage) errorMessage = this.props.intl.formatMessage({ id: 'signin.error.generic' });\n        this.setState({ loginErrors: errorMessage });\n      });\n  };\n\n  render() {\n    const { values, inProgress } = this.props.authStore;\n    const { orgTag } = this.props.organisationStore.values;\n    let { loginErrors, locale, redirectTo, isAuth } = this.state;\n    let intl = this.props.intl;\n\n    if (redirectTo) return <Redirect push to={redirectTo} />;\n    else if (isAuth) return <Redirect push to={'/' + locale + (orgTag ? '/' + orgTag : '')} />;\n    else {\n      return (\n        <form onSubmit={this.handleSubmitForm}>\n          <Grid container item direction='column' spacing={16}>\n            {loginErrors && (\n              <Grid item>\n                <SnackbarCustom variant=\"warning\" message={loginErrors} />\n              </Grid>\n            )}\n            <Grid item>\n              <GoogleButton fullWidth={true} onClick={this.props.handleGoogleAuth} id={\"Sign in with Google\"} />\n            </Grid>\n            <Grid item>\n              <Typography style={{\n                fontSize: '1rem',\n                color: '#7c7c7c',\n                textAlign: 'center'\n              }}><FormattedMessage id=\"or\" /></Typography>\n            </Grid>\n            <Grid item>\n              <TextField\n                label=\"Email\"\n                type=\"email\"\n                autoComplete=\"email\"\n                fullWidth\n                variant={\"outlined\"}\n                value={values.email}\n                onChange={this.handleEmailChange}\n                required\n              />\n            </Grid>\n            <Grid item>\n              <TextField\n                label={intl.formatMessage({ id: 'Password' })}\n                type=\"password\"\n                autoComplete=\"current-password\"\n                fullWidth\n                variant={\"outlined\"}\n                value={values.password}\n                onChange={this.handlePasswordChange}\n                required\n              />\n            </Grid>\n            <Grid item container justify={'center'}>\n              {\n                inProgress && (\n                  <CircularProgress color=\"secondary\" />\n                )\n              }\n              {\n                !inProgress && (\n                  <Button fullWidth={true} color=\"secondary\" type=\"submit\"><FormattedMessage id=\"Sign In\" /></Button>\n                )\n              }\n            </Grid>\n            <Grid item>\n              <Button component={Link}\n                      to={\"/\" + locale + ((orgTag) ? '/' + orgTag : '') + \"/password/forgot\"}\n                      variant=\"text\"\n                      fullWidth={true}\n              >\n                <FormattedMessage id=\"I don't have my password\" />\n              </Button>\n            </Grid>\n          </Grid>\n        </form>\n      )\n    }\n  };\n}\n\nexport default inject('authStore', 'userStore', 'organisationStore', 'commonStore')(\n  injectIntl(observer(\n    (Login)\n  ))\n);\n","import React from 'react';\nimport {FormattedMessage, injectIntl} from 'react-intl';\nimport {inject, observer} from 'mobx-react';\n\nimport {Button, CircularProgress, Grid, TextField, Typography} from \"@material-ui/core\";\nimport GoogleButton from \"../../utils/buttons/GoogleButton\";\nimport SnackbarCustom from '../../utils/snackbars/SnackbarCustom';\nimport commonStore from '../../../stores/common.store';\nimport ReactGA from 'react-ga';\nReactGA.initialize(process.env.REACT_APP_GOOGLE_ANALYTICS_ID);\n\nclass Register extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: 0,\n      registerErrors: null,\n      registerSuccess: false,\n      registerSuccessMessage: '',\n      locale: commonStore.locale || commonStore.getCookie('locale')\n    };\n  }\n\n  handleEmailChange = (e) => {\n    this.props.authStore.setEmail(e.target.value);\n  };\n\n  handlePasswordChange = (e) => {\n    this.props.authStore.setPassword(e.target.value)\n  };\n\n  handleSubmitForm = (e) => {\n    e.preventDefault();\n    this.props.authStore.register()\n      .then(() => {\n        ReactGA.event({category: 'User',action: 'Register with password'});\n        if (this.props.organisationStore.values.orgTag) {\n          this.props.authStore.registerToOrg()\n            .then(() => {\n              ReactGA.event({category: 'User',action: 'Register to Organisation'});\n              this.setState({ registerSuccess: true });\n              this.setState({ registerSuccessMessage: this.props.intl.formatMessage({ id: 'signup.success' }) });\n            }).catch((err) => {\n              this.setState({ registerSuccess: true });\n              this.setState({ registerSuccessMessage: this.props.intl.formatMessage({ id: 'signup.warning.forbiddenOrg' }, { orgName: this.props.organisationStore.values.organisation.name }) });\n            });\n        } else {\n          this.setState({ registerSuccessMessage: this.props.intl.formatMessage({ id: 'signup.success' }) });\n          this.setState({ registerSuccess: true });\n        }\n      }).catch((err) => {\n        let errorMessage;\n        if (err.status === 422) {\n          err.response.body.errors.forEach(error => {\n            if (error.param === 'password') {\n              if (error.type === 'dumb') {\n                // (frequency over 100 000 passwords, 3 000 000 000 people use internet, 30 000 = 3 000 000 000 / 100 000)\n                errorMessage = (errorMessage ? errorMessage + '<br/>' : '') + this.props.intl.formatMessage({ id: 'signup.error.dumbPassword' }, { dumbCount: (parseInt(error.msg) * 30000).toLocaleString() });\n              } else {\n                errorMessage = (errorMessage ? errorMessage + '<br/>' : '') + this.props.intl.formatMessage({ id: 'signup.error.shortPassword' });\n              }\n            } else if (error.param === 'email') {\n              errorMessage = (errorMessage ? errorMessage + '<br/>' : '') + this.props.intl.formatMessage({ id: 'signup.error.wrongEmail' });\n            }\n          });\n        } else if (err.status === 400 && err.response.body.message === 'User already exists.') {\n          errorMessage = this.props.intl.formatMessage({ id: 'signup.error.userExists' }, { forgotPasswordLink: '/' + this.state.locale + '/password/forgot' });\n        }\n        if (!errorMessage) errorMessage = this.props.intl.formatMessage({ id: 'signup.error.generic' });\n        this.setState({ registerErrors: errorMessage });\n      });\n  };\n\n  render() {\n    const { values, inProgress } = this.props.authStore;\n    let { registerErrors, registerSuccess, registerSuccessMessage } = this.state;\n    let intl = this.props.intl;\n\n    if (registerSuccess) {\n      return (\n        <Grid container item direction='column' spacing={16}>\n          <Grid item>\n            <SnackbarCustom variant=\"success\" message={registerSuccessMessage} />\n          </Grid>\n        </Grid>\n      )\n    } else {\n      return (\n        <form onSubmit={this.handleSubmitForm}>\n          <Grid container item direction='column' spacing={16}>\n            {registerErrors && (\n              <Grid item>\n                <SnackbarCustom variant=\"warning\" message={registerErrors} />\n              </Grid>\n            )}\n            <Grid item>\n              <GoogleButton fullWidth={true} onClick={this.props.handleGoogleAuth} id={\"Sign up with Google\"}/>\n            </Grid>\n            <Grid item>\n              <Typography style={{\n                fontSize: '1rem',\n                color: '#7c7c7c',\n                textAlign: 'center'\n              }}><FormattedMessage id=\"or\" /></Typography>\n            </Grid>\n            <Grid item>\n              <TextField\n                label=\"Email\"\n                type=\"email\"\n                autoComplete=\"email\"\n                variant={\"outlined\"}\n                fullWidth\n                value={values.email}\n                onChange={this.handleEmailChange}\n                required\n              />\n            </Grid>\n            <Grid item>\n              <TextField\n                label={intl.formatMessage({ id: 'Password' })}\n                type=\"password\"\n                autoComplete=\"current-password\"\n                variant={\"outlined\"}\n                fullWidth\n                value={values.password}\n                onChange={this.handlePasswordChange}\n                required\n              />\n            </Grid>\n            <Grid item container justify={'center'}>\n              {\n                inProgress && (\n                  <CircularProgress color=\"secondary\" />\n                )\n              }\n              {\n                !inProgress && (\n                  <Button fullWidth={true} type=\"submit\" color=\"secondary\"><FormattedMessage id=\"Sign Up\"/></Button>\n                )\n              }\n            </Grid>\n          </Grid>\n        </form>\n      )\n    }\n  };\n}\n\nexport default inject('authStore', 'userStore', 'organisationStore', 'commonStore')(\n  injectIntl(observer(\n    Register\n  ))\n);\n","import React from 'react';\nimport {injectIntl} from 'react-intl';\nimport {Redirect} from 'react-router-dom';\nimport {observe} from 'mobx';\nimport {inject, observer} from 'mobx-react';\n\nimport {Grid, Tab, Tabs} from '@material-ui/core';\nimport {withTheme, withStyles} from '@material-ui/core/styles';\nimport SwipeableViews from 'react-swipeable-views';\nimport Login from './login/Login';\nimport Register from './register/Register';\nimport UrlService from '../../services/url.service';\nimport ReactGA from 'react-ga';\nReactGA.initialize(process.env.REACT_APP_GOOGLE_ANALYTICS_ID);\n\nconst queryString = require('query-string');\n\nconst styles = (theme) => ({\n  tabs: {\n    marginTop: -8,\n    [theme.breakpoints.down('xs')]: {\n      padding: '8px 0 8px 0!important',\n    }\n  },\n  leftTabs: {\n    paddingLeft: 8,\n    textAlign: 'left',\n    [theme.breakpoints.down('xs')]: {\n      paddingLeft: 16,\n    },\n  },\n  rightTabs: {\n    paddingRight: 8,\n    textAlign: 'right',\n    [theme.breakpoints.down('xs')]: {\n      paddingRight: 16,\n    },\n  }\n});\n\nclass Auth extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: this.props.initialTab,\n      queryParams: queryString.parse(window.location.search),\n      displayLoader: false,\n      redirectTo: null,\n      locale: this.props.commonStore.getCookie('locale') || this.props.commonStore.locale,\n      observer: ()=> {}\n    };\n  };\n  \n  componentDidMount() {\n    ReactGA.pageview(window.location.pathname);\n    if (this.props.authStore.values.invitationCode) this.setState({ value: 1 });\n    this.setState({observer: observe(this.props.authStore.values, 'invitationCode', (change) => {\n      this.setState({ value: 1 });\n    })});\n\n    // HANDLE GOOGLE AUTH CALLBACK\n    this.handleGoogleCallback(this.state.queryParams)\n    .then(() => {\n      let googleState = (this.state.queryParams.state ? JSON.parse(this.state.queryParams.state) : null);\n      this.props.userStore.getCurrentUser()\n        .then((user) => {\n          ReactGA.event({category: 'User',action: 'Login with Google'});\n          if (googleState && googleState.invitationCode) this.props.authStore.setInvitationCode(googleState.invitationCode);\n          if(user.superadmin){\n            this.setState({redirectTo: '/' + this.state.locale + (this.props.organisationStore.values.organisation.tag ? '/'+this.props.organisationStore.values.organisation.tag : '')});\n            return;\n          }\n          this.props.authStore.registerToOrg()\n          .then((data) => {\n            let organisation = data.organisation;\n            let currentOrgAndRecord = this.props.userStore.values.currentUser.orgsAndRecords.find(orgAndRecord => orgAndRecord.organisation === organisation._id);\n            if (currentOrgAndRecord) this.props.recordStore.setRecordId(currentOrgAndRecord.record);\n            this.props.recordStore.getRecord()\n              .then(() => this.setState({ redirectTo: '/' + this.state.locale + '/' + this.props.organisationStore.values.organisation.tag }))\n              .catch(() => window.location.href = UrlService.createUrl(process.env.REACT_APP_HOST_BACKFLIP, '/onboard/welcome', organisation.tag));\n          }).catch((err) => this.setState({redirectTo: '/' + this.state.locale + '/' + this.props.organisationStore.values.organisation.tag}));\n        }).catch((err) => this.setState({redirectTo: '/' + this.state.locale}));\n    }).catch((err) => {return;});\n\n  }\n\n  componentWillUnmount() {\n    this.state.observer();\n  }\n\n  handleGoogleCallback = async (query) => {\n    if(!query || !query.token) return Promise.reject('No token');\n    this.props.authStore.setTemporaryToken(query.token);\n    return this.props.authStore.googleCallbackLogin();\n  }\n\n  handleChange = (event, value) => {\n    this.setState({ value });\n  };\n\n  handleChangeIndex = index => {\n    this.setState({ value: index });\n  };\n\n  handleGoogleAuth = () => {\n    let state = {};\n    if (this.props.organisationStore.values.orgTag) state.orgTag = this.props.organisationStore.values.orgTag\n    if (this.props.organisationStore.values.organisation.tag) state.orgTag = this.props.organisationStore.values.organisation.tag;\n    if (this.props.authStore.values.invitationCode) state.invitationCode = this.props.authStore.values.invitationCode;\n    window.location.href = (process.env.NODE_ENV === 'development' ? 'http://' : 'https://') + \n                            process.env.REACT_APP_API_ROOT_AUTH + \n                            '/google?state=' + JSON.stringify(state);\n  }\n\n  render() {\n    const {classes, theme} = this.props;\n    const {redirectTo} = this.state;\n    let intl = this.props.intl;\n    if (redirectTo) return (<Redirect push to={redirectTo} />);\n\n    return (\n      <Grid container spacing={16}>\n        <Grid item xs={12} className={classes.tabs}>\n          <Tabs\n            value={this.state.value}\n            onChange={this.handleChange}\n            indicatorColor=\"secondary\"\n            textColor=\"secondary\"\n            variant=\"fullWidth\"\n          >\n            <Tab label={intl.formatMessage({id: 'Sign In'})} className={classes.leftTabs}/>\n            <Tab label={intl.formatMessage({id: 'Sign Up'})} className={classes.rightTabs}/>\n          </Tabs>\n        </Grid>\n        <Grid item xs={12}>\n          <SwipeableViews\n            axis={theme.direction === 'rtl' ? 'x-reverse' : 'x'}\n            index={this.state.value}\n            onChangeIndex={this.handleChangeIndex}\n          >\n            <Login handleGoogleAuth={this.handleGoogleAuth} />\n            <Register handleGoogleAuth={this.handleGoogleAuth} />\n          </SwipeableViews>\n        </Grid>\n      </Grid>\n    );\n  }\n}\n\nexport default inject('authStore', 'organisationStore', 'commonStore', 'userStore', 'recordStore')(\n  withTheme()(\n    withStyles(styles, {withTheme: true})(\n      injectIntl(observer((Auth)))\n    )\n  )\n);\n","import React from 'react';\nimport { observe } from 'mobx';\nimport { inject, observer } from \"mobx-react\";\nimport defaultBanner from '../../../resources/images/fly_away.jpg';\nimport { withStyles } from '@material-ui/core';\n\nconst styles = theme => ({\n  root: {\n    width: '100%',\n    height: 222,\n    [theme.breakpoints.up('md')]: {\n      height: 416,\n    },\n  },\n  rootBanner: {\n    position: 'absolute',\n    width: '100%',\n    height: 222,\n    boxShadow: 'rgba(0, 0, 0, 0.2) 0px 1px 8px 0px, rgba(0, 0, 0, 0.14) 0px 3px 4px 0px, rgba(0, 0, 0, 0.12) 0px 3px 3px -2px',\n    backgroundColor: 'white',\n    backgroundSize: 'cover',\n    backgroundPosition: 'center center',\n    backgroundRepeat: 'no-repeat',\n    [theme.breakpoints.up('md')]: {\n      height: 416,\n    },\n  }\n});\n\nclass Banner extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      type: this.props.type || 'organisation',\n      source: null,\n      observer: ()=>{}\n    }\n  }\n\n  componentDidMount() {\n    if (this.state.type === 'organisation') {\n      this.setState({\n        source:\n          ((this.props.organisationStore.values.organisation.cover && this.props.organisationStore.values.organisation.cover.url) ?\n            this.props.organisationStore.values.organisation.cover.url : defaultBanner)\n      });\n\n      this.setState({observer: observe(this.props.organisationStore.values, 'organisation', (change) => {\n        let org = this.props.organisationStore.values.organisation;\n        this.setState({ source: (org.cover && org.cover.url ? org.cover.url : defaultBanner) });\n      })});\n    }\n  }\n\n  componentWillUnmount() {\n    this.state.observer();\n  }\n\n  render() {\n    const { source } = this.state;\n\n    return (\n      <div className={this.props.classes.root} >\n        <div style={{ backgroundImage: `url(${this.props.source || source})`, ...this.props.style }} className={this.props.classes.rootBanner}>\n        </div>\n        {this.props.children}\n      </div>\n    )\n  }\n}\n\nexport default inject('organisationStore')(\n  observer(\n    withStyles(styles, { withTheme: true })(Banner)\n  )\n);","const drawerWidth = 300;\n\nexport const styles = theme => ({\n  root: {\n    display: 'flex',\n    width: '100%',\n    textAlign: 'center',\n    position: 'absolute',\n  },\n  menuLink: {\n    minWidth: '130px',\n    height: '30px',\n    marginRight: 8,\n    color: theme.palette.secondary.main,\n    backgroundColor: 'white',\n    boxShadow:'0px 3px 5px -1px rgba(0,0,0,0.2), 0px 6px 10px 0px rgba(0,0,0,0.14), 0px 1px 18px 0px rgba(0,0,0,0.12)',\n    '&:hover': {\n      color: theme.palette.secondary.main,\n      backgroundColor: '#d5d5d5',\n    }\n  },\n  title: {\n    lineHeight: '50%',\n    [theme.breakpoints.down('sm')] : {\n      display : 'none'\n    }\n  },\n  sectionDesktop: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: 'flex',\n    },\n  },\n  sectionMobile: {\n    display: 'flex',\n    [theme.breakpoints.up('md')]: {\n      display: 'none',\n    },\n  },\n  appBar: {\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    background: 'transparent',\n    boxShadow: 'none',\n    zIndex: '999'\n  },\n  appBarShift: {\n    width: '100%',\n    marginLeft: 0,\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  hide: {\n    display: 'none',\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n  },\n  drawerPaper: {\n    backgroundColor: theme.palette.primary.dark,\n    width: drawerWidth,\n    padding: '0 !important',\n  },\n  drawerHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-end',\n  },\n  drawerIconButton: {\n    padding: 0,\n    background: 'white',\n    margin: '8px 16px',\n    opacity: 0.7,\n    '&:hover': {\n      backgroundColor: 'white',\n      opacity: 1,\n    }\n  },\n  drawerIcon: {\n    color: theme.palette.secondary.main,\n    fontSize: 40,\n  },\n  content: {\n    flexGrow: 1,\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    marginLeft: -300,\n    padding: 0,\n  },\n  contentShift: {\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  fixToRight: {\n    position: 'absolute',\n    right: 0\n  },\n  leftSubmenuLogo: {\n    height: 30,\n    width: 30,\n    position: 'relative',\n    top: '50%',\n    transform: 'translateY(-50%)'\n  },\n  toolbar: {\n    padding: 0\n  },\n  divider: {\n    backgroundColor: 'rgba(255,255,255,.12)',\n    margin: '8px 0',\n  },\n  menuButton: {\n    padding: 0,\n    cursor: 'pointer',\n    height: 48,\n    width: 48,\n    backgroundColor: 'white',\n    '&:hover': {\n      backgroundColor: 'white',\n    }\n  },\n  logoBorder: {\n    backgroundCOlor: 'white',\n    border: '2px solid white',\n  }\n});\n","import { withStyles, Button} from \"@material-ui/core\";\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { styles } from './Header.css.js';\nimport './header.css';\nimport { FormattedMessage } from 'react-intl';\nimport { inject, observer } from \"mobx-react\";\nimport { Link } from 'react-router-dom';\n\nclass HeaderLinks extends Component {\n  render() {\n    const { auth, classes} = this.props;\n    const { locale } = this.props.commonStore;\n    const orgTag = this.props.organisationStore.values.orgTag || this.props.organisationStore.values.organisation.tag;\n    \n    return (\n      <div className={classes.fixToRight}>\n        <div className={classes.grow} />\n        <div className={classes.sectionDesktop}>\n          {!auth && (\n            <Button variant=\"text\" to={\"/\" + locale + (orgTag ? '/' + orgTag : '') + '/signin'} component={Link} className={classes.menuLink}><FormattedMessage id=\"Sign In\" /></Button>\n          )}\n        </div>\n      </div>\n\n    )\n  }\n}\n\nHeaderLinks.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default inject('commonStore', 'organisationStore')(\n  observer(\n    withStyles(styles, { withTheme: true })(\n      HeaderLinks\n    )\n  )\n);\n","import React from 'react';\nimport { Avatar } from '@material-ui/core';\nimport { observe } from 'mobx';\nimport { inject, observer } from \"mobx-react\";\nconst defaultLogo = 'https://pbs.twimg.com/profile_images/981455890342694912/fXaclV2Y_400x400.jpg';\n\nclass Logo extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      type: this.props.type || 'organisation',\n      source: null,\n      observer: ()=>{},\n    }\n  }\n\n  componentDidMount() {\n    if (this.state.type === 'organisation') {\n      this.setState({\n        source:\n          ((this.props.organisationStore.values.organisation.logo && this.props.organisationStore.values.organisation.logo.url) ?\n            this.props.organisationStore.values.organisation.logo.url : defaultLogo)\n      });\n\n      this.setState({observer: observe(this.props.organisationStore.values, 'organisation', (change) => {\n        let org = this.props.organisationStore.values.organisation;\n        this.setState({ source: (org.logo && org.logo.url ? org.logo.url : defaultLogo) });\n      })});\n    }\n  }\n\n  componentWillUnmount() {\n    this.state.observer();\n  }\n\n  render() {\n    const { source } = this.state;\n\n    return (\n      <Avatar src={source || this.props.src} alt=\"org-logo\" className={this.props.className} style={{backgroundColor:'white'}}/>\n    )\n  }\n}\n\nexport default inject('organisationStore')(\n  observer(\n    Logo\n  )\n);\n","import React, { Component } from 'react';\nimport { withStyles, Fab } from \"@material-ui/core\";\nimport { inject, observer } from \"mobx-react\";\nimport PropTypes from 'prop-types';\nimport { Toolbar } from '@material-ui/core';\nimport './header.css';\nimport { styles } from './Header.css.js'\nimport HeaderLinks from './HeaderLinks';\nimport Logo from '../utils/logo/Logo';\n\nclass HeaderToolBar extends Component {\n  render() {\n    const { classes, auth } = this.props;\n\n    return (\n      <Toolbar className={classes.toolbar}>\n        <Fab variant=\"extended\" className={classes.menuButton}\n                    onClick={this.props.handleDrawerOpen} \n                    children={<Logo />} />\n\n        {!auth && (\n          <HeaderLinks auth={auth}/>\n        )}\n      </Toolbar>\n    )\n  }\n}\n\nHeaderToolBar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default inject('authStore', 'organisationStore')(\n  observer(\n    withStyles(styles, { withTheme: true })(\n      HeaderToolBar\n    )\n  )\n);\n","import React, { Component } from 'react';\nimport { withStyles } from \"@material-ui/core\";\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { AppBar } from '@material-ui/core';\nimport './header.css';\nimport { styles } from './Header.css.js'\nimport HeaderToolBar from './HeaderToolBar';\n\nclass HeaderAppBar extends Component {\n  render() {\n    const { classes, open, auth} = this.props;\n\n    return (\n      <AppBar\n        position=\"fixed\"\n        color=\"default\"\n        className={classNames(classes.appBar, {\n          [classes.appBarShift]: open,\n        })}\n      >\n        <HeaderToolBar handleDrawerOpen={this.props.handleDrawerOpen}\n          open={open} auth={auth}\n        />\n      </AppBar>\n    )\n  }\n}\n\nHeaderAppBar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default\n  withStyles(styles, { withTheme: true })(\n    HeaderAppBar\n  );\n","import React from 'react';\nimport { inject, observer } from 'mobx-react';\nimport './Toggle.css';\nimport { observe } from 'mobx';\n\nlet AvailabilityToggle = inject(\"recordStore\")(observer(class AvailabilityToggle extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      current: 'unspecified',\n      labels: {\n        left: 'unavailable',\n        middle: 'unspecified',\n        right: 'available'\n      },\n      observer: ()=> {}\n    }\n  }\n\n  componentDidMount() {\n    if (this.props.recordStore.values.record && this.props.recordStore.values.record.personAvailability) \n      this.setState({ current: this.props.recordStore.values.record.personAvailability });\n    else this.setState({ current: this.state.labels.middle });\n      this.setState({observer : observe(this.props.recordStore.values, 'record', (change) => {\n        this.setState({ current: change.newValue.personAvailability || 'unspecified' });\n      })});\n  }\n\n  componentWillUnmount() {\n    this.state.observer();\n  }\n\n  handleAvailabilityClick(newCurrent) {\n    this.setState({ current: newCurrent });\n    if(this.props.recordStore.values.record) {\n      this.props.recordStore.values.record.personAvailability = newCurrent;\n      this.props.recordStore.updateRecord();\n    }\n  }\n\n  render() {\n    let { labels } = this.state;\n    let { current } = this.state;\n\n    return (\n      <div id=\"userStatusToggle\" className={`menu-status-${current}`}>\n        {/* eslint-disable-next-line */}\n        <a title={labels.left} className=\"u\" onClick={() => this.handleAvailabilityClick(labels.left)}></a>\n        {/* eslint-disable-next-line */}\n        <a title={labels.middle} className=\"n\" onClick={() => this.handleAvailabilityClick(labels.middle)}></a>\n        {/* eslint-disable-next-line */}\n        <a title={labels.right} className=\"a\" onClick={() => this.handleAvailabilityClick(labels.right)}></a>\n        <div></div>\n      </div>\n    );\n  }\n}));\n\nexport default (AvailabilityToggle);\n","import React from 'react';\nimport { withStyles, ListItem, List } from '@material-ui/core';\nimport { inject, observer } from \"mobx-react\";\nimport Logo from '../logo/Logo';\nimport { Link } from 'react-router-dom';\nconst defaultLogo = 'https://pbs.twimg.com/profile_images/981455890342694912/fXaclV2Y_400x400.jpg';\n\nconst style = theme => ({\n  orgItem: {\n    position: 'relative',\n    display: 'inline-block',\n    width: '33.33%',\n    textAlign: 'center',\n    padding: 8,\n  },\n  orgsContainer: {\n    position: 'relative',\n    width: '100%',\n    listStyleType: 'none',\n    textAlign: 'left',\n  },\n  itemLogo: {\n    position: 'relative',\n    left: 0,\n    right: 0,\n    margin: 'auto',\n    border: '2px solid white',\n  },\n  itemName: {\n    textTransform: 'uppercase',\n    fontSize: '0.675rem',\n    fontWeight: '600',\n    whiteSpace: 'nowrap',\n    textOverflow: 'ellipsis',\n    overflow: 'hidden',\n    marginTop: 8,\n    color: 'white'\n  },\n});\n\nclass OrganisationsList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    }\n  }\n\n  componentDidMount() {\n    this.props.organisationStore.getCurrentUserOrganisations().then(() => {\n      this.forceUpdate();\n    });\n  }\n\n  render() {\n    const { currentUserOrganisations, orgTag } = this.props.organisationStore.values;\n    const { locale } = this.props.commonStore;\n    const { classes } = this.props;\n\n    return (\n      <List className={classes.orgsContainer}>\n        {currentUserOrganisations.map((org, i) => {\n          if (org && (org.tag !== orgTag)) {\n            return (\n              <ListItem button component={Link} to={'/' + locale + '/' + org.tag} key={org._id} className={classes.orgItem}>\n                <Logo type={'smallOrg'} alt={org.name} src={ (org.logo ? org.logo.url : null) || defaultLogo} className={classes.itemLogo} />\n                <div className={classes.itemName} >{org.name}</div>\n              </ListItem>\n            );\n          }else {return null; }\n        })}\n      </List>\n    );\n  }\n}\n\nexport default inject('organisationStore', 'commonStore')(\n  observer(\n    withStyles(style, { withTheme: true })(OrganisationsList)\n  )\n);\n","import React, { Component } from 'react';\nimport {withStyles} from \"@material-ui/core\";\nimport { inject, observer } from \"mobx-react\";\nimport PropTypes from 'prop-types';\nimport { Divider, SwipeableDrawer, IconButton, List, ListItem, ListItemSecondaryAction, ListItemText, ListItemAvatar } from '@material-ui/core';\nimport { ChevronLeft as ChevronLeftIcon } from '@material-ui/icons';\nimport './header.css';\nimport AvailabilityToggle from '../availabilityToggle/AvailabilityToggle';\nimport { styles } from './Header.css.js'\nimport Logo from '../utils/logo/Logo';\nimport {injectIntl} from 'react-intl';\nimport defaultPicture from '../../resources/images/placeholder_person.png';\nimport UrlService from '../../services/url.service';\nimport { Link, withRouter } from 'react-router-dom';\nimport OrganisationsList from '../utils/orgsList/OrganisationsList';\n\nconst Entities = require('html-entities').XmlEntities;\nconst entities = new Entities();\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      locale: this.props.commonStore.getCookie('locale') || this.props.commonStore.locale\n    }\n\n    this.handleLogout = this.handleLogout.bind(this);\n  }\n\n  getPicturePath(picture) {\n    if (picture && picture.path) return null;\n    else if (picture && picture.url) return picture.url;\n    else if (picture && picture.uri) return picture.uri;\n    else return null;\n  }\n\n  handleLogout(e) {\n    e.preventDefault();\n    this.props.handleDrawerClose();\n    this.props.authStore.logout().then(() => {\n      window.location.href = UrlService.createUrl(window.location.host, '/' + this.props.organisationStore.values.orgTag || this.props.organisationStore.values.organisation.tag, null);\n    });\n  }\n\n  render() {\n    const { classes, auth, open, intl, theme } = this.props;\n    const { record } = this.props.recordStore.values;\n    const { organisation } = this.props.organisationStore.values;\n    const { currentUser } = this.props.userStore.values;\n    const { locale } = this.state;\n    const currentOrgAndRecord = ((currentUser && currentUser.orgsAndRecords) ?\n      currentUser.orgsAndRecords.find(orgAndRecord => orgAndRecord.organisation === organisation._id) : null);\n\n    record.name = entities.decode(record.name)\n    organisation.name = entities.decode(organisation.name)\n\n    return (\n      <SwipeableDrawer\n        className={classes.drawer}\n        anchor=\"left\"\n        open={open}\n        onOpen={this.props.handleDrawerOpen}\n        onClose={this.props.handleDrawerClose}\n        classes={{\n          paper: classes.drawerPaper,\n        }}\n      >\n          <div\n            tabIndex={0}\n            role=\"button\"\n            onClick={this.handleDrawerClose}\n            onKeyDown={this.handleDrawerClose}\n          >\n        <div className={classes.drawerHeader}>\n          <IconButton onClick={this.props.handleDrawerClose} className={classes.drawerIconButton} >\n            <ChevronLeftIcon className={classes.drawerIcon} />\n          </IconButton>\n        </div>\n\n        <div className={'leftMenu'}>\n          {(auth && (organisation && organisation._id)) && (\n            <React.Fragment>\n              {record && record._id && (\n               <React.Fragment>\n                  <List className={'leftSubmenu'}>\n                    <ListItem >\n                      <ListItemAvatar>\n                        <Logo type={'person'} src={this.getPicturePath(record.picture) || defaultPicture} alt={record.name || record.tag} className={classes.logoBorder}/>\n                      </ListItemAvatar>\n                      <ListItemText primary={record.name || record.tag}\n                        primaryTypographyProps={{ variant: 'button', noWrap: true, style: { fontWeight: 'bold', color:'white' } }} />\n                    </ListItem>\n                    <ListItem button component={Link} to={'/' + locale + '/' + organisation.tag + '/' + record.tag} onClick={(e) => {this.props.handleDisplayProfile(e, {tag: record.tag})}}>\n                      <ListItemText primary={intl.formatMessage({ id: 'menu.drawer.profile' })} />\n                    </ListItem>\n                    <ListItem>\n                      <ListItemText primary={intl.formatMessage({ id: 'menu.drawer.availability' })} />\n                      <ListItemSecondaryAction>\n                        <AvailabilityToggle />\n                      </ListItemSecondaryAction>\n                    </ListItem>\n                  </List>\n                  <Divider className={classes.divider} />\n               </React.Fragment>\n              )}\n              <List className={'leftSubmenu'}>\n                <ListItem onClick={this.props.handleDrawerClose} component={Link} to={'/' + locale + '/' + organisation.tag}>\n                  <ListItemAvatar>\n                    <Logo type={'organisation'} alt={organisation.name} className={classes.logoBorder}/>\n                  </ListItemAvatar>\n                  <ListItemText primary={organisation.name || organisation.tag}\n                    primaryTypographyProps={{ variant: 'button', noWrap: true, style: { fontWeight: 'bold', color:'white' } }} />\n                </ListItem>\n\n                {(organisation.canInvite) && (\n                  <ListItem button component=\"a\" href={UrlService.createUrl(process.env.REACT_APP_HOST_BACKFLIP, '/invite', organisation.tag)} >\n                    <ListItemText primary={intl.formatMessage({ id: 'menu.drawer.invite'})}\n                                  primaryTypographyProps={{style: { fontWeight: 'bold', color: theme.palette.primary.main, textTransform: 'uppercase' } }} />\n                  </ListItem>\n                )}\n\n                {(currentUser.superadmin || (currentOrgAndRecord && currentOrgAndRecord.admin)) && (\n                  <ListItem button component=\"a\" href={UrlService.createUrl(process.env.REACT_APP_HOST_BACKFLIP, '/admin/organisation', organisation.tag)} target=\"_blank\">\n                    <ListItemText primary={intl.formatMessage({ id: 'menu.drawer.organisationAdmin' })} />\n                  </ListItem>\n                )}\n                <ListItem>\n                  <ListItemText primary={\n                    (organisation.premium ? intl.formatMessage({ id: 'menu.drawer.organisationInfoPremium' }) : intl.formatMessage({ id: 'menu.drawer.organisationInfo' }))\n                  } />\n                </ListItem>\n                <ListItem button component=\"a\" href={'mailto:premium@wingzy.io'} target=\"_blank\" >\n                  <ListItemText primary={\n                    (organisation.premium ? intl.formatMessage({ id: 'menu.drawer.contactUsPremium' }) : intl.formatMessage({ id: 'menu.drawer.contactUs' }))\n                  } />\n                </ListItem>\n                {(currentUser.orgsAndRecords && (currentUser.orgsAndRecords.length > 1) ) && (\n                 <React.Fragment>\n                   <Divider className={classes.divider} />\n                    <ListItem>\n                      <ListItemText primary={intl.formatMessage({id: 'menu.drawer.listOrgTitle'})}\n                        primaryTypographyProps={{noWrap: true, style: { fontWeight: 'bold' } }} />\n                    </ListItem>\n                    <OrganisationsList />\n                 </React.Fragment>\n                )}\n                {currentUser.superadmin && (\n                  <React.Fragment>\n                    <Divider className={classes.divider} />\n                    <ListItem button component={Link} to={'/' + locale + '/' + organisation.tag + '/onboard'}>\n                      <ListItemText primary={\"Onboard\"} />\n                    </ListItem>\n                  </React.Fragment>\n                )}\n              </List>\n              <Divider className={classes.divider} />\n            </React.Fragment>\n          )}\n          <List className={'leftSubmenu'}>\n            {!auth && (\n              <React.Fragment>\n                <ListItem button component={Link} to={\"/\" + locale + (organisation.tag ? '/' + organisation.tag : '') + '/signin'}>\n                  <ListItemText primary={intl.formatMessage({ id: 'Sign In' })} />\n                </ListItem>\n                <Divider className={classes.divider} />\n              </React.Fragment>\n              )}\n            <ListItem button component=\"a\" href={UrlService.createUrl(process.env.REACT_APP_HOST_BACKFLIP, '/', undefined)} target=\"_blank\">\n              <ListItemText primary={intl.formatMessage({ id: 'menu.drawer.whyWingzy' })} />\n            </ListItem>\n            {!organisation.premium && (\n            <ListItem button component=\"a\" href={UrlService.createUrl(process.env.REACT_APP_HOST_BACKFLIP, '/pricing', undefined)} target=\"_blank\">\n              <ListItemText primary={intl.formatMessage({ id: 'menu.drawer.pricing' })} />\n            </ListItem>\n            )}\n            <ListItem button component=\"a\" href={UrlService.createUrl(process.env.REACT_APP_HOST_BACKFLIP, '/terms', undefined)} target=\"_blank\">\n              <ListItemText primary={intl.formatMessage({ id: 'menu.drawer.terms' })} />\n            </ListItem>\n            <ListItem button component=\"a\" href={UrlService.createUrl(process.env.REACT_APP_HOST_BACKFLIP, '/protectingYourData',\n                                                                      ((organisation && organisation.tag) ? organisation.tag : undefined))} target=\"_blank\">\n              <ListItemText primary={intl.formatMessage({ id: 'menu.drawer.protectingYourData' })} />\n            </ListItem>\n          {auth && (\n            <React.Fragment>\n              <Divider className={classes.divider} />\n              <ListItem button onClick={this.handleLogout} >\n                  <ListItemText primary={intl.formatMessage({ id: 'menu.drawer.logout' })} />\n              </ListItem>\n            </React.Fragment>\n          )}\n          </List>\n        </div>\n        </div>\n      </SwipeableDrawer>\n    )\n  }\n}\n\nApp.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default inject('authStore', 'organisationStore', 'recordStore', 'commonStore', 'userStore')(\n  injectIntl(withRouter(observer(\n    withStyles(styles, { withTheme: true })(\n      App\n    )\n  )))\n);\n","import React, { Component } from 'react';\nimport { withStyles } from \"@material-ui/core\";\nimport { inject, observer } from \"mobx-react\";\nimport PropTypes from 'prop-types';\nimport { CssBaseline} from '@material-ui/core';\nimport { Redirect } from \"react-router-dom\";\nimport './header.css';\nimport { styles } from './Header.css.js'\nimport HeaderAppBar from './HeaderAppBar';\nimport HeaderDrawer from './HeaderDrawer';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      successLogout: false,\n      open: false,\n      auth: this.props.authStore.isAuth()\n    };\n  }\n\n  handleDrawerOpen = () => {\n    this.setState({ open: true });\n  };\n\n  handleDrawerClose = () => {\n    this.setState({ open: false });\n  };\n  \n  handleLogout = () => {\n    this.props.authStore.logout()\n      .then(this.setState({ successLogout: true }));\n  };\n\n  handleDisplayProfile = (e, record) => {\n    this.handleDrawerClose();\n    this.props.handleDisplayProfile(e, record);\n  }\n\n  render() {\n    const {open, successLogout, auth } = this.state;\n    const { classes } = this.props;\n\n    if (successLogout) return <Redirect to='/' />;\n    \n    return (\n      <div className={classes.root}>\n        <CssBaseline />\n        <HeaderAppBar handleDrawerOpen={this.handleDrawerOpen}\n          open={open} auth={auth}\n        />\n        <HeaderDrawer handleDrawerOpen={this.handleDrawerOpen}\n          handleDrawerClose={this.handleDrawerClose}\n          open={open} auth={auth}\n          handleDisplayProfile={this.handleDisplayProfile}\n        />\n        <div className={classes.drawerHeader}/>\n      </div>\n    );\n  }\n}\n\nApp.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default inject('commonStore', 'userStore', 'authStore', 'organisationStore')(\n  observer(\n    withStyles(styles, { withTheme: true })(\n      App\n    )\n  )\n);\n","import React from 'react';\nimport {inject, observer} from 'mobx-react';\n\nimport {Grid, withStyles} from '@material-ui/core';\nimport Auth from '../../components/auth/Auth';\nimport Banner from '../../components/utils/banner/Banner';\nimport Header from '../../components/header/Header';\nimport Logo from '../../components/utils/logo/Logo';\n\nconst styles = {\n  logo: {\n    width: '6.6rem',\n    height: '6.6rem',\n    boxShadow: '0 5px 15px -1px darkgrey, 0 0 0 5px transparent',\n    bottom: '3.2rem',\n    marginBottom: '-7rem',\n    zIndex: 2,\n    border: '4px solid white'\n  }\n};\n\nclass AuthPage extends React.Component {\n  componentDidMount() {\n    if (this.props.match && this.props.match.params && this.props.match.params.invitationCode) {\n      this.props.authStore.setInvitationCode(this.props.match.params.invitationCode);\n    }\n  }\n  \n  render() {\n    const {classes, initialTab} = this.props;\n    \n    return (\n      <div>\n        <Header />\n        <main>\n          <Grid container direction={\"column\"} justify={\"space-around\"} alignItems={\"center\"}>\n            <Grid container item alignItems={\"stretch\"}>\n              <Banner />\n            </Grid>\n            <Grid item container justify={\"center\"}>\n              <Logo type={'organisation'} alt=\"org-logo\" className={classes.logo} />\n            </Grid>\n            <Grid container item xs={12} sm={6} lg={4}>\n              <Auth initialTab={initialTab || 0} />\n            </Grid>\n          </Grid>\n        </main>\n      </div>\n    )\n  }\n}\n\nexport default inject('authStore')(\n  withStyles(styles)(observer(\n    (AuthPage)\n  ))\n);\n","import React from 'react';\nimport {FormattedHTMLMessage, FormattedMessage, injectIntl} from 'react-intl';\nimport {inject, observer} from 'mobx-react';\n\nimport {Button, Grid, TextField, Typography, withStyles} from \"@material-ui/core\";\nimport Banner from '../../components/utils/banner/Banner';\nimport Header from '../../components/header/Header';\nimport Logo from '../../components/utils/logo/Logo';\nimport SnackbarCustom from '../../components/utils/snackbars/SnackbarCustom';\nimport ReactGA from 'react-ga';\nReactGA.initialize(process.env.REACT_APP_GOOGLE_ANALYTICS_ID);\n\nconst styles = (theme) => ({\n  logo: {\n    width: 110,\n    height: 110,\n    boxShadow: '0 5px 15px -1px darkgrey, 0 0 0 5px transparent',\n    bottom: 60,\n    zIndex: 2,\n    marginBottom: -50,\n    [theme.breakpoints.down('xs')]: {\n      marginBottom: -56,\n    }\n  },\n  container: {\n    [theme.breakpoints.down('xs')]: {\n      padding: 8,\n    }\n  },\n  intro: {\n    textAlign: 'center',\n    [theme.breakpoints.down(400)]: {\n      padding: 5,\n    }\n  },\n  form: {\n    width: '100%',\n  }\n});\n\nclass PasswordForgot extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      successPasswordReset: false,\n      emailError: null\n    }\n  }\n  \n  componentDidMount() {\n    ReactGA.pageview(window.location.pathname);\n    if (this.props.match && this.props.match.params && this.props.match.params.organisationTag) {\n      this.props.organisationStore.setOrgTag(this.props.match.params.organisationTag);\n      this.props.organisationStore.getOrganisationForPublic();\n    }\n  }\n  \n  handleEmailChange = (e) => {\n    this.props.authStore.setEmail(e.target.value);\n  };\n  \n  handleSubmitForm = (e) => {\n    e.preventDefault();\n    this.props.authStore.passwordForgot()\n      .then(response => {\n        this.setState({successPasswordReset: true});\n      }).catch(err => {\n      this.setState({emailError: this.props.intl.formatMessage({id: 'signin.error.unknown'})});\n      this.setState({successPasswordReset: false});\n    });\n  };\n  \n  render() {\n    let {successPasswordReset, emailError} = this.state;\n    let {classes, intl} = this.props;\n    \n    return (\n      <Grid container direction={\"column\"} justify={\"space-around\"}>\n        <Grid container item >\n          <Header />\n        </Grid>\n        <Grid container item alignItems={\"stretch\"}>\n          <Banner />\n        </Grid>\n        <Grid container item justify={\"center\"}>\n          <Logo type={\"organisation\"} alt=\"org-logo\" className={classes.logo} />\n        </Grid>\n        <Grid container item justify={\"center\"} className={classes.container}>\n          {successPasswordReset && (\n            <Grid container item xs={12} sm={6} lg={4} spacing={16}>\n              <Grid item container>\n                <SnackbarCustom variant=\"success\" message={intl.formatMessage({id: 'password.forgot.success'})} />\n              </Grid>\n            </Grid>\n          )}\n          {!successPasswordReset && (\n            <form onSubmit={this.handleSubmitForm} className={classes.form}>\n              <Grid item container direction={'column'} xs={12} sm={6} lg={4} spacing={16}>\n                <Typography variant=\"h6\" className={classes.intro}><FormattedHTMLMessage id=\"password.forgot.intro\"/></Typography>\n                {emailError && (\n                  <Grid item>\n                    <SnackbarCustom variant=\"warning\" message={emailError} />\n                  </Grid>\n                )}\n                <Grid item>\n                  <TextField label=\"Email\"\n                             type=\"email\"\n                             autoComplete=\"email\"\n                             variant={\"outlined\"}\n                             fullWidth={true}\n                             onChange={this.handleEmailChange}\n                             required\n                  />\n                </Grid>\n                <Grid item>\n                  <Button fullWidth={true} type=\"submit\" color=\"primary\"><FormattedMessage id=\"password.forgot.send\"/></Button>\n                </Grid>\n              </Grid>\n            </form>\n          )}\n        </Grid>\n      </Grid>\n    );\n  }\n}\n\nexport default inject('authStore', 'organisationStore')(\n  injectIntl(observer(withStyles(styles)(PasswordForgot)))\n);\n","import React from 'react'\nimport {FormattedHTMLMessage, FormattedMessage, injectIntl} from 'react-intl';\nimport {inject, observer} from 'mobx-react';\n\nimport {Button, CircularProgress, Grid, TextField, Typography, withStyles} from \"@material-ui/core\";\nimport Banner from '../../components/utils/banner/Banner';\nimport Header from '../../components/header/Header';\nimport Logo from '../../components/utils/logo/Logo';\nimport SnackbarCustom from '../../components/utils/snackbars/SnackbarCustom';\nimport UrlService from '../../services/url.service';\nimport {Redirect} from 'react-router-dom';\nimport ReactGA from 'react-ga';\nReactGA.initialize(process.env.REACT_APP_GOOGLE_ANALYTICS_ID);\n\nconst styles = (theme) => ({\n  logo: {\n    width: 110,\n    height: 110,\n    boxShadow: '0 5px 15px -1px darkgrey, 0 0 0 5px transparent',\n    bottom: 60,\n    zIndex: 2,\n    marginBottom: -50,\n    [theme.breakpoints.down('xs')]: {\n      marginBottom: -56,\n    }\n  },\n  container: {\n    [theme.breakpoints.down('xs')]: {\n      padding: 8,\n    }\n  },\n  intro: {\n    textAlign: 'center',\n    [theme.breakpoints.down(400)]: {\n      padding: 5,\n    }\n  },\n  title: {\n    textAlign: 'center',\n    color: 'unset',\n    paddingTop: 16,\n    paddingBottom:16,\n    [theme.breakpoints.down(400)]: {\n      padding: 5,\n    }\n  },\n  form: {\n    width: '100%',\n  },\n  term: {\n    [theme.breakpoints.down('md')]: {\n      justifyContent: 'end',\n      padding: '8px 16px',\n    }\n  },\n  protectingData: {\n    [theme.breakpoints.down('md')]: {\n      justifyContent: 'flex-end',\n      padding: '8px 16px',\n    }\n  }\n});\n\nclass PasswordReset extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      passwordErrors: null,\n      locale: this.props.commonStore.getCookie('locale') || this.props.commonStore.locale,\n      userEmail: ( (this.props.match.params && this.props.match.params.email) ? this.props.match.params.email : null ),\n      redirectTo: null\n    }\n  }\n  \n  componentDidMount() {\n    ReactGA.pageview(window.location.pathname);\n    if (this.props.match && this.props.match.params && this.props.match.params.organisationTag) {\n      this.props.organisationStore.setOrgTag(this.props.match.params.organisationTag);\n      this.props.organisationStore.getOrganisationForPublic();\n    }\n  }\n  \n  handlePasswordChange = (e) => {\n    this.props.authStore.setPassword(e.target.value)\n  };\n  \n  handleSubmitForm = (e) => {\n    e.preventDefault();\n    this.props.authStore.updatePassword(this.props.match.params.token, this.props.match.params.hash)\n      .then(response => {\n        this.setState({redirectTo: '/' + this.props.commonStore.locale + (this.props.organisationStore.values.orgTag ? '/'+this.props.organisationStore.values.orgTag : '')});\n      }).catch(err => {\n      let errorMessage;\n      if (err.status === 422) {\n        err.response.body.errors.forEach(error => {\n          if (error.param === 'password') {\n            if (error.type === 'dumb') {\n              // (frequency over 100 000 passwords, 3 000 000 000 people use internet, 30 000 = 3 000 000 000 / 100 000)\n              errorMessage = (errorMessage ? errorMessage + '<br/>' : '') + this.props.intl.formatMessage({id: 'signup.error.dumbPassword'}, {dumbCount: (parseInt(error.msg) * 30000).toLocaleString()});\n            } else {\n              errorMessage = (errorMessage ? errorMessage + '<br/>' : '') + this.props.intl.formatMessage({id: 'signup.error.shortPassword'});\n            }\n          }\n        });\n      }\n      if (!errorMessage) this.props.intl.formatMessage({id: 'signup.error.generic'});\n      this.setState({passwordErrors: errorMessage});\n    });\n  };\n  \n  render() {\n    const {values, inProgress} = this.props.authStore;\n    let {passwordErrors, userEmail, redirectTo} = this.state;\n    let {classes, intl} = this.props;\n    \n    if(redirectTo) return <Redirect push to={redirectTo}/>;\n    \n    return (\n      <Grid container direction={\"column\"} justify={\"space-around\"}>\n        <Grid container item>\n          <Header/>\n        </Grid>\n        <Grid container item alignItems={\"stretch\"}>\n          <Banner/>\n        </Grid>\n        <Grid container item justify={\"center\"}>\n          <Logo type={\"organisation\"} alt=\"org-logo\" className={classes.logo}/>\n        </Grid>\n        <Grid container item justify={\"center\"} className={classes.container}>\n          <form onSubmit={this.handleSubmitForm} className={classes.form}>\n            <Grid item container direction={'column'} xs={12} sm={6} lg={4} spacing={16}>\n              {!userEmail && (\n                <Typography variant=\"h6\" className={classes.intro}><FormattedHTMLMessage id=\"password.new.intro\" values={{userEmail: values.email}}/></Typography>\n              )}\n              {userEmail && (\n                <div>\n                  <Grid item>\n                    <Typography variant=\"h4\" className={classes.title}>\n                      {this.props.organisationStore.values.orgTag && (\n                        <FormattedHTMLMessage id=\"password.create.title.orgTag\" values={{orgTag: this.props.organisationStore.values.orgTag}}/>\n                      )}\n                      {!this.props.organisationStore.values.orgTag && (\n                        <FormattedHTMLMessage id=\"password.create.title.noOrgTag\" />\n                      )}\n                    </Typography>\n                  </Grid>\n                  <Typography variant=\"h6\" className={classes.intro}><FormattedHTMLMessage id=\"password.create.intro\" values={{userEmail: values.email}}/></Typography>\n                </div>\n              )}\n              {passwordErrors && (\n                <Grid item>\n                  <SnackbarCustom variant='warning' message={passwordErrors}/>\n                </Grid>\n              )}\n              {userEmail && (\n                <Grid item>\n                  <TextField\n                    label=\"Email\"\n                    fullWidth\n                    variant={\"outlined\"}\n                    disabled\n                    value={userEmail}\n                  />\n                </Grid>\n              )}\n              <Grid item>\n                <TextField\n                  label={intl.formatMessage({id: 'Password'})}\n                  type=\"password\"\n                  fullWidth\n                  variant={\"outlined\"}\n                  onChange={this.handlePasswordChange}\n                  required\n                />\n              </Grid>\n              <Grid item>\n                {\n                  inProgress && (\n                    <CircularProgress color=\"secondary\"/>\n                  )\n                }\n                {!inProgress && (\n                  <Button fullWidth={true} type=\"submit\" color=\"secondary\">\n                    {!userEmail && (\n                      <FormattedMessage id=\"password.new.create\"/>\n                    )}\n                    {userEmail && (\n                      <FormattedMessage id=\"password.create.next\"/>\n                    )}\n                  </Button>\n                )}\n              </Grid>\n              <Grid item container direction=\"row\" justify={'space-between'}>\n                <Grid item lg={6}>\n                  <Button  className={classes.term} variant=\"text\" fullWidth={true} component=\"a\" target=\"_blank\" href={UrlService.createUrl(process.env.REACT_APP_HOST_BACKFLIP, '/terms', undefined)}>\n                    <FormattedMessage id=\"menu.drawer.terms\" />\n                  </Button>\n                </Grid>\n                <Grid item lg={6}>\n                  <Button className={classes.protectingData} variant=\"text\" fullWidth={true}  component=\"a\" target=\"_blank\" href={UrlService.createUrl(process.env.REACT_APP_HOST_BACKFLIP, '/protectingYourData', undefined)}>\n                    <FormattedMessage id=\"menu.drawer.protectingYourData\" style={{justifyContent: 'flex-end!important'}}/>\n                  </Button>\n                </Grid>\n              </Grid>\n            </Grid>\n          </form>\n        </Grid>\n      </Grid>\n    );\n  }\n}\n\nexport default inject(\"authStore\", \"organisationStore\", \"commonStore\")(\n  injectIntl(\n    observer(\n      withStyles(styles)(PasswordReset)\n    )\n  )\n)\n","import commonStore from '../stores/common.store';\nimport twemoji from 'twemoji';\nimport defaultPicture from '../resources/images/placeholder_person.png';\nimport defaultHashtagPicture from '../resources/images/placeholder_hashtag.png';\n\nclass ProfileService {\n  EXTRA_LINK_LIMIT = 20;\n  \n  setExtraLinkLimit(number) {\n    this.EXTRA_LINK_LIMIT = number;\n  }\n  \n  getProfileType(tag) {\n    if (tag.charAt(0) === '#') {\n      return 'hashtag';\n    } else if (tag.charAt(0) === '@') {\n      return 'person';\n    } else {\n      return null;\n    }\n  }\n  \n  getDefaultPictureByType(type) {\n    if (type === 'hashtag') return defaultHashtagPicture;\n    else if (type === 'person') return defaultPicture;\n    else return null;\n  }\n  \n  transformLinks(item) {\n    if (!item) return;\n    item.links = item.links || [];\n    item.links.forEach(function (link, index, array) {\n      this.makeLinkDisplay(link);\n      this.makeLinkIcon(link);\n      this.makeLinkUrl(link);\n      if (index > this.EXTRA_LINK_LIMIT - 1) link.class = 'extraLink';\n    }.bind(this));\n  }\n  \n  makeLinkIcon(link) {\n    switch (link.type) {\n      case 'email':\n        link.icon = 'envelope-o';\n        break;\n      case 'address':\n      case 'location':\n        link.icon = 'map-marker';\n        break;\n      case 'hyperlink':\n        link.icon = 'link';\n        break;\n      case 'workplace':\n        link.icon = 'user';\n        break;\n      case 'workchat':\n        link.icon = 'comment';\n        break;\n      default:\n        link.icon = link.type;\n        break;\n    }\n  }\n  \n  makeLinkDisplay(link) {\n    link.display = link.display || link.value;\n  }\n  \n  makeLinkUrl(link) {\n    link.url = link.url || link.uri;\n    if (!link.url || (link.type === 'workplace') || (link.type === 'workchat')) {\n      switch (link.type) {\n        case 'email':\n          link.url = 'mailto:' + link.value;\n          break;\n        case 'phone':\n          link.url = 'tel:' + link.value;\n          break;\n        case 'home':\n          link.url = 'tel:' + link.value;\n          break;\n        case 'address':\n          link.url = 'http://maps.google.com/?q=' + encodeURIComponent(link.value);\n          break;\n        case 'workplace':\n          link.url = this.setWorkplaceLink(link.url);\n          break;\n        case 'workchat':\n          link.url = this.setWorkchatLink(link.url);\n          break;\n        default:\n          link.url = link.value;\n          break;\n      }\n    }\n  }\n  \n  setWorkplaceLink(linkUrl) {\n    if (!linkUrl) {\n      return;\n    }\n    if (this.mobileAndTabletcheck()) {\n      let linkUrlArray = linkUrl.split('.');\n      linkUrlArray[0] = \"https://workplace\";\n      return linkUrlArray.join('.');\n    } else {\n      return linkUrl;\n    }\n  }\n  \n  setWorkchatLink(linkUrl) {\n    if (!linkUrl) {\n      return;\n    }\n    let newLinkUrl = this.setWorkplaceLink(linkUrl);\n    if (linkUrl === newLinkUrl) return linkUrl;\n    \n    let linkUrlArray = newLinkUrl.split('/');\n    linkUrlArray[linkUrlArray.length - 2] = 'thread';\n    linkUrlArray[linkUrlArray.length - 3] = 'messages';\n    return linkUrlArray.join('/');\n  }\n  \n  mobileAndTabletcheck() {\n    var check = false;\n    // eslint-disable-next-line\n    (function (a) {\n      // eslint-disable-next-line\n      if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true;\n    })(navigator.userAgent || navigator.vendor || window.opera);\n    return check;\n  }\n  \n  getPicturePathResized(picture, type, size) {\n    let url = this.getPicturePath(picture, type);\n    url = this.resizePicture(url, size);\n    return url;\n  }\n  \n  getPicturePath(picture, type) {\n    if (picture && picture.emoji) return this.getEmojiUrl(picture.emoji);\n    else if (picture && picture.url) return picture.url;\n    else if (picture && picture.uri) return picture.uri;\n    else if (picture && picture.path) return null;\n    else return null;\n  }\n  \n  resizePicture(pictureUrl, size) {\n    if (!pictureUrl || !size) return pictureUrl;\n    let urlSplited = pictureUrl.split('/resize/');\n    if (urlSplited.length === 2) {\n      urlSplited[1] = '/' + size + '/';\n      return urlSplited.join('/resize/');\n    } else {\n      return pictureUrl;\n    }\n  }\n  \n  getRandomEmoji() {\n    let arrayOfEmoji = ['📓', '📔', '📒', '📕', '📗', '📘', '📙'];\n    let randomIndex = Math.floor(Math.random() * Math.floor(arrayOfEmoji.length - 1));\n    return this.getEmojiUrl(arrayOfEmoji[randomIndex]);\n  }\n  \n  getEmojiUrl(emoji) {\n    let str = twemoji.parse(emoji);\n    str = str.split(/ /g);\n    str = str[4].split(/\"/g);\n    return str[1];\n  }\n  \n  makeHightlighted = function (item) {\n    if (!item) return;\n    let filters = commonStore.getSearchFilters() || commonStore.searchFilters;\n    if (filters && filters.length > 0 && item.hashtags && item.hashtags.length > 0) {\n      item.hashtags.forEach((hashtag, index) => {\n        if (hashtag.tag && filters.find(filterValue => filterValue.value.toLowerCase() === hashtag.tag.toLowerCase())) item.hashtags[index].class = 'highlighted';\n      });\n    }\n  };\n  \n  orderHashtags = function (item) {\n    if (!item || !item.hashtags) return;\n    var highlighted = [];\n    var notHighlighted = [];\n    item.hashtags.forEach(function (hashtag) {\n      if (hashtag.class === 'highlighted') highlighted.push(hashtag);\n      else notHighlighted.push(hashtag);\n    });\n    item.hashtags = highlighted.concat(notHighlighted);\n  };\n  \n  htmlDecode = function (input) {\n    var e = document.createElement('textarea');\n    e.innerHTML = input;\n    return e.childNodes.length === 0 ? \"\" : e.childNodes[0].nodeValue;\n  }\n}\n\nexport default new ProfileService();\n","import React from 'react';\nimport './SearchField.css';\nimport { Chip } from '@material-ui/core';\nimport ProfileService from '../../services/profile.service';\nimport defaultPicture from '../../resources/images/placeholder_person.png';\n\nexport const MultiValueContainer = (props) => {\n  return (\n    <Chip label={props.children} color=\"primary\" onClick={props.onClick} className={'editableChip'} />\n  );\n};\n\nexport const Option = props => {\n  const { innerProps } = props;\n  return (\n    <div {...innerProps} className=\"custom-option\">\n      <div className=\"custom-option-main\">\n        {props.data.picturePath && (\n          <img alt=\"img-logo\" src={props.data.picturePath ||\n            (ProfileService.getProfileType(props.data.value) === 'person' ? \n              (process.env.NODE_ENV === 'production' ? 'https://' : 'http://') +window.location.host + defaultPicture : \n              null) } \n              className=\"custom-option-img\" />\n        )}\n        <span dangerouslySetInnerHTML={{__html: props.data.label}} className=\"custom-option-label\"></span>\n      </div>\n      { (props.data.value && ProfileService.getProfileType(props.data.value)) && (\n        <div className=\"custom-option-secondary\">\n          {props.data.value}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport const customStyles = {\n  control: (base, state) => ({\n    ...base,\n    borderRadius: '30px',\n    boxSizing: 'border-box',\n    border: state.isFocused ? \"2px solid #FF0018\" : \"1px solid #FF0018\",\n    boxShadow: state.isFocused ? null : null,\n    \"&:hover\": {\n      borderColor: state.isFocused ? \"#FF0018\" : \"#FF0018\",\n      boxSizing: 'border-box'\n    },\n    padding: '2px 16px',\n    minHeight: 48,\n    maxHeight: 48,\n    fontSize: 16\n  }),\n  menu: base => ({\n    ...base,\n    borderRadius: '30px',\n    overflow: 'hidden',\n    hyphens: \"auto\",\n    textAlign: \"center\",\n    // prevent menu to scroll y\n    wordWrap: \"break-word\",\n\n  }),\n  menuList: base => ({\n    ...base,\n    padding: 0,\n  }),\n  input: base => ({\n    ...base,\n    padding: 0,\n    marginLeft: 8,\n  }),\n  multiValue: base => ({\n    ...base,\n    display: 'inline-block',\n  }),\n  placeholder: base => ({\n    ...base,\n    marginLeft: 8,\n  }),\n  valueContainer: (provided, state) => ({\n    ...provided,\n    padding: '0 !important',\n    margin: 0,\n    marginLeft: 0,\n    overflowY: 'hidden',\n    overflow: 'auto',\n    wordWrap: 'white-space',\n    WebkitFlexWrap: 'unset !important',\n    flexWrap: 'unset !important',\n    MsFlexWrap: 'unset !important',\n    maxHeight: 42,\n    scrollbarWidth: 'thin',\n    '&:last-child': {\n      marginBottom: 8,\n    },\n  }),\n};\n","import commonStore from '../stores/common.store';\nimport algoliasearch  from 'algoliasearch';\nimport organisationStore from '../stores/organisation.store';\nimport {observe} from 'mobx';\n\nclass AlgoliaService {\n\n  index;\n  indexName = 'world';\n  client;\n  algoliaKey;\n\n  constructor(algoliaKey) {\n    if(!algoliaKey) return;\n    this.algoliaKey = algoliaKey;\n    this.client = algoliasearch(process.env.REACT_APP_ALGOLIA_APPLICATION_ID, this.algoliaKey);\n    this.index = this.client.initIndex(this.indexName);\n\n    observe(commonStore, 'algoliaKey', (change) => {\n      this.client.clearCache();\n      if(!commonStore.algoliaKey) {\n        organisationStore.getAlgoliaKey(true)\n        .then(algoliaKey => {\n          this.algoliaKey = algoliaKey;\n          this.client = algoliasearch(process.env.REACT_APP_ALGOLIA_APPLICATION_ID, this.algoliaKey);\n          this.index = this.client.initIndex(this.indexName);\n        }).catch();\n      } else {\n        this.algoliaKey = commonStore.algoliaKey;\n        this.client = algoliasearch(process.env.REACT_APP_ALGOLIA_APPLICATION_ID, this.algoliaKey);\n        this.index = this.client.initIndex(this.indexName);\n      }\n    });\n  }\n\n  setAlgoliaKey(algoliaKey) {\n    if(!algoliaKey) return;\n    this.algoliaKey = algoliaKey;\n    this.client = algoliasearch(process.env.REACT_APP_ALGOLIA_APPLICATION_ID, algoliaKey);\n    this.index = this.client.initIndex(this.indexName);\n  }\n\n  fetchFacetValues(lastSelection, privateOnly, filters, query) {\n    if(!this.index) return Promise.resolve();\n    return new Promise((resolve, reject) => {\n      this.index.searchForFacetValues({\n        facetName: 'hashtags.tag',\n        query: query || '',\n        facetQuery: '',\n        filters: (filters ? filters : ''),\n        maxFacetHits: 40,\n        facetFilters:( (lastSelection && privateOnly !== null) ? this.makeFacetFilters(lastSelection, privateOnly) : ''),\n      }, (err, res) => {\n        if(err) return resolve(res);\n        return resolve(res);\n      });\n    });\n  }\n\n  fetchHashtags() {\n    if(!this.index) return Promise.resolve();\n    return new Promise((resolve, reject) => {\n      this.index.search({\n        facetFilters: ['type:hashtag'],\n        maxFacetHits: 40,\n      }, (err, res) => {\n        if(err) return resolve(res);\n        return resolve(res);\n      });\n    });\n  }\n\n  makeFacetFilters(lastSelection, privateOnly) {\n    let query = [];\n    if(privateOnly) query.push('organisation:'+organisationStore.values.organisation._id);\n    if(lastSelection) query.push('hashtags.tag:'+lastSelection.tag);\n    return query;\n  }\n\n  loadBank(filters) {\n    if(!this.index) return Promise.resolve();\n    return new Promise((resolve, reject) => {\n      let currentBank = commonStore.getLocalStorage('wingsBank', true);\n      if(!filters && currentBank && currentBank.length > 0) resolve();\n      this.index.search({\n        filters: (filters ? 'type:hashtag AND ' + filters : 'type:hashtag'),\n        hitsPerPage: 50\n      }, (err, content) => {\n        this.addToLocalStorage(content.hits).then(() => {resolve()});\n      });\n    });\n  }\n\n  /**\n   * @description Add or update local bank and remove duplicate entries\n   */\n  addToLocalStorage(hits) {\n    return new Promise((resolve, reject) => {\n      let currentBank = commonStore.getLocalStorage('wingsBank', true) || [];\n      hits.forEach(hit => {\n        let index = currentBank.findIndex(elt => elt.tag === hit.Tag);\n        if(index === -1) currentBank.push(hit);\n        else currentBank[index] = hit;\n      });\n      commonStore.setLocalStorage('wingsBank', currentBank, true)\n      .then(() => {resolve()});\n    });\n  }\n\n  fetchOptions(inputValue, hashtagOnly, wingsFamily){\n    if(!this.index) return Promise.resolve();\n    return new Promise((resolve, reject) => {\n      this.index.search({\n          query: inputValue,\n          filters: this.makeOptionsFilters(hashtagOnly, wingsFamily),\n          attributesToRetrieve: ['type','name', 'name_translated', 'tag','picture'],\n          restrictSearchableAttributes: ['name', 'name_translated', 'tag'],\n          highlightPreTag: '<span>',\n          highlightPostTag: '</span>',\n          hitsPerPage: 5\n        }, (err, content) => resolve(content));\n    });\n  }\n\n  makeOptionsFilters(hashtagOnly, wingsFamily) {\n    let filter = '';\n    if(hashtagOnly) filter += 'type:hashtag';\n    if(wingsFamily) filter += ' AND hashtags.tag:'+wingsFamily;\n    return filter;\n  }\n\n\n  fetchHits(filters, query, facetFilters, page) {\n    if(!this.index) return Promise.resolve();\n    return new Promise((resolve, reject) => {\n      this.index.search({\n        page : page || 0,\n        query: query || '',\n        facetFilters: facetFilters || '',\n        filters: filters || 'type:person',\n        hitsPerPage: 35,\n        attributesToSnippet: [\n          \"intro:\"+15,\n          \"description:\"+15\n        ],\n      }, (err, content) => {\n        if(err) return resolve(content);\n        if(!content) return resolve(null);\n        return resolve(content)\n      });\n    });\n  }\n\n\n}\n\n\n\nexport default new AlgoliaService(commonStore.algoliaKey);","import {createMuiTheme} from '@material-ui/core/styles';\n\nexport const palette = {\n  secondary: {\n    light: '#EFA3A0',\n    main: '#FF0018',\n    dark: '#BA0012',\n  },\n  primary: {\n    main: '#cccfe5',\n    dark: '#2b2d3c',\n    hover: '#aaacbe',\n    contrastText: '#fff',\n  },\n  background: {\n    default: '#f2f2f2',\n  }\n};\n\nexport default createMuiTheme({\n  palette: palette,\n  typography: {\n    useNextVariants: true,\n    fontSize: 12,\n    fontFamily: [\n      '\"Open sans\"',\n      '-apple-system',\n      'BlinkMacSystemFont',\n      '\"Segoe UI\"',\n      'Roboto',\n      '\"Helvetica Neue\"',\n      'Arial',\n      'sans-serif',\n      '\"Apple Color Emoji\"',\n      '\"Segoe UI Emoji\"',\n      '\"Segoe UI Symbol\"',\n    ].join(','),\n  },\n  overrides: {\n    // General styles\n    MuiGrid: {\n      \"spacing-xs-16\": {\n        width: \"auto\",\n        margin: \"auto\",\n      },\n    },\n    MuiTypography: {\n      root: {\n        // overflow: 'hidden',\n      },\n      h6: {\n        display: 'block',\n        padding: 8,\n      },\n      h5: {\n        color: 'white',\n        fontWeight: '700',\n      },\n      h4: {\n        color: 'white',\n        fontWeight: '400',\n      },\n      body1: {\n        color: 'white',\n        fontWeight: '400',\n        fontSize: '0.95rem',\n      },\n      body2: {\n        fontWeight: '600',\n      }\n    },\n    // Avatar\n    MuiAvatar: {\n      img: {\n        height: 'auto',\n      }\n    },\n    //Buttons\n    MuiButton: {\n      root: {\n        borderRadius: 30,\n        height: \"56px\",\n        fontWeight: \"600\",\n        transition: 'all 250ms',\n        padding: '8px 24px',\n      },\n      disabled: {\n        color:palette.primary.hover + '!important'\n      },\n      contained: {\n        '&:hover': {\n          backgroundColor: palette.secondary.dark,\n          color: 'white',\n        }\n      },\n      text: {\n        color: \"darkgrey\",\n        '&:hover': {\n          color: 'black',\n        }\n      }\n    },\n    MuiIconButton: {\n      root: {\n        color: '#DDE9EB',\n        padding: 8,\n      }\n    },\n    MuiChip: {\n      root: {\n        padding: '6px 12px',\n        fontWeight: '600',\n        margin: '16px 8px 4px 8px',\n        fontSize: '0.8125rem',\n      },\n      label: {\n        '& div': {\n          fontSize: '0.8125rem',\n        },\n        '& div:nth-child(2)': {\n          cursor: 'pointer',\n          height: 22,\n          width: 22,\n          borderRadius: '50%'\n        }\n      },\n      colorPrimary: {\n        color: palette.primary.dark,\n        backgroundColor: palette.primary.main,\n        '&:hover': {\n          color: palette.primary.dark,\n          backgroundColor: palette.primary.hover +' !important',\n        },\n      },\n      colorSecondary: {\n        color: 'white',\n        backgroundColor: palette.primary.dark,\n        '&:hover': {\n          backgroundColor: palette.primary.hover +' !important'\n        },\n      },\n    },\n    MuiBackdrop: {\n      root: {\n        filter: 'brightness(0) invert(1)',\n      },\n    },\n    //Cards\n    MuiCard: {\n      root: {\n        padding: 0,\n        borderRadius: 16,\n        margin: 15,\n        marginLeft: 0,\n        boxShadow: '0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)',\n        transition: 'all 0.3s cubic-bezier(.25,.8,.25,1)',\n        '&:hover': {\n          boxShadow: '0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22)',\n        }\n      }\n    },\n    MuiFab: {\n      root: {\n        transition: 'filter 0.3s cubic-bezier(.25,.8,.25,1)',\n        '&:hover': {\n          filter: 'brightness(88%)'\n        }\n      }\n    },\n    MuiCardActions: {\n      root: {\n        padding: '0 8px!important',\n        display: 'flex',\n      }\n    },\n    MuiCardContent: {\n      root: {\n        padding: '0 0 8px 8px!important',\n        whiteSpace: 'nowrap',\n        overflowX: 'scroll',\n      }\n    },\n    MuiCardHeader: {\n      root: {\n        width: '100%',\n        backgroundColor: palette.primary.dark,\n      },\n      content: {\n        display: 'inline-grid',\n        textAlign: 'left',\n        resize: 'horizontal',\n      },\n    },\n    //Header\n    MuiAppBar: {\n      root: {\n        height: 64,\n        maxWidth: '100vw',\n        left: '0 !important',\n      }\n    },\n    MuiDrawer: {\n      root: {\n        height: 64,\n      }\n    },\n    MuiPaper: {\n      root: {\n        padding: '16px',\n      }\n    },\n    MuiDialog: {\n      paper: {\n        margin: 16\n      }\n    },\n    //Inputs\n    MuiOutlinedInput: {\n      root: {\n        backgroundColor: 'white',\n        borderRadius: 30,\n        [`& fieldset`]: {\n          borderRadius: 30\n        },\n      },\n      input: {\n        borderRadius: 30,\n        fontSize: 'large',\n        color:palette.primary.dark,\n      },\n      adornedEnd: {\n        paddingRight: 8,\n      }\n    },\n    MuiInputLabel: {\n      shrink: {\n        fontWeight: '600',\n        fontSize: 'medium',\n      }\n    },\n    //List\n    MuiList: {\n      padding: {\n        paddingTop: 0,\n        paddingBottom: 0,\n      }\n    },\n    MuiListItem: {\n      root: {\n        paddingTop: 8,\n        paddingBottom: 8,\n      },\n    },\n    // Tabs\n    MuiTab: {\n      root: {\n        fontSize: '0.875rem!important',\n        fontWeight: '600',\n        '&:hover': {\n          color: palette.secondary.main\n        },\n      },\n      labelContainer: {\n        padding: '0px!important', // nous permet d'avoir nos espacement de 16px à chaques view\n      }\n    },\n    MuiMobileStepper: {\n      dot: {\n        backgroundColor: palette.primary.main,\n        margin: 8,\n      },\n      dotActive: {\n        transform: 'scale(1.5)',\n        backgroundColor: palette.secondary.main\n      }\n    }\n  },\n  \n  // Props\n    props: {\n      MuiButton: {\n        variant: \"contained\",\n      },\n      MuiInput: {\n        margin: \"none\"\n      }\n    },\n  });\n","import React from 'react';\nimport { AsyncCreatable } from 'react-select';\nimport { injectIntl } from 'react-intl';\nimport { inject, observer } from 'mobx-react';\nimport './SearchField.css';\nimport classNames from 'classnames';\nimport { withTheme } from '@material-ui/core';\nimport ProfileService from '../../services/profile.service';\nimport {Option, customStyles, MultiValueContainer} from './SearchFieldElements';\nimport AlgoliaService from '../../services/algolia.service';\nimport { observe } from 'mobx';\nimport {Search} from '@material-ui/icons';\nimport { components } from 'react-select';\nimport theme from '../../theme';\n\nclass SearchField extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      inputValue: '',\n      selectedOption: this.props.defaultValue,\n      placeholder: this.props.intl.formatMessage({ id: (this.props.hashtagOnly ? 'algolia.onboard' : 'algolia.search') }),\n      locale: this.props.commonStore.getCookie('locale') || this.props.commonStore.locale,\n      observer: () => {}\n    };\n  }\n\n  // Used to fetch an event: User click on a Wing, so we should add it to the search filters\n  componentWillReceiveProps(nextProps) {\n    if(this.props.hashtagOnly) return;\n    if (nextProps.newFilter.value && nextProps.newFilter.label) {\n      if (this.state.selectedOption && !this.state.selectedOption.some(val => val.value === nextProps.newFilter.value)) {\n        let newSelectedOption = this.state.selectedOption;\n        newSelectedOption.push(nextProps.newFilter);\n        this.handleChange(newSelectedOption);\n      } else {\n        this.handleChange([nextProps.newFilter]);\n      }\n    }\n  }\n  componentDidMount() {\n    AlgoliaService.setAlgoliaKey(this.props.commonStore.algoliaKey);\n\n    this.setState({observer: observe(this.props.commonStore, 'algoliaKey', (change) => {\n      AlgoliaService.setAlgoliaKey(this.props.commonStore.algoliaKey);\n    })});\n  }\n\n  componentWillUnmount() {\n    this.state.observer();\n  }\n\n  // Format an array of options so that they all have a label and a value\n  // i18n of options is performed here\n  prepareLabels = (array) => {\n    let arrayOfLabel = [];\n    array.forEach(hit => {\n      let displayedName;\n      let displayedNameText;\n      if (hit.type === 'hashtag') {\n        displayedNameText = this.getTextLabel(hit);\n        if(hit._highlightResult && hit._highlightResult.name_translated && hit._highlightResult.name_translated[this.state.locale]&& hit._highlightResult.name_translated[this.state.locale].value) {\n          displayedName = hit._highlightResult.name_translated[this.state.locale].value;\n        } else if(hit._highlightResult && hit._highlightResult.name && hit._highlightResult.name.value) {\n          displayedName = hit._highlightResult.name.value;\n        } else if(hit._highlightResult && hit._highlightResult.tag && hit._highlightResult.tag.value){\n          displayedName = hit._highlightResult.tag.value;\n        } else {\n          displayedName = this.getTextLabel(hit);\n        }\n      } else if (hit.type === 'person') {\n        displayedNameText = hit.name || hit.tag;\n        if(hit._highlightResult && hit._highlightResult.name && hit._highlightResult.name.value) {\n          displayedName = hit._highlightResult.name.value\n        } else {\n          displayedName = hit.name || hit.tag;\n        }\n      }\n      arrayOfLabel.push({ label: displayedName, value: hit.tag, labelText: displayedNameText, picturePath: ProfileService.getPicturePath(hit.picture, 'hashtag') });\n    });\n    return arrayOfLabel;\n  }\n\n  getTextLabel = (hit) => {\n    if(!hit) return '';\n    return (hit.name_translated ? \n      (hit.name_translated[this.state.locale] || hit.name_translated['en-UK']) || hit.name || hit.tag : hit.name || hit.tag);\n  }\n\n  getOptionValue = (option) => option.value;\n  getOptionLabel = (option) => ProfileService.htmlDecode(option.labelText || option.label);\n\n  // when option is selected\n  handleChange = (selectedOption) => {\n    this.scrollToBottom();\n    \n    if(this.props.hashtagOnly) {\n      this.setState({inputValue: '', selectedOption: null}, () => {if(selectedOption) this.props.handleAddWing(null, {tag: selectedOption.value || selectedOption.tag})});\n    } else {\n      this.props.commonStore.setSearchFilters(selectedOption);\n      this.setState({\n        selectedOption: selectedOption,\n        inputValue: ''\n      }, () => {\n        this.refineWithSelectedOptions(selectedOption);\n        this.props.updateFilters(selectedOption);\n      });\n    }\n\n  }\n\n  // rename scrollToRight\n  async scrollToBottom() {\n    setTimeout(() => {\n      let valueContainer = document.querySelector('.autocomplete-search div div:nth-child(1)');\n      if(valueContainer){\n        valueContainer.scrollLeft = valueContainer.scrollWidth;\n        // if(valueContainer.scrollHeight > 42) {\n        //   valueContainer.style.marginBottom = '8px';\n        // } else {\n        //   valueContainer.style.marginBottom = '';\n        // }\n      } \n    }, 100);    \n  }\n\n  refineWithSelectedOptions = (selectedOption) => {\n    let optionsString = '';\n    if (selectedOption && selectedOption.length > 0) selectedOption.forEach(option => { optionsString += option.label + ' '; });\n    this.updateOptions(optionsString);\n  }\n\n  getOptions = async (inputValue) => {\n    let algoliaResponse = await this.updateOptions(inputValue);\n    return this.prepareLabels(algoliaResponse.hits);\n  }\n\n  updateOptions = async (inputValue) => {\n    return await AlgoliaService.fetchOptions(inputValue, this.props.hashtagOnly, this.props.wingsFamily);\n  }\n\n  handleCreateOption = async (option) => {\n    if (!this.props.hashtagOnly) {\n      let arrayOfOption = this.state.selectedOption || [];\n      option = option.trim();\n      arrayOfOption.push({ label: option, value: option });\n      return this.handleChange(arrayOfOption);\n    } else {\n      let newRecord = {\n        name: option,\n        type: 'hashtag'\n      }\n      if(this.props.wingsFamily){\n        let wingsFamilyRecord;\n        this.props.recordStore.setRecordTag(this.props.wingsFamily);\n        wingsFamilyRecord = await this.props.recordStore.getRecordByTag();\n        newRecord.hashtags = [wingsFamilyRecord];\n      }\n      return this.props.recordStore.postRecord(newRecord)\n      .then(recordSaved => {\n        return this.handleChange(recordSaved);\n      }).catch((e) => console.log(e));\n    }\n  }\n\n  noOptionsMessage = (inputValue) => {\n    if (inputValue.inputValue) return this.props.intl.formatMessage({ id: 'algolia.noOptions' }, { input: inputValue.inputValue });\n    return this.props.intl.formatMessage({ id: 'algolia.typeSomething' });\n  }\n\n  createOptionMessage = (inputValue) => {\n    if(this.props.hashtagOnly) \n      return this.props.intl.formatMessage({ id: 'algolia.createWing' }, { input: inputValue });\n    else\n      return this.props.intl.formatMessage({ id: 'algolia.createOption' }, { input: inputValue });\n  }\n\n  handleSearchClick = (props) => {\n    if(props.selectProps.inputValue.trim() !== '') {\n      this.handleCreateOption(props.selectProps.inputValue);\n    }\n  }\n\n  onInputChange = (inputValue, { action }) => {\n    switch (action) {\n      case 'input-change':\n        this.setState({ inputValue });\n        return;\n      case 'menu-close':\n        let menuIsOpen = undefined;\n        if (this.state.inputValue) {\n          menuIsOpen = true;\n        }\n        this.setState({\n          menuIsOpen\n        });\n        return;\n      default:\n        return;\n    }\n  }\n\n  onKeyDown = (event) => {\n    switch (event.keyCode) {\n        case 13: // ENTER\n            event.preventDefault();\n            this.handleSearchClick({selectProps: {inputValue: this.state.inputValue}});\n            break;\n        default:\n          return;\n    }\n  }\n\n  render() {\n    const { defaultOptions} = this.props;\n    const { selectedOption, placeholder, inputValue } = this.state;\n\n    const DropdownIndicator = (props) => {\n      return (\n        <components.DropdownIndicator {...props}>\n          <Search onClick={() => {this.handleSearchClick(props)}} style={{color: theme.palette.primary.main}} />\n        </components.DropdownIndicator>\n      );\n    };\n\n    return (\n      <AsyncCreatable\n        formatCreateLabel={this.createOptionMessage}\n        styles={customStyles}\n        className={classNames('autocomplete-search', this.props.className)}\n        value={selectedOption}\n        noOptionsMessage={this.noOptionsMessage}\n        getOptionValue={this.getOptionValue}\n        getOptionLabel={this.getOptionLabel}\n        defaultOptions={defaultOptions}\n        loadOptions={this.getOptions}\n        placeholder={placeholder}\n        onChange={this.handleChange}\n        onCreateOption={this.handleCreateOption}\n        components={{ MultiValueContainer, DropdownIndicator, Option }}\n        isMulti={!this.props.hashtagOnly}\n        onSelectResetsInput={true}\n        onBlurResetsInput={true}\n        onCloseResetsInput={false}\n        arrowRenderer={() => null}\n        clearRenderer={() => null}\n        inputValue={inputValue}\n        onInputChange={this.onInputChange}\n        onKeyDown={this.onKeyDown}\n      />\n    );\n  }\n}\n\nexport default inject('commonStore', 'recordStore')(\n  observer(\n    injectIntl(withTheme()(SearchField))\n  )\n);\n","import React from 'react';\nimport { Grow, Paper, Popper, MenuItem, MenuList, ClickAwayListener, IconButton, withStyles } from '@material-ui/core'\nimport {Edit} from \"@material-ui/icons\";\nimport {FormattedMessage} from \"react-intl\";\n\nconst styles = theme => ({\n  root: {\n    display: 'flex',\n    borderRadius: 30,\n    zIndex: 1,\n    position: 'fixed',\n  },\n  button: {\n    position: 'fixed',\n    right: 0,\n    margin: 16,\n    padding: 0,\n    minWidth: 40,\n    height: 40,\n    backgroundColor: 'white',\n    color: theme.palette.secondary.main,\n    boxShadow: 'none',\n    opacity: 0.7,\n    '&:hover': {\n      backgroundColor: 'white',\n      opacity: 1,\n    }\n  },\n  paper: {\n    marginTop: 8,\n    marginRight: 16,\n  }\n});\n\nclass MenuButton extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n    }\n  }\n  \n  handleToggle = () => {\n    this.setState(state => ({open: !state.open}));\n  };\n  \n  handleClose = event => {\n    if (this.anchorEl.contains(event.target)) {\n      return;\n    }\n    this.setState({open: false});\n  };\n  \n  deleteAlert = () => {\n    alert(\"Do you really want to delete this awesome profile ?\")\n  };\n  \n  render() {\n    const {classes, urlUpdateCover, urlEditIntro, urlEditAboutMe, urlDeleteProfile} = this.props;\n    const {open} = this.state;\n    \n    return (\n      <div className={classes.root}>\n        <IconButton\n          className={classes.button}\n          buttonRef={node => {\n            this.anchorEl = node;\n          }}\n          aria-owns={open ? 'menu-list-grow' : undefined}\n          aria-haspopup=\"true\"\n          onClick={this.handleToggle}\n        >\n          <Edit fontSize=\"default\"/>\n        </IconButton>\n        <Popper open={open} anchorEl={this.anchorEl} transition disablePortal>\n          {({TransitionProps, placement}) => (\n            <Grow\n              {...TransitionProps}\n              id=\"menu-list-grow\"\n              style={{transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom'}}\n            >\n              <Paper className={classes.paper}>\n                <ClickAwayListener onClickAway={this.handleClose}>\n                  <MenuList>\n                    <MenuItem button component=\"a\" href={urlUpdateCover}>\n                      <FormattedMessage id=\"profile.updateCover\"/>\n                    </MenuItem>\n                    <MenuItem button component=\"a\" href={urlEditIntro}>\n                      <FormattedMessage id=\"profile.editIntro\"/>\n                    </MenuItem>\n                    <MenuItem button component=\"a\" href={urlEditAboutMe}>\n                      <FormattedMessage id=\"profile.editAboutMe\"/>\n                    </MenuItem>\n                    <MenuItem button component=\"a\" onClick={this.deleteAlert} href={urlDeleteProfile}>\n                      <FormattedMessage id={'delete profile'}/>\n                    </MenuItem>\n                  </MenuList>\n                </ClickAwayListener>\n              </Paper>\n            </Grow>)}\n        </Popper>\n      </div>\n    )\n  }\n}\n\nexport default withStyles(styles)(MenuButton);\n","import React from 'react';\nimport { Avatar, Chip, withStyles } from '@material-ui/core';\nimport classNames from 'classnames';\n\nconst styles = theme => ({\n  wingImg: {\n    height: 48,\n    width: 48,\n    margin: '-5px -6px 0 -15px',\n    boxShadow: 'none',\n    backgroundColor: 'transparent',\n    overflow: 'visible',\n  },\n  highlighted: {\n    backgroundColor: theme.palette.primary.dark,\n    color: 'white',\n    '&:hover': {\n      backgroundColor: theme.palette.primary.dark  + ' !important',\n      color: 'white !important'\n    }\n  },\n  button: {\n    backgroundColor: theme.palette.secondary.main,\n    color: 'white',\n    '&:hover': {\n      backgroundColor: theme.palette.secondary.dark + ' !important'\n    }\n  },\n  suggestionWing: {\n    backgroundColor: 'white',\n    color: theme.palette.primary.dark,\n    transition: 'background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n    '&:hover': {\n      backgroundColor: 'rgba(0,0,0,.08)',\n      color: theme.palette.primary.dark,\n    }\n  },\n  removable: {\n    paddingRight: 0,\n    '&:hover': {\n      backgroundColor: theme.palette.primary.main + ' !important',\n    }\n  },\n  animated: {\n    background: theme.palette.secondary.main,\n    color: 'white',\n    transform: 'scale(0)',\n    animation: '250ms ease-in wingEaseIn',\n    animationFillMode: 'forwards',\n  },\n  bigWing: {\n    transform: 'scale(1.3)',\n    marginTop: 32,\n    marginLeft: 32,\n    marginRight: 32\n  },\n  '@keyframes wingEaseIn': {\n    from: {\n      background: theme.palette.secondary.main,\n      color: 'white',\n      transform: 'scale(0)',\n    },\n    '85%': {\n      background: theme.palette.secondary.main,\n    },\n    to: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.dark,\n      transform: 'scale(1)',\n    }\n  }\n});\n\nconst Wing = ({ src, label, ...props }) => {\n  if (src) {\n    return (\n      <Chip\n        avatar={<Avatar className={props.classes.wingImg} src={src} alt=\"wings-img\"/>}\n        label={label}\n        color={\"primary\"}\n        className={classNames(props.classes[props.className], (props.onDelete ? props.classes.removable : null) )}\n        onClick={props.onClick}\n        onDelete={props.onDelete}\n        onMouseDown={props.onMouseDown}\n        onMouseUp={props.onMouseUp}\n        onBlur={props.onBlur}\n        >\n      </Chip>\n    )\n  } else {\n    return (\n      <Chip\n        label={label}\n        color={\"primary\"}\n        className={classNames(props.classes[props.className], (props.onDelete ? props.classes.removable : null))}\n        onClick={props.onClick}\n        onDelete={props.onDelete}\n        onMouseDown={props.onMouseDown}\n        onMouseUp={props.onMouseUp}\n        onBlur={props.onBlur}>\n      </Chip>\n    )\n  }\n\n};\n\nexport default withStyles(styles)(Wing)\n","import React from 'react';\nimport {inject, observer} from 'mobx-react';\nimport {FormattedMessage, injectIntl} from 'react-intl';\nimport {Redirect} from 'react-router-dom';\nimport classNames from 'classnames';\nimport {Button, Grid, IconButton, Typography, withStyles} from '@material-ui/core';\nimport {Clear} from '@material-ui/icons';\nimport '../../resources/stylesheets/font-awesome.min.css';\nimport './ContactsColors.css';\nimport {styles} from './ProfileLayout.css';\nimport defaultPicture from '../../resources/images/placeholder_person.png';\nimport Banner from '../../components/utils/banner/Banner';\nimport Logo from '../../components/utils/logo/Logo';\nimport MenuButton from './menuButton'\nimport Wings from '../utils/wing/Wing';\nimport UrlService from '../../services/url.service';\nimport ProfileService from '../../services/profile.service';\n\nclass ProfileLayout extends React.Component {\n  \n  constructor(props) {\n    super(props);\n    this.state = {\n      canEdit: false,\n      record: null,\n      displayIn: true,\n    }\n  }\n  \n  canEdit = (workingRecord) => {\n    if (!(this.props.userStore.values.currentUser && this.props.userStore.values.currentUser._id)) return false;\n    if (this.props.userStore.values.currentUser.superadmin) return true;\n    else if (this.props.userStore.values.currentUser.orgsAndRecords.find(orgAndRecord => orgAndRecord.record === workingRecord.objectID)) return true;\n    else if (this.props.userStore.values.currentUser.orgsAndRecords.find(orgAndRecord => orgAndRecord.organisation === workingRecord.organisation && orgAndRecord.admin)) return true;\n    else return false;\n  }\n  \n  componentDidMount() {\n    if (!this.props.hit) return;\n    if (!this.props.authStore.isAuth()) return;\n    this.props.recordStore.setRecordTag(this.props.hit.tag);\n    this.props.recordStore.setOrgId(this.props.organisationStore.values.organisation._id);\n    this.props.recordStore.getRecordByTag()\n      .then((record) => {\n        record.objectID = record._id;\n        this.setState({record: record, canEdit: this.canEdit(record)});\n      }).catch(() => {\n      return;\n    })\n  };\n  \n  handleReturnToSearch = (e, element) => {\n    this.setState({displayIn: false}, () => {\n      if (!element) {\n        setTimeout(function () {\n          this.props.handleReturnToSearch();\n        }.bind(this), 600);\n      } else {\n        this.props.addToFilters(e, element, true);\n      }\n    });\n  }\n\n  handleRedirectToEditWings = (id) => {\n    this.setState({redirectTo: '/' + this.props.commonStore.locale + '/' + this.props.organisationStore.values.organisation.tag + '/onboard/wings/edit/' + id});\n  }\n  \n  render() {\n    const {hit, className, classes, theme} = this.props;\n    const {canEdit, record, displayIn, redirectTo} = this.state;\n    const {locale} = this.props.commonStore;\n    const orgTag = this.props.organisationStore.values.organisation.tag;\n    let rootUrl = '/' + locale + '/' + orgTag;\n    \n    const currentHit = record || hit;\n    ProfileService.transformLinks(currentHit);\n    ProfileService.makeHightlighted(currentHit);\n    ProfileService.orderHashtags(currentHit);\n\n    if(redirectTo) return (<Redirect to={redirectTo} />);\n    if (!currentHit) return (<div></div>);\n\n    return (\n      <Grid container className={(displayIn ? className : classes.profileContainerHide)}>\n        {(window.location.pathname !== rootUrl + '/' + hit.tag) && (\n          <Redirect to={rootUrl + '/' + hit.tag}/>\n        )}\n        <Grid container item alignItems={\"stretch\"}>\n          <Banner source={(currentHit && currentHit.cover && currentHit.cover.url) ? currentHit.cover.url : null}>\n            <IconButton aria-label=\"Edit\" className={classes.returnButton} onClick={this.handleReturnToSearch}>\n              <Clear fontSize=\"large\" className={classes.returnButtonSize}/>\n            </IconButton>\n            {canEdit && (\n              <MenuButton urlUpdateCover={UrlService.createUrl(process.env.REACT_APP_HOST_BACKFLIP, '/cover/id/' + currentHit.objectID, orgTag)}\n                          urlEditIntro={'/' + locale + '/' + orgTag + '/onboard/intro/edit/' + currentHit.objectID}\n                          urlEditAboutMe={UrlService.createUrl(process.env.REACT_APP_HOST_BACKFLIP, '/about/id/' + currentHit.objectID, orgTag)}\n                          urlDeleteProfile={UrlService.createUrl(process.env.REACT_APP_HOST_BACKFLIP, '/admin/record/delete/' + currentHit.objectID, orgTag)}\n              />\n              // <MenuButton urlUpdateCover={UrlService.createUrl(process.env.REACT_APP_HOST_BACKFLIP, '/cover/id/' + currentHit.objectID, orgTag)}\n              // urlEditIntro={UrlService.createUrl(process.env.REACT_APP_HOST_BACKFLIP, '/onboard/intro', orgTag, 'recordId=' + currentHit.objectID)}\n              // urlEditAboutMe={UrlService.createUrl(process.env.REACT_APP_HOST_BACKFLIP, '/about/id/' + currentHit.objectID, orgTag)}\n              // urlDeleteProfile={UrlService.createUrl(process.env.REACT_APP_HOST_BACKFLIP, '/admin/record/delete/' + currentHit.objectID, orgTag)}\n              // />\n            )}\n          </Banner>\n        </Grid>\n        <Grid item xs={12} sm={6} lg={3} className={classes.generalPart}>\n          <Grid item>\n            <Logo type={'person'} className={classes.logo} src={ProfileService.getPicturePathResized(currentHit.picture, 'person', '170x170') || defaultPicture}/>\n            <div className={classes.subheader}>\n              <Typography variant=\"h4\" className={classes.name}>\n                {ProfileService.htmlDecode(currentHit.name) || currentHit.tag}\n              </Typography>\n              <Typography variant=\"body1\" className={classes.name}>\n                {ProfileService.htmlDecode(currentHit.intro || '')}\n              </Typography>\n            </div>\n          </Grid>\n          {currentHit.links.map((link, i) => {\n            if(!link.value || link.value === '') return null;\n            if(link.type === 'workchat') return null; // hide workchat\n            return (\n              <Grid item key={link._id} xs={12} style={{position: 'relative'}}>\n                <Button variant=\"text\" className={classes.button} key={link._id} href={link.url} rel=\"noopener\" target=\"_blank\">\n                  <div className={classNames(classes.contactIcon, \"fa fa-\" + link.icon)}></div>\n                  {ProfileService.htmlDecode(link.display) || ProfileService.htmlDecode(link.value) || ProfileService.htmlDecode(link.url)}\n                </Button>\n              </Grid>\n            )\n          })}\n          {canEdit && (\n            <Grid item xs={12} style={{position: 'relative'}}>\n              <Button variant=\"text\" className={classes.button} style={{color: theme.palette.secondary.main, fontWeight: 'bold'}}\n                      href={'/' + locale + '/' + orgTag + '/onboard/contacts/edit/' + currentHit.objectID}>\n                <div href={''} className={classNames(classes.contactIcon, \"fa fa-plus\")} style={{color: theme.palette.secondary.main}}></div>\n                <FormattedMessage id=\"profile.addContacts\"/>\n              </Button>\n            </Grid>\n            // <Grid item xs={12} style={{position: 'relative'}}>\n            //   <Button variant=\"text\" className={classes.button} style={{color: theme.palette.secondary.main, fontWeight: 'bold'}}\n            //           href={UrlService.createUrl(process.env.REACT_APP_HOST_BACKFLIP, '/onboard/links', orgTag, 'recordId=' + currentHit.objectID)}>\n            //     <div href={''} className={classNames(classes.contactIcon, \"fa fa-plus\")} style={{color: theme.palette.secondary.main}}></div>\n            //     <FormattedMessage id=\"profile.addContacts\"/>\n            //   </Button>\n            // </Grid>\n          )}\n        </Grid>\n        <Grid container item xs={12} sm={6} lg={9} className={classes.hashtagsPart}>\n          <Grid item xs={12} className={classes.minHeightPossible}>\n            {currentHit.hashtags && currentHit.hashtags.map((hashtag, i) => {\n              let displayedName = (hashtag.name_translated ? (hashtag.name_translated[locale] || hashtag.name_translated['en-UK']) || hashtag.name || hashtag.tag : hashtag.name || currentHit.tag)\n              return (\n                <Wings src={ProfileService.getPicturePath(hashtag.picture)}\n                        label={ProfileService.htmlDecode(displayedName)} key={hashtag.tag}\n                        onClick={(e) => this.handleReturnToSearch(e, {name: displayedName, tag: hashtag.tag})}\n                        className={(hashtag.class ? hashtag.class : 'notHighlighted')}/>\n              )\n            })}\n            {canEdit && (\n              <Wings label={this.props.intl.formatMessage({id: 'profile.addWings'})} className={'button'}\n                      onClick={() => {this.handleRedirectToEditWings(currentHit.objectID)}}/>\n              // <Wings label={this.props.intl.formatMessage({id: 'profile.addWings'})} className={'button'}\n              // onClick={() => {\n              //   window.location.href = UrlService.createUrl(process.env.REACT_APP_HOST_BACKFLIP, '/onboard/hashtags', orgTag, 'recordId=' + currentHit.objectID)\n              // }}/>\n            )}\n            <div style={{marginTop: 16}}>\n              <Typography variant=\"h5\" style={{padding: 8}}>\n                <FormattedMessage id={'profile.aboutMe'}/>\n              </Typography>\n              <div className={classes.aboutMe}>\n                {ProfileService.htmlDecode(currentHit.description || '')}\n              </div>\n            </div>\n          </Grid>\n        </Grid>\n      </Grid>\n    )\n  }\n}\n\nexport default inject('commonStore', 'organisationStore', 'authStore', 'recordStore', 'userStore')(\n  injectIntl(observer(\n    withStyles(styles, {withTheme: true})(ProfileLayout)\n  ))\n);\n","const LOGO_HEIGHT = 170;\n\nexport const styles = theme => ({\n  generalPart: {\n    position: 'relative',\n    [theme.breakpoints.down('sm')]: {\n      minHeight: 'unset'\n    },\n    [theme.breakpoints.up('sm')]: {\n      minHeight: 'calc(100vh - 166px)'\n    },\n    [theme.breakpoints.up('md')]: {\n      minHeight: 'calc(100vh - 350px)'\n    },\n    background: theme.palette.primary.dark,\n    padding: 16\n  },\n  hashtagsPart: {\n    position: 'relative',\n    background: 'white',\n    [theme.breakpoints.down('sm')]: {\n      minHeight: 'unset'\n    },\n    [theme.breakpoints.up('sm')]: {\n      minHeight: 'calc(100vh - 166px)'\n    },\n    [theme.breakpoints.up('md')]: {\n      minHeight: 'calc(100vh - 350px)'\n    },\n    padding: 16,\n  },\n  logoContainer: {\n    position: 'relative',\n    transform: 'translateY(-50%)',\n    top: 0,\n  },\n  logo: {\n    position: 'absolute',\n    transform: 'translateY(-50%)',\n    top: 0,\n    left: 0,\n    right: 0,\n    marginLeft: 'auto',\n    marginRight: 'auto',\n    width: LOGO_HEIGHT,\n    height: LOGO_HEIGHT,\n    '& img': {\n      width: '100%',\n      height: '100%',\n      borderRadius: '50%',\n      border: '9px solid white'\n    },\n  },\n  subheader: {\n    position: 'relative',\n    marginTop: (LOGO_HEIGHT / 2),\n    marginBottom: 16,\n  },\n  button: {\n    color: 'white',\n    wordBreak: 'break-all',\n    padding: '8px 24px',\n    '&:hover': {\n      color: 'white'\n    }\n  }\n  ,\n  buttonIcon: {\n    color: theme.palette.secondary.main\n  },\n  wings: {\n    display: 'inline-block',\n    color: 'white',\n    position: 'relative',\n  },\n  minHeightPossible: {\n    height: '-moz-min-content',\n    // eslint-disable-next-line\n    height: '-webkit-min-content',\n    // eslint-disable-next-line\n    height: 'min-content',\n  },\n  editButton: {\n    color: theme.palette.secondary.main,\n    marginLeft: 16\n  },\n  updateCoverButton: {\n    position: 'absolute',\n    top: -24,\n    right: 16,\n    transform: 'translateY(-100%)',\n  },\n  contactIcon: {\n    marginRight: 16,\n    position: 'relative',\n    textAlign: 'center',\n    width: 24,\n    fontSize: 24\n  },\n  returnButton: {\n    position: 'fixed',\n    zIndex: 9999,\n    margin: 16,\n    background: 'white',\n    color: theme.palette.secondary.main,\n    opacity: 0.7,\n    '&:hover': {\n      backgroundColor: 'white',\n      opacity: 1,\n    }\n  },\n  returnButtonSize: {\n    fontSize: 24,\n  },\n  profileContainerHide: {\n    position: 'fixed',\n    top: 0,\n    zIndex: 99999,\n    backgroundColor: 'white',\n    width: '100%',\n    '& ul': {\n      listStyleType: 'none',\n      padding: 0,\n      marginTop: 0,\n    },\n    animationName: 'popOut',\n    animationDuration: '.6s',\n    animationFillMode: 'forwards',\n  },\n  \n  name: {\n    marginLeft: 24,\n  },\n  aboutMe: {\n    padding: 8,\n  }\n});\n","import React from 'react'\nimport { withStyles, Chip } from '@material-ui/core';\nimport AlgoliaService from '../../services/algolia.service';\nimport { inject, observer } from 'mobx-react';\nimport { observe } from 'mobx';\n\nconst styles = theme => ({\n  suggestionsContainer: {\n    textAlign: 'left',\n    maxHeight: 112, // 48 * 2 + 8 + 8\n    overflow: 'hidden',\n    padding: '8px 0px',\n    marginLeft: '-8px',\n  },\n  suggestion: {\n    margin: 8,\n    paddingRight: 0,\n    background: 'white',\n    color: theme.palette.primary.dark,\n    '&:hover': {\n      background: 'rgb(220,220,220)'\n    },\n    opacity: 0,\n    animation: 'easeIn .6s',\n    animationFillMode: 'forwards',\n  },\n  '@keyframes easeIn': {\n    from: { opacity: 0 },\n    to: { opacity: 1 }\n  },\n  suggestionCount: {\n    color: 'rgb(190,190,190)',\n    borderRadius: '50%',\n    width: 32,\n    height:32,\n    textAlign: 'center',\n    lineHeight: '32px'\n  },\n  suggestionLabel: {\n    marginRight: 8,\n  }\n});\n\nclass SearchSuggestions extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      facetHits: [],\n      observer: () => {}\n    };\n\n    this.fetchSuggestions = this.fetchSuggestions.bind(this);\n  }\n\n  componentDidMount() {\n    AlgoliaService.setAlgoliaKey(this.props.commonStore.algoliaKey);\n    this._ismounted = true;\n    this.fetchSuggestions(this.props.filters, this.props.query);\n\n    this.setState({observer: observe(this.props.commonStore, 'algoliaKey', (change) => {\n      AlgoliaService.setAlgoliaKey(this.props.commonStore.algoliaKey);\n      this.fetchSuggestions(this.props.filters, this.props.query);\n    })});\n  }\n\n  componentWillUnmount() {\n    this.state.observer();\n    this._ismounted = false;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if(nextProps.filters && this._ismounted) {\n      this.fetchSuggestions(nextProps.filters, nextProps.query);\n    }\n  }\n\n  fetchSuggestions(filters, query) {\n    AlgoliaService.fetchFacetValues(null, false, filters, query)\n    .then((res) => {\n      if(!res) return;\n      this.setState({facetHits: res.facetHits});\n    })\n    .catch();\n  }\n\n  shouldDisplaySuggestion(tag) {\n    return (this.props.filters.search(tag) === -1);\n  }\n\n  render() {\n    const {facetHits} = this.state;\n    const {classes, addToFilters} = this.props;\n\n    return (\n      <div className={classes.suggestionsContainer} >\n        {facetHits.map((item, i) => {\n          if (this.shouldDisplaySuggestion(item.value)){\n            return (\n              <Chip key={i} \n                    component={ (props)=>\n                              <div {...props}>\n                                <div className={classes.suggestionLabel}>{item.value}</div>\n                                <div className={classes.suggestionCount}>{item.count}</div>\n                              </div>\n                    }\n                    onClick={(e) => addToFilters(e, { name: item.value, tag: item.value })} \n                    className={classes.suggestion} \n                    style={{animationDelay: (i*0.05) +'s'}} />\n            );\n          }else {\n            return null;\n          }\n        })}\n      </div>\n    );\n  }\n}\n\nexport default inject('commonStore')(\n  observer(withStyles(styles)(SearchSuggestions))\n);\n","import React from 'react'\nimport {Grid, Button, CircularProgress, Typography, withStyles} from '@material-ui/core';\nimport {FormattedMessage} from 'react-intl';\nimport AlgoliaService from '../../services/algolia.service';\nimport { inject, observer } from 'mobx-react';\nimport { observe } from 'mobx';\n\nimport chat from '../../resources/images/chat.png';\n\nconst styles = theme => ({\n  image: {\n    width: '47rem',\n    height: 'auto',\n    [theme.breakpoints.down('xs')]: {\n      width: '24rem',\n      height: 'auto',\n    },\n  },\n  text: {\n    textAlign: 'center',\n    margin: 16,\n    color: theme.palette.primary.dark,\n    fontWeight: '600'\n  }\n});\n\nclass SearchResults extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hits: [],\n      page: 0,\n      showNoResult: false,\n      loadInProgress: true,\n      hideShowMore: false,\n      hitsAlreadyDisplayed: 0,\n      observer: () => {}\n    };\n  }\n  \n  componentDidMount() {\n    AlgoliaService.setAlgoliaKey(this.props.commonStore.algoliaKey);\n    this.fetchHits(this.props.filters, this.props.query, null, null);\n    \n    this.setState({observer : observe(this.props.commonStore, 'algoliaKey', (change) => {\n        AlgoliaService.setAlgoliaKey(this.props.commonStore.algoliaKey);\n        this.fetchHits(this.props.filters, this.props.query, null, null);\n    })});\n  }\n  \n  componentWillUnmount() {\n    this.state.observer();\n  }\n  \n  fetchHits = (filters, query, facetFilters, page) => {\n    AlgoliaService.fetchHits(filters, query, facetFilters, page)\n      .then((content) => {\n      \n      if(!content || !content.hits || content.hits.length === 0) this.setState({showNoResult: true, hideShowMore: true});\n        this.setState({hitsAlreadyDisplayed: Math.min((content.hitsPerPage * (content.page)), content.nbHits)});\n      if(content.page === (content.nbPages-1)) this.setState({hideShowMore: true});\n      if(page) this.setState({hits: this.state.hits.concat(content.hits)}, this.endTask());\n        else this.setState({hits: content.hits}, this.endTask());\n        \n    }).catch((e) => {this.setState({hits: []})});\n  }\n  \n  endTask = () => {\n    this.setState({loadInProgress: false});\n  }\n  \n  handleShowMore = (e) => {\n    this.setState({page: this.state.page+1, loadInProgress: true}, () => {\n      this.fetchHits(this.props.filters, this.props.query, null, this.state.page);\n    });\n  }\n\n  shuffleArray = (array) => {\n    let arrayOut = [];\n    while(array.length !== 0) {\n      let randomIndex = Math.floor(Math.random() * array.length);\n      arrayOut.push(array[randomIndex]);\n      array.splice(randomIndex, 1);\n    }\n    return arrayOut;\n  }\n  \n  \n  render() {\n    const {hits, loadInProgress, hideShowMore, hitsAlreadyDisplayed, showNoResult} = this.state;\n    const {addToFilters, handleDisplayProfile, classes, HitComponent, filters, query} = this.props;\n    let hitsResult = hits;\n    if( (filters === 'type:person') && !query) {\n      // The search results aren't filtered, we can randomize them.\n      hitsResult = this.shuffleArray(hitsResult);\n    }\n\n    return (\n      <div className={classes.hitList}>\n        <ul>\n          {hitsResult.map((hit, i) => {\n          return(\n            <li key={i} style={{WebkitAnimationDelay: (0.2*(i-hitsAlreadyDisplayed))+'s', animationDelay: (0.2*(i-hitsAlreadyDisplayed))+'s'}}>\n              <Grid item xs={12} sm={8} md={6} lg={4} className={classes.cardMobileView} >\n                <HitComponent hit={hit} addToFilters={addToFilters} handleDisplayProfile={handleDisplayProfile} />\n                </Grid>\n              </li>\n            );\n          })}\n          {!hideShowMore && (\n            <li>\n              <Grid item xs={12} sm={8} md={6} lg={4} className={classes.cardMobileView} container justify={\"center\"} alignContent={\"center\"}>\n                {loadInProgress && (\n                <CircularProgress color=\"secondary\" />\n                )}\n                {!loadInProgress && (\n                <Button onClick={(e) => this.handleShowMore(e)}><FormattedMessage id=\"search.showMore\" /></Button>\n                )}\n              </Grid>\n            </li>\n          )}\n          {showNoResult && (\n            <Grid container item justify={\"center\"} alignItems={'center'} direction={'column'}>\n              <Grid item>\n                <Typography variant=\"h4\" className={classes.text} >\n                  <FormattedMessage id={\"nobody.searchList\"}/>\n                </Typography>\n              </Grid>\n              <Grid item>\n                <img src={chat}  alt={'chat'} className={classes.image}/>\n              </Grid>\n            </Grid>\n          )}\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default inject('commonStore')(\n  observer(\n    withStyles(styles)(SearchResults)\n  )\n);\n","import React from 'react';\nimport { withStyles} from '@material-ui/core';\n\n\nconst styles = theme => ({\n  dispo: {\n    width: 35,\n    height: 35,\n    border: '6px solid white',\n    borderRadius: 30,\n    backgroundColor: '#C2CACF',\n    zIndex: 9000,\n    [theme.breakpoints.down('xs')]: {\n      width: 30,\n      height: 30,\n    }\n  }\n});\n\nclass Availability extends React.Component {\n  render() {\n    const {classes} = this.props;\n  \n    return( <div className={`${classes.dispo} ${this.props.available}`}/> )\n  }\n}\n\nexport default withStyles(styles)(Availability);\n\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Grid, withStyles, Typography, IconButton, CardActions, CardContent, CardHeader, Card, Tooltip} from '@material-ui/core';\nimport withWidth from '@material-ui/core/withWidth';\nimport {inject, observer} from 'mobx-react';\n\nimport '../../resources/stylesheets/font-awesome.min.css';\nimport Availability from '../availabilityToggle/Availability';\nimport Wings from '../utils/wing/Wing';\nimport defaultPicture from '../../resources/images/placeholder_person.png';\nimport ProfileService from '../../services/profile.service';\nProfileService.setExtraLinkLimit(5);\n\n\nconst styles = theme => ({\n  logo: {\n    width: 240,\n    height: 240,\n    marginBottom: -38,\n    marginLeft: -62,\n    backgroundColor: 'white',\n    [theme.breakpoints.down('xs')]: {\n      width: 190,\n      height: 190,\n      marginLeft: -49,\n      marginBottom: -25,\n    },\n  },\n  name: {\n    '& span em': {\n      backgroundColor: theme.palette.primary.main,\n      borderRadius: 30,\n      color: 'white',\n      fontWeight: '600',\n      paddingLeft: 2,\n      paddingRight: 2,\n    },\n    display: 'block',\n  },\n  intro: {\n    maxHeight: '3em',\n    textOverflow: 'ellipsis',\n    overflow: 'hidden',\n  },\n  titleSmallestView: {\n    marginLeft: -2,\n    paddingTop: 16,\n    [theme.breakpoints.down('xs')]: {\n      fontSize: '1.2rem!important',\n      marginLeft: -6,\n    },\n  },\n  wings: {\n    display: 'inline-block',\n    color: 'white',\n    position: 'relative',\n    marginTop: '22px!important',\n    marginBottom: 4,\n    [theme.breakpoints.down('xs')]: {\n      marginTop: '18px!important',\n    }\n  },\n  wingsContainer: {\n    minHeight: 30\n  },\n  fullWidth: {\n    width: '100%',\n    cursor: 'pointer'\n  },\n  cardHeader: {\n    maxHeight: 138,\n    [theme.breakpoints.down('xs')]: {\n      maxHeight: 100,\n    }\n  },\n  contact: {\n    [theme.breakpoints.up('xs')]: {\n      margin: 2,\n    }\n  },\n  contactField: {\n    marginLeft: 100,\n    paddingLeft: 82,\n    minHeight: 40,\n    backgroundColor: theme.palette.primary.dark,\n    [theme.breakpoints.down('xs')]: {\n      minHeight: 35,\n      marginLeft: 75,\n      paddingLeft: 72,\n    },\n  },\n  contactButton: {\n    width: 37,\n    height: 37,\n    [theme.breakpoints.down('xs')]: {\n      width: 30,\n      height: 30,\n    },\n    '&::before': {\n      position: 'absolute',\n      left: 0,\n      right: 0,\n      margin: 'auto',\n    },\n    '&:hover': {\n      backgroundColor: '#41424F',\n    }\n  },\n  dispo: {\n    position: 'absolute',\n    [theme.breakpoints.down('xs')]: {\n      marginLeft: 104,\n      marginTop: 133,\n    },\n    marginLeft: 132,\n    marginTop: 172,\n  },\n  available: {\n    backgroundColor: 'green',\n  },\n  unavailable: {\n    backgroundColor: 'red',\n  },\n  backgroundLogo: {\n    backgroundRepeat: 'no-repeat',\n    backgroundPositionX: 'right',\n    backgroundPositionY: 'bottom',\n    borderRadius: '50%',\n    border: '8px solid white',\n    backgroundSize: '200px 200px',\n    [theme.breakpoints.down('xs')]: {\n      backgroundSize: '150px 150px',\n    }\n  }\n})\n\nclass CardProfile extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n      locale: this.props.commonStore.getCookie('locale') || this.props.commonStore.locale\n    }\n  }\n  \n  getLogoSize = () => {\n    switch (this.props.width) {\n      case 'xs':\n        return '150x150';\n      default:\n        return '200x200';\n    }\n  }\n  \n  render() {\n    const {classes, hit, addToFilters, handleDisplayProfile} = this.props;\n    ProfileService.transformLinks(hit);\n    ProfileService.makeHightlighted(hit);\n    ProfileService.orderHashtags(hit);\n    \n    return (\n      <Card className={classes.fullWidth} key={hit.objectID} >\n        <Grid item container>\n          <CardHeader\n            onClick={(e) => handleDisplayProfile(e, hit)}\n            avatar={\n              <Grid item container>\n                <Grid item style={{backgroundImage: `url(${ProfileService.getPicturePathResized(hit.picture, 'person ', this.getLogoSize()) || defaultPicture})`}} className={`${classes.logo} ${classes.backgroundLogo}`}/>\n                {((hit.personAvailability) && (hit.personAvailability !== 'unspecified')) ? <Grid item className={classes.dispo}>\n                  <Availability available={`${classes[hit.personAvailability]}`}/>\n                </Grid> : ''}\n              </Grid>\n            }\n            title={\n              <Typography variant=\"h4\" className={`${classes.name} ${classes.titleSmallestView}`} gutterBottom>\n                <span dangerouslySetInnerHTML={{__html: ProfileService.htmlDecode(((hit._highlightResult && hit._highlightResult.name) ? hit._highlightResult.name.value : null) || hit.name) || hit.tag}}></span>\n              </Typography>\n            }\n            subheader={\n              <Typography variant=\"body1\" className={`${classes.name} ${classes.intro}`} gutterBottom>\n                <span dangerouslySetInnerHTML={{__html: ProfileService.htmlDecode(((hit._snippetResult && hit._snippetResult.intro) ? hit._snippetResult.intro.value : null) || hit.intro || '')}}></span>\n              </Typography>\n            }\n            className={classes.cardHeader}\n          />\n        </Grid>\n        <Grid item container className={classes.contactField}>\n          <CardActions disableActionSpacing>\n            <Grid item container>\n              {hit.links && hit.links.map((link, i) => {\n                if (!link.value || link.value === '') return null;\n                if(link.type === 'workchat') return null; // hide workchat\n                if (link.class !== 'extraLink') {\n                  return (\n                    <Grid item key={link._id} className={classes.contact}>\n                      <Tooltip title={ProfileService.htmlDecode(link.display) || ProfileService.htmlDecode(link.value) || ProfileService.htmlDecode(link.url)}>\n                        <IconButton href={link.url} rel=\"noopener\" target=\"_blank\" className={classes.contactButton + \" fa fa-\" + link.icon}/>\n                      </Tooltip>\n                    </Grid>\n                  )\n                } else {\n                  return null;\n                }\n              })}\n            </Grid>\n          </CardActions>\n        </Grid>\n        <Grid container item className={classes.wingsContainer}>\n          <CardContent>\n            <Grid container className={classes.wings}>\n              {hit.hashtags && hit.hashtags.map((hashtag, i) => {\n                let displayedName = (hashtag.name_translated ? (hashtag.name_translated[this.state.locale] || hashtag.name_translated['en-UK']) || hashtag.name || hashtag.tag : hashtag.name || hit.tag)\n                return (\n                  <Wings src={ProfileService.getPicturePath(hashtag.picture)} key={i}\n                         label={ProfileService.htmlDecode(displayedName)}\n                         onClick={(e) => addToFilters(e, {name: displayedName, tag: hashtag.tag})}\n                         className={(hashtag.class ? hashtag.class : 'notHighlighted')}/>\n                )\n              })}\n            </Grid>\n          </CardContent>\n        </Grid>\n      </Card>\n    );\n  }\n}\n\nCardProfile.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default inject('commonStore')(\n  observer(\n    withWidth()(withStyles(styles)(CardProfile))\n  )\n);\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport Slide from '@material-ui/core/Slide';\nimport { Redirect } from 'react-router-dom';\nimport { withStyles, Typography, Hidden } from '@material-ui/core';\nimport { inject, observer } from \"mobx-react\";\nimport { FormattedMessage } from 'react-intl';\n\nimport ColleagueImg from '../../../resources/images/colleagues.png';\nimport ProfileService from '../../../services/profile.service';\n\nfunction Transition(props) {\n  return <Slide direction=\"up\" {...props} />;\n}\n\nconst styles = theme => ({\n  root: {\n    textAlign: 'center',\n  },\n  picture: {\n    width: '60%',\n    height: 'auto',\n    marginBottom: 40,\n  },\n  text: {\n    margin: 0,\n    padding:0,\n    paddingTop: 16,\n    textAlign: 'center'\n  },\n  titleEmoji: {\n    marginLeft: 16\n  },\n  title: {\n    textAlign: 'center',\n    [theme.breakpoints.down('sm')] : {\n      fontSize: '4.8rem',\n    },\n    [theme.breakpoints.down('xs')]: {\n      fontSize: '3rem',\n    }\n  },\n  actions: {\n    justifyContent: 'center', \n    margin: 0,\n    padding: 24,\n  }\n});\n\nclass OnboardCongratulation extends React.Component {\n  state = {\n    open: this.props.isOpen,\n    redirectTo: null,\n  };\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({open: nextProps.isOpen})\n  }\n\n  handleOnboardEnd = () => {\n      this.setState({ redirectTo: '/' + this.props.commonStore.locale + '/' + this.props.organisationStore.values.orgTag });\n  }\n\n  render() {\n    const {redirectTo} = this.state;\n    const {classes} = this.props;\n\n    if (redirectTo && window.location.pathname !== redirectTo) return (<Redirect to={redirectTo} />);\n\n    return (\n      <React.Fragment>\n        <Dialog\n          open={this.state.open}\n          TransitionComponent={Transition}\n          keepMounted\n          fullWidth\n          maxWidth={'sm'}\n          onClose={this.handleOnboardEnd}\n          className={classes.root}\n          aria-labelledby=\"alert-dialog-slide-title\"\n          aria-describedby=\"alert-dialog-slide-description\"\n        >\n          <DialogContent style={{overflow: 'hidden'}} >\n            <img src={ColleagueImg} alt=\"Colleagues\" className={classes.picture} />\n            <Typography variant=\"h1\" className={classes.title}>\n              <FormattedMessage id=\"onboard.end.title\" />\n            </Typography>\n            <DialogContentText id=\"alert-dialog-slide-description\">\n              <Typography variant=\"h6\" className={classes.text}>\n                <FormattedMessage id=\"onboard.end.text\" values={{organisationName: this.props.organisationStore.values.organisation.name}} />\n              </Typography>\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions className={classes.actions}>\n            <Button onClick={this.handleOnboardEnd} color=\"secondary\">\n              <FormattedMessage id=\"onboard.end.cta\" values={{organisationName: this.props.organisationStore.values.organisation.name}} />\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default inject('commonStore', 'organisationStore')(\n  observer(\n    withStyles(styles, { withTheme: true })(OnboardCongratulation)\n  )\n);","import React, {Component} from 'react';\nimport { inject, observer } from \"mobx-react\";\nimport { withStyles } from '@material-ui/core';\nimport AddToHomescreenIOs from '../../../resources/icons/addToHomescreenIOs.png'\nimport { FormattedMessage } from 'react-intl';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\n\nconst styles = theme => ({\n  popupContainer: {\n    position: 'fixed',\n    left:8,\n    right:8,\n    margin: 'auto',\n    marginBottom: 24,\n    maxWidth: 'calc(100% - 16px)',\n    backgroundColor: 'white',\n    zIndex: 999999,\n    padding: 16,\n    bottom: 0,\n    boxShadow: '0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)',\n    textAlign: 'center',\n  },\n  triangle : {\n      position: 'absolute',\n      left:0,\n      right:0,\n      margin: 'auto',\n      top: '100%',\n      width: 0,\n      height: 0,\n      borderLeft: '20px solid transparent',\n      borderRight: '20px solid transparent',\n      borderTop: '20px solid white',\n      clear: 'both'\n  },\n  shareIcon: {\n    height: 23,\n    marginBottom: -5\n  }\n});\n\nclass PromptIOsInstall extends Component {\n\n  constructor() {\n    super();\n    this.state = {\n      canDisplayPopup: false\n    };\n  }\n\n  componentDidMount() {\n    if(this.isIOs() && !this.isInStandaloneMode()) {\n      setTimeout(() => { this.setState({canDisplayPopup: true})}, 10000);\n    }\n  }\n\n\n  isIOs = () => {\n    const userAgent = window.navigator.userAgent.toLowerCase();\n    return /iphone|ipad|ipod/.test( userAgent );\n  }\n\n  isInStandaloneMode = () => ('standalone' in window.navigator) && (window.navigator.standalone);\n\n  handleClickAway = () => {\n    this.setState({canDisplayPopup: false});\n  }\n\n  render() {\n    const {canDisplayPopup} = this.state;\n    const {classes} = this.props;\n\n    if(!canDisplayPopup) return null;\n\n    return (\n      <ClickAwayListener onClickAway={this.handleClickAway}>\n        <div className={classes.popupContainer}>\n          <FormattedMessage id=\"pwa.install.ios\" values={{img: <img className={classes.shareIcon} src={AddToHomescreenIOs} alt='Share button' />}} />\n          <div className={classes.triangle}></div>\n        </div>\n      </ClickAwayListener>\n    );\n  }\n}\n\nexport default inject('commonStore')(\n  observer(\n    withStyles(styles, { withTheme: true })(PromptIOsInstall)\n  )\n);","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport Slide from '@material-ui/core/Slide';\nimport { Redirect } from 'react-router-dom';\nimport { withStyles, Typography, Hidden } from '@material-ui/core';\nimport { inject, observer } from \"mobx-react\";\nimport { FormattedMessage } from 'react-intl';\nimport { Add, Search } from '@material-ui/icons';\nimport ReactGA from 'react-ga';\n\nimport Wings from '../wing/Wing';\nimport ProfileService from '../../../services/profile.service';\nimport SlackService from '../../../services/slack.service';\n\nReactGA.initialize(process.env.REACT_APP_GOOGLE_ANALYTICS_ID);\n\nfunction Transition(props) {\n  return <Slide direction=\"up\" {...props} />;\n}\n\nconst styles = theme => ({\n  root: {\n    textAlign: 'center',\n  },\n  picture: {\n    width: '60%',\n    height: 'auto',\n    marginBottom: 32,\n  },\n  text: {\n    margin: 0,\n    padding:0,\n    paddingTop: 16,\n    textAlign: 'center'\n  },\n  content: {\n    padding: 0,\n  },\n  titleEmoji: {\n    marginLeft: 16\n  },\n  title: {\n    marginTop: -8,\n    marginBottom: -8,\n    textAlign: 'center',\n    [theme.breakpoints.down('sm')] : {\n      fontSize: '4.8rem',\n    },\n    [theme.breakpoints.down('xs')]: {\n      fontSize: '3rem',\n    }\n  },\n  actions: {\n    margin: 0,\n    padding: 16,\n    display: 'block'\n  },\n  buttons: {\n    height: 'unset',\n  }\n});\n\nclass AddWingPopup extends React.Component {\n  state = {\n    open: this.props.isOpen,\n    redirectTo: null,\n    wingsPopulated: [],\n    locale: this.props.commonStore.getCookie('locale') || this.props.commonStore.locale\n  };\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({open: nextProps.isOpen})\n  }\n\n  handleClose = () => {\n    ReactGA.event({category: 'User', action: 'QRCode - Search'});\n    SlackService.notify('#wingzy-events', 'QRCode - Search - '+\n                                          (this.state.wingsPopulated[0] ? this.state.wingsPopulated[0].tag : '')+\n                                          ' - by '+this.props.recordStore.values.record.name);\n    this.setState({open: false});\n  }\n\n  componentDidMount() {\n    this.populateWingsToAdd();\n  }\n\n  populateWingsToAdd = async () => {\n    let wingsPopulated = [];\n    this.props.recordStore.setOrgId(this.props.organisationStore.values.organisation._id);\n\n    await this.asyncForEach(this.props.wingsToAdd, async (wing) => {\n        this.props.recordStore.setRecordTag('#' + wing);\n        await this.props.recordStore.getRecordByTag()\n        .then((hashtagToAdd => {\n          wingsPopulated.push(hashtagToAdd);\n        })).catch(e => {console.log(e)});\n    });\n\n    this.setState({wingsPopulated: wingsPopulated});\n  }\n\n  recordHasHashtag = (tag) => {\n    let resp =  (this.props.recordStore.values.record.hashtags.find(hashtag => hashtag.tag === tag) ? true: false);\n    return resp;\n  }\n\n  async asyncForEach(array, callback) {\n    for (let index = 0; index < array.length; index++) {\n      await callback(array[index], index, array);\n    }\n  }\n\n  handleAddWing = async () => {\n    ReactGA.event({category: 'User', action: 'QRCode - Add Wings'});\n    SlackService.notify('#wingzy-events', 'QRCode - Search - '+\n                                          (this.state.wingsPopulated[0] ? this.state.wingsPopulated[0].tag : '')+\n                                          ' - by '+this.props.recordStore.values.record.name);    let record = this.props.recordStore.values.record;\n    let wingsToAdd = [];\n    this.state.wingsPopulated.forEach(wing => {\n      if(!this.recordHasHashtag(wing.tag)) {\n        wingsToAdd.push(wing);\n      }\n    })\n    record.hashtags = record.hashtags.concat(wingsToAdd);\n    await this.props.recordStore.updateRecord(['hashtags']);\n    this.setState({ redirectTo: '/' + this.props.commonStore.locale + '/' + this.props.organisationStore.values.orgTag + '/' + this.props.recordStore.values.record.tag });\n  }\n\n  render() {\n    const {redirectTo, wingsPopulated} = this.state;\n    const {classes} = this.props;\n    const {organisation} = this.props.organisationStore.values;\n\n    if (redirectTo && window.location.pathname !== redirectTo) return (<Redirect to={redirectTo} />);\n\n    return (\n      <React.Fragment>\n        <Dialog\n          open={this.state.open}\n          TransitionComponent={Transition}\n          keepMounted\n          fullWidth\n          maxWidth={'sm'}\n          onClose={this.handleClose}\n          className={classes.root}\n          aria-labelledby=\"alert-dialog-slide-title\"\n          aria-describedby=\"alert-dialog-slide-description\"\n        >\n          <DialogContent style={{overflow: 'hidden', padding: 16}} >\n            <Typography variant=\"h1\" className={classes.title}>\n              <FormattedMessage id=\"onboard.end.title\" />\n              <Hidden xsDown>\n                <img src={ProfileService.getEmojiUrl('🎉')} alt=\"congratulation\" className={classes.titleEmoji}/>\n              </Hidden>\n            </Typography>\n            <DialogContentText id=\"alert-dialog-slide-description\" className={classes.content}>\n              <Typography variant=\"h6\" className={classes.text}>\n                <FormattedMessage id=\"action.addWings.text\" values={{wingsCount: wingsPopulated.length}} />\n                <br/>\n                <div className={classes.wingsList}>\n                {wingsPopulated.map( (wing, i) => {\n                  let displayedName = (wing.name_translated ? (wing.name_translated[this.state.locale] || wing.name_translated['en-UK']) || wing.name || wing.tag : wing.name || wing.tag)\n                  return(\n                  <Wings src={ProfileService.getPicturePath(wing.picture)} key={i}\n                    label={ProfileService.htmlDecode(displayedName)}\n                    className={'bigWing'}\n                    />);\n                })}\n                </div>\n              </Typography>\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions className={classes.actions}>\n            <Button onClick={this.handleAddWing} color=\"secondary\" variant=\"contained\" size=\"medium\" className={classes.buttons} >\n                <Add />\n                <FormattedMessage id=\"action.addWings.add\" />\n            </Button>\n            <Hidden smUp>\n                <br/><br/>\n            </Hidden>\n            <Button onClick={this.handleClose} color=\"secondary\" variant=\"contained\"  size=\"medium\" className={classes.buttons}  >\n                <Search />\n                <FormattedMessage id=\"action.addWings.search\" values={{organisationName: organisation.name}}/>\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default inject('commonStore', 'organisationStore', 'recordStore')(\n  observer(\n    withStyles(styles, { withTheme: true })(AddWingPopup)\n  )\n);","import React from 'react'\nimport { Grid, withStyles } from '@material-ui/core';\nimport { inject, observer } from \"mobx-react\";\nimport Header from '../components/header/Header';\nimport { Redirect } from \"react-router-dom\";\nimport SearchField from '../components/algolia/SearchField';\nimport withWidth, { isWidthUp, isWidthDown } from '@material-ui/core/withWidth';\nimport { styles } from './SearchPage.css';\nimport ProfileLayout from \"../components/profile/ProfileLayout\";\nimport Banner from '../components/utils/banner/Banner';\nimport SearchSuggestions from '../components/algolia/SearchSuggestions';\nimport SearchResults from '../components/algolia/SearchResults';\nimport Card from '../components/card/CardProfile';\nimport ReactGA from 'react-ga';\nimport OnboardCongratulation from '../components/onboard/steps/OnboardCongratulation';\nimport PromptIOsInstall from '../components/utils/prompt/PromptIOsInstall';\nimport AddWingPopup from '../components/utils/addWing/AddWingPopup';\nReactGA.initialize(process.env.REACT_APP_GOOGLE_ANALYTICS_ID);\n\nclass SearchPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      locale: this.props.commonStore.getCookie('locale') || this.props.commonStore.locale,\n      filters: 'type:person',\n      query: '',\n      newFilter: {},\n      displayedHit: null,\n      resultsType: this.props.resultsType || 'person',\n      shouldUpdateUrl: false,\n      shouldDisplayHitResults: true,\n      hashtagsFilter: this.getHashtagsFilter(),\n      actionInQueue: this.getActionInQueue()\n    };\n  }\n\n  componentDidMount() {\n    ReactGA.pageview(window.location.pathname);\n    this.props.history.listen((location, action) => ReactGA.pageview(window.location.pathname));\n    if(this.state.hashtagsFilter.length > 0) this.addHashtagsToSearch(this.state.hashtagsFilter);\n  }\n\n  addHashtagsToSearch = async (hashtags) => {\n    let newFilters = [];\n    hashtags.forEach(hashtag => {\n      newFilters.push({label: hashtag, value: '#' + hashtag});\n      setTimeout(()=> {this.setState({newFilter: {label: hashtag, value: '#' + hashtag}}) }, 50*newFilters.length);\n    });\n  }\n\n  addToFilters = (e, element, shouldAwaitToUpdateLayout) => {\n    this.setState({ newFilter: { label: element.name, value: element.tag } });\n    if (this.state.resultsType === 'profile') {\n      if(shouldAwaitToUpdateLayout) {\n        setTimeout(function() {this.setState({ resultsType: 'person', displayedHit: null, shouldUpdateUrl: true });}.bind(this), 500);\n      } else {\n        this.setState({ resultsType: 'person', displayedHit: null, shouldUpdateUrl: true });\n      }\n    }\n  }\n\n  updateFilters = (selectedOptions) => {\n    if(!selectedOptions) return;\n    ReactGA.event({category: 'Search',action: 'Perform search'});\n    this.setState({shouldDisplayHitResults: false});\n    let newFilters = 'type:person';\n    let newQuery = '';\n\n    selectedOptions.forEach(option => {\n      if(option.value.charAt(0) !== '#' && option.value.charAt(0) !== '@') newQuery += ((newQuery !== '') ? ' ' : '') + option.label;\n      else if (option.value.charAt(0) === '#') newFilters += ' AND hashtags.tag:' + option.value;\n      else if (option.value.charAt(0) === '@') newFilters += ' AND tag:' + option.value;\n    });\n\n    this.setState({ filters: newFilters, newFilter: {}, query: newQuery }, () => {\n      this.setState({shouldDisplayHitResults: true});\n    });\n  }\n\n  getSearchBarWidth = () => {\n    if (isWidthUp('lg', this.props.width)) return (4 / 12) * 100 + '%';\n    else if (isWidthUp('md', this.props.width)) return (6 / 12) * 100 + '%';\n    else if (isWidthUp('sm', this.props.width)) return (8 / 12) * 100 + '%';\n    else if (isWidthUp('xs', this.props.width)) return 'calc(100% - 32px)';\n    return null;\n  }\n\n  handleDisplayProfile = (e, hit) => {\n    ReactGA.event({category: 'User',action: 'Display profile'});\n    this.setState({resultsType: 'profile', displayedHit: hit});\n  }\n\n  handleReturnToSearch = () => this.setState({ resultsType: 'person', displayedHit: null, shouldUpdateUrl: true});\n\n  shouldSetRootUrl = (rootUrl) => {\n    return (  this.state.shouldUpdateUrl &&\n              this.state.resultsType === 'person' &&\n              (window.location.pathname !== rootUrl) &&\n              (window.location.pathname !== rootUrl + '/congrats'));\n  }\n\n  getHashtagsFilter = () => {\n    let wings =  this.props.commonStore.getCookie('hashtagsFilter');\n    this.props.commonStore.removeCookie('hashtagsFilter');\n    if(wings) {\n      return wings.split(',');\n    } else {\n      return [];\n    }\n  }\n\n  getActionInQueue = () => {\n    let action = this.props.commonStore.getCookie('actionInQueue');\n    this.props.commonStore.removeCookie('actionInQueue');\n    return action\n  }\n\n  render() {\n    const { shouldDisplayHitResults, filters, newFilter, shouldUpdateUrl, query, hashtagsFilter, actionInQueue } = this.state;\n    const { classes } = this.props;\n\n    let profileTag = (this.props.match.params ? this.props.match.params.profileTag : null) || ( (actionInQueue && actionInQueue.charAt(0) === '@') ? actionInQueue : null);\n    const { locale } = this.props.commonStore;\n    const orgTag = this.props.organisationStore.values.orgTag || this.props.organisationStore.values.organisation.tag;\n\n    let resultsType = ((profileTag && (profileTag.charAt(0) === '@') && !shouldUpdateUrl) ? 'profile' : null) || this.state.resultsType;\n    let displayedHit = ((profileTag && !shouldUpdateUrl) ? (this.state.displayedHit || { tag: profileTag }) : null) || this.state.displayedHit;\n    let rootUrl = '/' + locale + '/' + orgTag ;\n    let searchBarWidth = this.getSearchBarWidth();\n    let redirectTo, showCongratulation;\n\n    //if (profileTag && profileTag.charAt(0) !== '@') redirectTo = '/' + locale + '/' + orgTag;\n    if(profileTag === 'congrats') {\n      profileTag = null;\n      redirectTo = null;\n      resultsType = 'person';\n      showCongratulation = true;\n    }\n    if (redirectTo) {\n      return (<Redirect to={redirectTo} />);\n    }\n\n    return (\n      <div>\n        <Header handleDisplayProfile={this.handleDisplayProfile}/>\n        <main>\n          {this.shouldSetRootUrl(rootUrl) && (<Redirect to={rootUrl} />)}\n          <Grid container direction={'column'} alignItems={'center'}>\n            \n            <div  style={{  width: ((((isWidthDown('sm', this.props.width)))) ? '75%' : searchBarWidth),\n                            marginRight: ((((isWidthDown('sm', this.props.width)))) ? 16 : '') }} \n                  className={classes.searchBar} > \n              <SearchField updateFilters={this.updateFilters} newFilter={newFilter}/>\n            </div>\n\n            <Grid container item alignItems={\"stretch\"} >\n                  <Banner style={{filter: 'brightness(90%)'}}>\n                    <div style={{position:'relative', height: 56}} ></div>\n                    <div style={{ width: searchBarWidth }} className={classes.suggestionsContainer}>\n                      {shouldDisplayHitResults && (\n                        <SearchSuggestions  addToFilters={this.addToFilters} filters={filters} query={query} />\n                      )}\n                    </div>\n                  </Banner>\n            </Grid>\n\n            {shouldDisplayHitResults && (\n              <Grid container direction={\"column\"} justify={\"space-around\"} alignItems={\"center\"}>\n                <SearchResults addToFilters={this.addToFilters} handleDisplayProfile={this.handleDisplayProfile} \n                                      classes={classes} HitComponent={Card} filters={filters} query={query}/>\n              </Grid>\n            )}\n\n            {resultsType === 'profile' && (\n                <ProfileLayout hit={displayedHit} addToFilters={this.addToFilters} className={classes.profileContainer}\n                    handleReturnToSearch={this.handleReturnToSearch}/>\n            )}\n\n          </Grid>\n\n          {showCongratulation && (\n            <OnboardCongratulation isOpen={showCongratulation} />\n          )}\n\n          {hashtagsFilter.length > 0 && (actionInQueue === 'add') && (\n            <AddWingPopup wingsToAdd={hashtagsFilter} isOpen={true} />\n          )}\n        </main>\n        <PromptIOsInstall />\n      </div>\n    );\n  }\n}\n\nexport default inject('commonStore', 'organisationStore')(\n  observer(\n    withWidth()(withStyles(styles)(SearchPage))\n  )\n);\n","import React from 'react'\nimport { withStyles, Button, Hidden, Typography } from '@material-ui/core';\nimport { inject, observer } from \"mobx-react\";\nimport classNames from 'classnames';\nimport { observe } from 'mobx';\nimport Wings from '../utils/wing/Wing';\nimport ProfileService from '../../services/profile.service';\nimport { styles } from './WingsSuggestion.css.js';\nimport { ArrowLeft, ArrowRight } from '@material-ui/icons';\nimport './WingsSuggestion.css';\nimport {FormattedMessage} from \"react-intl\";\n\nlet interval;\nlet interval2;\n\nclass WingsSuggestions extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      suggestions: this.props.SuggestionsController.getCurrentSuggestions(),\n      bank: [],\n      renderComponent: false,\n      shouldUpdate: false,\n      observer: ()=> {},\n      scrollableClass: Math.floor(Math.random() * 99999),\n      onlyViewport: true,\n      offsetSuggestionsIndex: 0,\n      locale: this.props.commonStore.getCookie('locale') || this.props.commonStore.locale,\n    };\n  }\n\n  componentDidMount() {\n    observe(this.props.suggestionsController, '_observeUpdate', (change) => {\n      this.setState({suggestions: this.props.suggestionsController._currentSuggestions, shouldUpdate: true});\n    });\n  }\n\n  componentWillUnmount() {\n    this.state.observer();\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if ( (nextState.shouldUpdate || (!this.state.renderComponent && nextState.renderComponent)) && !nextState.animationInProgress ) {\n      this.setState({shouldUpdate: false});\n      return true;\n    }\n    return false;\n  }\n\n  handleSelectSuggestion = (e, element, index) => {\n    this.props.handleAddWing(e, element);\n    let elt = e.currentTarget.parentNode;\n    let eltChild = e.currentTarget;\n    eltChild.classList.add(this.props.classes.suggestionSelected);\n\n    this.setState({animationInProgress: true}, () => {\n      setTimeout(() => {\n        elt.classList.add(this.props.classes.animateOut);\n      }, 50)\n\n      setTimeout(() => {\n        eltChild.classList.remove(this.props.classes.suggestionSelected)\n        eltChild.blur();\n        this.props.suggestionsController.makeNewSuggestions(element, index)\n        .then(() => {\n          this.setState({suggestions: this.props.suggestionsController.getCurrentSuggestions(), shouldUpdate: true, animationInProgress: false}, () => {\n            elt.classList.remove(this.props.classes.animateOut);\n          });\n        })\n      }, 375);\n    });\n  }\n\n  handleMouseDown = (e) => {\n    var elt = e.currentTarget;\n    elt.style.transition = 'none';\n    elt.style.setProperty('background', this.props.theme.palette.secondary.main, 'important');\n    elt.style.setProperty('color', 'white');\n  }\n\n  handleMouseUp = (e) => {\n    var elt = e.currentTarget;\n    elt.style.transition = 'none';\n    elt.style.setProperty('background', '');\n    elt.style.setProperty('color', this.props.theme.palette.primary.dark);\n  }\n\n  reduceElt = async (elt) => {\n    var initWidth = elt.offsetWidth;\n    return new Promise((resolve, reject) => {\n      var currentInterval = setInterval(() => {\n        initWidth = Math.max(0, initWidth-4);\n        elt.style.width = initWidth +'px' ;\n        if(elt.style.width === 0+'px' || !elt.style.width){\n          clearInterval(currentInterval);\n          resolve();\n        }\n      }, 5);\n    });\n  }\n\n  shouldDisplaySuggestion = (tag) => (!this.props.recordStore.values.record.hashtags.some(hashtag => hashtag.tag === tag));\n\n  getDisplayedName = (hit) => (hit.name_translated ? (hit.name_translated[this.state.locale] || hit.name_translated['en-UK']) || hit.name || hit.tag : hit.name || hit.tag);\n\n  isNewSuggestions = (tag) => {\n    let indexOf = this.props.suggestionsController._newSuggestions.all.findIndex(suggestion => suggestion.tag === tag);\n    // console.log('index of ' + tag + ' is ' + indexOf);\n    return (indexOf > -1);\n  }\n\n  renderWing = (classes, hit, i) => {\n    return (\n      <li key={i} className={classNames(classes.suggestion, (this.isNewSuggestions(hit.tag) ? classes.animateIn : null))} style={{animationDelay: ((i-this.state.offsetSuggestionsIndex)*0.05) +'s'}} id={hit.tag}>\n        <Wings  src={ProfileService.getPicturePath(hit.picture)}\n          label={ProfileService.htmlDecode(this.getDisplayedName(hit))}\n          onClick={(e) => this.handleSelectSuggestion(e, { name: hit.name || hit.tag, tag: hit.tag }, i)}\n          onMouseDown={(e) => this.handleMouseDown(e)}\n          onMouseUp={(e) => this.handleMouseUp(e)}\n          onBlur={(e) => this.handleMouseUp(e)}\n          className={'suggestionWing'} />\n      </li>\n    );\n  }\n\n  renderWingsList = (suggestions, classes, isEven) => {\n    let suggestionsDisplayed = (isEven ? suggestions.even : suggestions.odd);\n    return (\n      <ul className={classNames(classes.suggestionList, \"scrollX\")}>\n      {suggestionsDisplayed && suggestionsDisplayed.map((hit, i) => {\n        return hit ? this.renderWing(classes, hit, i) : null;\n      })}\n    </ul>\n    );\n  }\n\n  scrollToSuggestion = (scrollLeft) => {\n    var elt = window.document.getElementsByClassName(this.state.scrollableClass)[0];\n    var initialScrollLeft = elt.scrollLeft\n    var suggestionInterval = window.setInterval(function() {\n      var scroll1, scroll2;\n      if(initialScrollLeft > scrollLeft) {\n        scroll1 = elt.scrollLeft;\n        elt.scrollLeft -= 4;\n        scroll2 = elt.scrollLeft;\n        if((elt.scrollLeft <= scrollLeft) || (elt.scrollLeft === elt.scrollWidth) || scroll1 === scroll2) clearInterval(suggestionInterval);\n      } else {\n        scroll1 = elt.scrollLeft;\n        elt.scrollLeft += 4;\n        scroll2 = elt.scrollLeft;\n        if((elt.scrollLeft >= scrollLeft) || (elt.scrollLeft === elt.scrollWidth) || scroll2 === scroll1) clearInterval(suggestionInterval);\n      }\n    }, 5);\n  }\n\n  scrollRight = () => {\n    interval = window.setInterval(function() {\n      window.document.getElementsByClassName(this.state.scrollableClass)[0].scrollLeft += 2;\n    }.bind(this), 5);\n  }\n\n  scrollLeft = () => {\n    interval2 = window.setInterval(function() {\n      window.document.getElementsByClassName(this.state.scrollableClass)[0].scrollLeft -= 2;\n    }.bind(this), 5);\n  }\n\n  scrollStop =() => {\n    clearInterval(interval);\n    clearInterval(interval2);\n  }\n\n  /**\n   * Check if an element is in viewport\n   *\n   * @param {number} [offset]\n   * @returns {boolean}\n   */\n  isInViewport = (offset = 0) => {\n    if (!this.elementNode) return false;\n    const left = this.elementNode.getBoundingClientRect().left;\n    return (left + offset) >= 0 && (left - offset) <= window.innerWidth;\n  }\n\n\n  render() {\n    const { classes } = this.props;\n    const { suggestions, scrollableClass } = this.state;\n\n    return (\n      <div ref={(el) => {this.elementNode = el}}>\n        <Hidden xsDown>\n          <Typography variant=\"subtitle2\" style={{padding: 16, paddingBottom:0}} ><FormattedMessage id={'wingsSuggestions'}/></Typography>\n        </Hidden>\n\n        <div style={{position:'relative', height: 126}}>\n        <Hidden smDown>\n          <Button className={classNames(classes.scrollLeft, classes.scrollButton)} onMouseDown={this.scrollLeft} onMouseUp={this.scrollStop} variant=\"outlined\">\n            <ArrowLeft fontSize=\"inherit\" />\n          </Button>\n          <Button className={classNames(classes.scrollRight, classes.scrollButton)} onMouseDown={this.scrollRight} onMouseUp={this.scrollStop} variant=\"outlined\">\n            <ArrowRight fontSize=\"inherit\" />\n          </Button>\n        </Hidden>\n    \n        <Hidden xsDown>\n          <div className={classes.transparentGradientBoxLeft}></div>\n          <div className={classes.transparentGradientBoxRight}></div>\n        </Hidden>\n\n        <div className={classNames(classes.suggestionsContainer, ''+scrollableClass)} >\n          {this.renderWingsList(suggestions, classes, true)}\n          {this.renderWingsList(suggestions, classes, false)}\n        </div>\n      </div>\n      </div>\n    );\n  }\n}\n\nexport default inject('commonStore', 'recordStore', 'organisationStore', 'suggestionsController')(\n  observer(\n    withStyles(styles, {withTheme: true})(WingsSuggestions)\n  )\n);\n","import React from 'react'\nimport { withStyles, Hidden, Button } from '@material-ui/core';\nimport { inject, observer } from \"mobx-react\";\nimport classNames from 'classnames';\nimport { observe } from 'mobx';\nimport { ArrowLeft, ArrowRight } from '@material-ui/icons';\n\nimport AlgoliaService from '../../../services/algolia.service.js';\nimport {styles} from './OnboardFirstWings.css';\n\nlet interval;\nlet interval2;\n\nclass OnboardFirstWings extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      firstWings: [],\n      observer: ()=>{},\n      recordObserver:  ()=>{},\n      scrollableClass: Math.floor(Math.random() * 99999),\n      animationInProgress: false,\n    };\n  }\n\n  componentDidMount () {\n    AlgoliaService.setAlgoliaKey(this.props.commonStore.algoliaKey);\n    this.fetchFirstWings();\n\n    this.setState({observer: observe(this.props.commonStore, 'algoliaKey', (change) => {\n      AlgoliaService.setAlgoliaKey(this.props.commonStore.algoliaKey);\n      this.fetchFirstWings();\n    })});\n\n    this.setState({recordObserver: observe(this.props.recordStore.values, 'record', (change) => {\n      this.fetchFirstWings();\n    })});\n  }\n\n  componentWillUnmount() {\n    this.state.observer();\n    this.state.recordObserver();\n  }\n\n  fetchFirstWings = () => {\n    AlgoliaService.fetchHits('type:hashtag AND hashtags.tag:#Wings', null, null, null)\n    .then(content => {\n      if(content && !this.state.animationInProgress) this.setState({firstWings: content.hits});\n    })\n  }\n\n  handleAddWing = (e, tag, i) => {\n    let elt = e.currentTarget;\n\n    this.setState({animationInProgress: true}, () => {\n      elt.style.setProperty('background', this.props.theme.palette.secondary.main, 'important');\n      elt.style.setProperty('color', 'white');\n      elt.style.animation = 'suggestionOut 450ms ease-out 0ms 1 forwards';\n      this.props.handleAddWing(e, {tag: tag});\n  \n      setTimeout(() => {\n        this.reduceElt(elt)\n        .then(() => {\n          this.setState({animationInProgress: false});\n        })\n      }, 450)\n    })\n\n  }\n\n  getFirstWingsStyle = (index, theme) => {\n    let style = {};\n    style.background = 'white';\n    style.color = theme.palette.primary.main;\n    style.display = 'inline-block';\n    return style;\n  }\n\n  shouldDisplaySuggestion = (tag) => (!this.props.recordStore.values.record.hashtags.some(hashtag => hashtag.tag === tag));\n\n  scrollRight = () => {\n    interval = window.setInterval(function() {\n      window.document.getElementsByClassName(this.state.scrollableClass)[0].scrollLeft += 2;\n    }.bind(this), 5);\n  }\n\n  scrollLeft = () => {\n    interval2 = window.setInterval(function() {\n      window.document.getElementsByClassName(this.state.scrollableClass)[0].scrollLeft -= 2;\n    }.bind(this), 5);\n  }\n\n  scrollStop =() => {\n    clearInterval(interval);\n    clearInterval(interval2);\n  }\n\n  handleMouseDown = (e) => {\n    var elt = e.currentTarget;\n    elt.style.transition = 'none';\n    elt.style.setProperty('background', this.props.theme.palette.secondary.main, 'important');\n    elt.style.setProperty('color', 'white');\n  }\n\n  handleMouseUp = (e) => {\n    var elt = e.currentTarget;\n    elt.style.transition = 'none';\n    elt.style.setProperty('background', '');\n    elt.style.setProperty('color', this.props.theme.palette.primary.dark);\n  }\n\n  reduceElt = async (elt) => {\n    var initWidth = elt.offsetWidth;\n    return new Promise((resolve, reject) => {\n      var currentInterval = setInterval(() => {\n        initWidth = Math.max(0, initWidth-2);\n        elt.style.width = initWidth +'px' ;\n        if(elt.style.width === 0+'px' || !elt.style.width){\n          clearInterval(currentInterval);\n          resolve();\n        }\n      }, 5);\n    });\n  }\n\n  render() {\n    const {classes, theme} = this.props;\n    const { firstWings, scrollableClass } = this.state;\n\n    return (\n      <div style={{position: 'relative'}}>\n        <Hidden smDown>\n          <Button className={classNames(classes.scrollLeft, classes.scrollButton)} onMouseDown={this.scrollLeft} onMouseUp={this.scrollStop} variant=\"outlined\">\n            <ArrowLeft fontSize=\"inherit\" />\n          </Button>\n          <Button className={classNames(classes.scrollRight, classes.scrollButton)} onMouseDown={this.scrollRight} onMouseUp={this.scrollStop} variant=\"outlined\">\n            <ArrowRight fontSize=\"inherit\" />\n          </Button>\n        </Hidden>\n        <ul className={classNames(classes.firstWingsList, ''+scrollableClass)} >\n          {firstWings.length > 0 && firstWings.map((hashtag, i) => {\n            if(!this.shouldDisplaySuggestion(hashtag.tag)) return null;\n            return (\n              <li onClick={(e) => { this.handleAddWing(e, hashtag.tag, i) }} className={classes.firstWing} key={i} \n                style={this.getFirstWingsStyle(i, theme)} \n                onMouseUp={(e) => this.handleMouseUp(e)}\n                onMouseDown={(e) => this.handleMouseDown(e)}\n                >\n                <div>\n                  <img src={hashtag.picture.url} alt=\"Soft Wing\" />\n                  <div>\n                    <span>\n                      {hashtag.name}\n                    </span>\n                  </div>\n                </div>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default inject('commonStore', 'recordStore')(\n  observer(\n    withStyles(styles, {withTheme: true})(OnboardFirstWings)\n  )\n);\n","export const styles = theme => ({\n  hitListContainer: {\n    position: 'relative',\n    width: '100%',\n    marginBottom: 150,\n  },\n  suggestionsContainer: {\n    position: 'relative',\n    left: 0,\n    right: 0,\n    margin: 'auto',\n  },\n  profileContainer: {\n    position: 'fixed',\n    top: 0,\n    zIndex:99999,\n    width: '100%',\n    height: '100vh',\n    overflowY: 'scroll',\n    backgroundColor: 'white',\n    '& ul': {\n      listStyleType: 'none',\n      padding: 0,\n      marginTop: 0,\n    },\n    animationName: 'popIn',\n    animationDuration: '.6s'\n  },\n  '@keyframes popIn': {\n    from: { top: '100vh' },\n    to: { top: 0 }\n  },\n  '@keyframes popOut': {\n    from: { top: 0, opacity: 1 },\n    to: { top: '100vh', opacity: 0 }\n  },\n  '@keyframes fadeIn': {\n    from: { opacity: 0 },\n    to: { opacity: 1 }\n  },\n  cardMobileView: {\n    [theme.breakpoints.down('xs')]: {\n      margin: '16px!important',\n    },\n  },\n  hitList: {\n    width: '100%',\n    backgroundColor: '#f2f2f2',\n    '& ul': {\n      listStyleType: 'none',\n      padding: 0,\n      marginTop: '32px',\n      marginBottom: '32px',\n    },\n    '& ul li': {\n      marginBottom: '32px',\n      opacity: 0,\n      animation: 'fadeIn 0.9s 1',\n      animationFillMode: 'forwards',\n    },\n    '& ul li > div:first-child': {\n      position: 'relative',\n      left: '0',\n      right: '0',\n      margin: 'auto'\n    }\n  },\n  fullWidth: {\n    width: '100%'\n  },\n  searchBar: {\n    position: 'fixed !important',\n    top: 0,\n    left: 0,\n    right: 0,\n    margin: 'auto',\n    zIndex: 1000,\n    marginTop: 8,\n    background: 'transparent',\n    width: '100%',\n  },\n\n  searchBanner: {\n    position: 'relative',\n    opacity: 0.8,\n    filter: 'blur(.5px) brightness(55%)'\n  }\n});\n","import React from 'react'\nimport {FormattedMessage, FormattedHTMLMessage} from 'react-intl';\nimport {inject, observer} from 'mobx-react';\n\nimport {Button, Grid, Typography, withStyles, Hidden} from \"@material-ui/core\";\nimport Banner from '../../components/utils/banner/Banner';\nimport Header from '../../components/header/Header';\nimport Logo from '../../components/utils/logo/Logo';\nimport UrlService from '../../services/url.service';\n\nconst styles = (theme) => ({\n  logo: {\n    width: 110,\n    height: 110,\n    boxShadow: '0 5px 15px -1px darkgrey, 0 0 0 5px transparent',\n    zIndex: 2,\n    transform: 'translateY(-50%)',\n    marginBottom: -47,\n  },\n  container: {\n    [theme.breakpoints.down('xs')]: {\n      padding: 8,\n    }\n  },\n  intro: {\n    textAlign: 'center',\n    padding: 8,\n    [theme.breakpoints.down(400)]: {\n      padding: 5,\n    }\n  },\n  title: {\n    textAlign: 'center',\n    paddingTop: 16,\n    paddingBottom:16,\n    [theme.breakpoints.down(400)]: {\n      padding: 5,\n    }\n  },\n  form: {\n    width: '100%',\n  },\n  term: {\n    [theme.breakpoints.down('md')]: {\n      justifyContent: 'end',\n      padding: '8px 16px',\n    }\n  },\n  protectingData: {\n    [theme.breakpoints.down('md')]: {\n      justifyContent: 'flex-end',\n      padding: '8px 16px',\n    }\n  },\n  banner: {\n    position: 'absolute',\n    top: 0,\n    width: '100%',\n    textAlign: 'center',\n    left: 0,\n    height: 222,\n    lineHeight: 222,\n    [theme.breakpoints.up('md')]: {\n      height: 416,\n      lineHeight: 416,\n    }, \n    background: 'radial-gradient(rgba(50,50,50,.4), rgba(50,50,50,.1))',\n    backgroundRepeat: 'no-repeat',\n    '& h2': {\n      position:'absolute',\n      top: '50%',\n      left:0,\n      right:0,\n      margin: 'auto',\n      transform: 'translateY(-50%)',\n      color: 'white',\n      fontWeight: 600,\n    }\n  }\n});\n\nclass OnboardWelcome extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    };\n  }\n\n  render() {\n    const {organisation} = this.props.organisationStore.values;\n    const {classes} = this.props;\n\n    return (\n      <Grid container direction={\"column\"} justify={\"space-around\"}>\n      <Grid container item>\n        <Header/>\n      </Grid>\n      <Grid container item alignItems={\"stretch\"}>\n        <Banner />\n        <Hidden smDown>\n          <div className={classes.banner}>\n            <Typography variant=\"h2\" ><FormattedMessage id={'onboard.welcome'}/> {organisation.name}</Typography>\n          </div>\n        </Hidden>\n      </Grid>\n      <Grid container item justify={\"center\"}>\n        <Logo type={\"organisation\"} alt=\"org-logo\" className={classes.logo}/>\n      </Grid>\n      <Grid container item justify={\"center\"} className={classes.container}>\n        <form onSubmit={this.handleSubmitForm} className={classes.form}>\n          <Grid item container direction={'column'} xs={12} sm={6} lg={4} spacing={16}>\n            <Hidden mdUp>\n            <Typography variant=\"h2\" style={{textAlign: 'center'}} ><FormattedMessage id={'onboard.welcome'}/> {organisation.name}</Typography>\n            </Hidden>\n            <Grid item>\n              <FormattedHTMLMessage id=\"onboard.welcome.text\" values={{organisationName: organisation.name}} />\n            </Grid>\n            <Grid item>\n              <Button onClick={this.props.handleEnterToOnboard} fullWidth color=\"secondary\" ><FormattedMessage id={'onboard.start'}/></Button>\n            </Grid>\n            <Grid item container direction=\"row\" justify='space-around' >\n              <Grid item lg={6}>\n                <Button  className={classes.term} variant=\"text\" fullWidth={true} component=\"a\" target=\"_blank\" href={UrlService.createUrl(process.env.REACT_APP_HOST_BACKFLIP, '/terms', undefined)}>\n                  <FormattedMessage id=\"menu.drawer.terms\" />\n                </Button>\n              </Grid>\n              <Grid item lg={6}>\n                <Button className={classes.protectingData} variant=\"text\" fullWidth={true}  component=\"a\" target=\"_blank\" href={UrlService.createUrl(process.env.REACT_APP_HOST_BACKFLIP, '/protectingYourData', undefined)}>\n                  <FormattedMessage id=\"menu.drawer.protectingYourData\" style={{justifyContent: 'flex-end!important'}}/>\n                </Button>\n              </Grid>\n            </Grid>\n          </Grid>\n        </form>\n      </Grid>\n    </Grid>\n    );\n  }\n}\n\nexport default inject('commonStore', 'organisationStore')(\n  observer(\n    withStyles(styles)(OnboardWelcome)\n  )\n);\n","import React, {Component} from 'react'\nimport uploadcare from 'uploadcare-widget'\n\nclass Uploader extends Component {\n  componentDidMount() {\n    const widget = uploadcare.Widget(this.uploader)\n    const {value, onChange, onUploadComplete} = this.props\n\n    if (typeof value !== 'undefined') {\n      widget.value(value)\n    }\n    if (typeof onChange === 'function') {\n      widget.onChange(files => {\n        if (files) {\n          this.files = (this.files && this.files.files) ? this.files.files() : [this.files]\n        }\n        else {\n          this.files = null\n        }\n\n        onChange(files)\n      })\n    }\n    if (typeof onUploadComplete === 'function') {\n      widget.onUploadComplete(onUploadComplete)\n    }\n    widget.onDialogOpen(dialog => this.dialog = dialog)\n  }\n\n  componentWillUnmount() {\n    // if (this.dialog) {\n    //   this.dialog.reject()\n    // }\n    // if (this.files) {\n    //   uploadcare.jQuery.when.apply(null, this.files).cancel()\n    // }\n\n    // const widgetElement = uploadcare.jQuery(this.uploader).next('.uploadcare--widget')\n    // const widget = widgetElement.data('uploadcareWidget')\n\n    // if (widget && widget.inputElement === this.uploader) {\n    //   widgetElement.remove()\n    // }\n  }\n\n  getInputAttributes() {\n    const attributes = Object.assign({}, this.props)\n\n    delete attributes.value\n    delete attributes.onChange\n    delete attributes.onUploadComplete\n\n    return attributes\n  }\n\n  render() {\n    const attributes = this.getInputAttributes()\n\n    return (\n      <input\n        type='hidden'\n        ref={input => this.uploader = input}\n        {...attributes} />\n    )\n  }\n}\n\nexport default Uploader","import React from 'react'\nimport { withStyles, CircularProgress } from '@material-ui/core';\nimport { inject, observer } from \"mobx-react\";\nimport { injectIntl } from 'react-intl';\n\nimport Uploader from '../uploadcare/Uploader';\nimport defaultPicture from '../../../resources/images/placeholder_person.png';\nimport './uploadcare_customize.css';\n\nconst styles = theme => ({\n  pictureContainer: {\n    position: 'relative',\n    margin: '8px 16px',\n    textAlign: 'center',\n    [theme.breakpoints.down('xs')] : {\n      margin: 8,\n    },\n  },\n  picture: {\n    position: 'relative',\n    borderRadius: '50%',\n    width:300,\n    height:300,\n    [theme.breakpoints.down('xs')] : {\n      width: 180,\n      height: 180,\n    },\n    border: '8px solid white',\n    background: 'white',\n    zIndex: 2,\n  },\n});\n\nclass PictureField extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n      pictureUrl: null,\n    };\n  }\n\n  componentDidMount() {\n    this._ismounted = true;\n  }\n\n  handleChange = (file) => {\n    if(!this._ismounted) return;\n    if(!file) {\n      let record = this.props.recordStore.values.record;\n      record.picture = {\n        url: null\n      };\n      this.props.recordStore.setRecord(record);\n      this.setState({pictureUrl: null, loading: false});\n      this.props.handleSave();\n    } else {\n      this.setState({loading: true});\n    }\n  }\n\n  componentWillUnmount() {\n    this._ismounted = false;\n  }\n\n  handleUploadComplete = (file) => {\n    if(!this._ismounted) return;\n    let record = this.props.recordStore.values.record;\n    record.picture = {\n      url: file.cdnUrl\n    };\n    this.props.recordStore.setRecord(record);\n    this.setState({pictureUrl: file.cdnUrl, loading: false});\n    this.props.handleSave(['picture']);\n  }\n\n  handleResetPicture = (e) => {\n    this.forceUpdate();\n  }\n\n  render() {\n    const {record} = this.props.recordStore.values;\n    const {pictureUrl, loading} = this.state;\n    const {classes} = this.props;\n\n    return (\n      <div>\n\n          <div className={classes.pictureContainer} style={this.props.style} >\n            { (loading && !pictureUrl) && (\n              <CircularProgress color='secondary' className={classes.picture} size={300} />\n            )}\n            {(!loading || pictureUrl) && (\n              <img src={pictureUrl || defaultPicture} alt=\"\" className={classes.picture} />\n            )}\n          </div>\n\n          <Uploader\n            style={{maxWidth: '100%'}}\n            id='file'\n            name='file'\n            data-tabs='file camera url'\n            data-crop=\"180x180 upscale\" \n            data-image-shrink=\"1280x1280\"\n            onChange={this.handleChange}\n            value={pictureUrl || (record.picture ? record.picture.url : null)}\n            onUploadComplete={this.handleUploadComplete} \n            data-images-only />\n      </div>\n    );\n  }\n}\n\nexport default inject('commonStore', 'recordStore')(\n  observer(\n    injectIntl(withStyles(styles)(PictureField))\n  )\n);\n","import React from 'react'\nimport { withStyles } from '@material-ui/core';\nimport { inject, observer } from \"mobx-react\";\nimport { TextField, Grid, Typography } from '@material-ui/core'\nimport PictureField from '../../utils/fields/PictureField';\nimport {FormattedMessage} from \"react-intl\";\nimport { injectIntl } from 'react-intl';\n\nconst Entities = require('html-entities').XmlEntities;\nconst entities = new Entities();\n\nclass OnboardIntro extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    };\n  }\n\n  handleChange = (e, field) => {\n    let record = this.props.recordStore.values.record;\n    record[field] = e.target.value;\n    this.props.recordStore.setRecord(record);\n    this.forceUpdate(); // why component do not update auto like Login fields ?\n  }\n\n  render() {\n    const { record } = this.props.recordStore.values;\n\n    record.intro = entities.decode(record.intro);\n    record.name = entities.decode(record.name);\n\n    return (\n      <Grid container style={{ height: 'calc(100vh - 73px)', background: this.props.theme.palette.primary.main }} direction=\"column\">\n        <Grid container item xs={12} sm={8} md={6} lg={4} spacing={16} direction=\"column\" style={{flexBasis: '100%', width: '100%'}} >\n          <Grid item style={{maxWidth: '100%'}}>\n            <Typography variant=\"h4\" style={{textAlign: 'center', padding: 8, color:this.props.theme.palette.primary.dark}} >\n              <FormattedMessage id={'onboard.whoAreYou'}/>\n            </Typography>\n          </Grid>\n          <Grid item style={{maxWidth: '100%'}}>\n            <PictureField handleSave={this.props.handleSave} />\n          </Grid>\n          <Grid item style={{maxWidth: '100%'}}>\n            <TextField\n              label={this.props.intl.formatMessage({ id: 'onboard.intro.name' }, {organisationName: this.props.organisationStore.values.organisation.name})}\n              type=\"text\"\n              fullWidth\n              variant={\"outlined\"}\n              value={record.name}\n              onChange={(e) => this.handleChange(e, 'name')}\n              onBlur={(e) => {this.props.handleSave(['name'])}}\n              error={(record.name && (record.name.length > 64)) === true}\n              helperText={(record.name && record.name.length > 64) ? '64 characters max' : ''}\n              required\n            />\n          </Grid>\n          <Grid item style={{maxWidth: '100%'}}>\n            <TextField\n              label={this.props.intl.formatMessage({ id: 'onboard.intro.intro' }, {organisationName: this.props.organisationStore.values.organisation.name})}\n              type=\"text\"\n              fullWidth\n              variant={\"outlined\"}\n              value={record.intro}\n              onChange={(e) => this.handleChange(e, 'intro')}\n              onBlur={(e) => this.props.handleSave(['intro'])}\n              error={(record.intro && (record.intro.length > 256)) === true}\n              helperText={(record.intro && record.intro.length > 256) ? '256 characters max' : ''}\n              required\n            />\n          </Grid>\n        </Grid>\n      </Grid>\n    );\n  }\n}\n\nexport default inject('commonStore', 'recordStore', 'organisationStore')(\n  observer(\n    injectIntl(withStyles(null, {withTheme: true})(OnboardIntro))\n  )\n);\n","import React from 'react';\nimport {inject, observer} from 'mobx-react';\nimport {FormattedMessage} from 'react-intl';\nimport {Grid, Grow, Paper, Popper, ClickAwayListener, Button, IconButton, withStyles, Tooltip} from '@material-ui/core'\nimport {Add} from \"@material-ui/icons\";\n\nconst styles = theme => ({\n  root: {\n    display: 'flex',\n    zIndex: 1,\n    '& div[role=\"tooltip\"]': {\n      zIndex: 9999,\n      alignItems: 'center',\n      width: '100%',\n    },\n  },\n  button: {\n    color: 'white',\n    backgroundColor: theme.palette.secondary.main + '!important'\n  },\n  paper: {\n    borderRadius: 30,\n    width: 'calc(100% - 16px)',\n    boxSizing: 'border-box',\n    marginLeft: 13,\n  },\n  contactButton: {\n    fontSize: 24,\n    width: 30,\n    height: 30,\n    '&::before': {\n      position:'absolute',\n      left:0,\n      right:0,\n      margin:'auto',\n    }\n  },\n  btnPopup: {\n    '&:first-child()': {\n      position: 'absolute',\n      left:0,\n      right:0,\n      margin: 'auto',\n    }\n  }\n});\n\nclass AddContactField extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n    }\n  }\n  \n  addLink = (typeOfField) => {\n    this.props.addLink({type: typeOfField, value: ''});\n    this.setState({open: false});\n  }\n  \n  handleToggle = () => {\n    this.setState(state => ({open: !state.open}));\n  };\n  \n  handleClose = event => {\n    if (this.anchorEl.contains(event.target)) {\n      return;\n    }\n    this.setState({open: false});\n  };\n  \n  getIcon = name => {\n    switch (name) {\n      case 'email':\n        return name = 'envelope-o';\n      case 'workplace':\n        return name = 'user';\n      case 'workchat':\n        return name = 'comment';\n      default:\n        return name\n    }\n  }\n  \n  \n  render() {\n    const {classes} = this.props;\n    const {open} = this.state;\n    let linkName = ['email', 'phone', 'linkedin', 'twitter', 'facebook', 'github', 'link', 'workplace', 'workchat']\n    \n    return (\n      <Grid container item className={classes.root} direction={'column'}>\n        <Button\n          className={classes.button}\n          fullWidth\n          buttonRef={node => {\n            this.anchorEl = node;\n          }}\n          aria-owns={open ? 'menu-list-grow' : undefined}\n          aria-haspopup=\"true\"\n          onClick={this.handleToggle}\n        >\n          <Add fontSize=\"default\"/>\n          <FormattedMessage id={'onboard.addMoreContact'}/>\n        </Button>\n        \n        <Popper open={open} anchorEl={this.anchorEl} transition disablePortal>\n          {({TransitionProps, placement}) => (\n            <Grow\n              {...TransitionProps}\n              id=\"menu-list-grow\"\n              style={{position:'abdsolute',left:0,right:0,margin:'auto'}}\n            >\n              <Grid item container xs={12} sm={8} md={6} lg={4} direction=\"column\">\n                <Paper className={classes.paper}>\n                  <ClickAwayListener onClickAway={this.handleClose}>\n                    <Grid container justify={'center'} alignItems={'center'} spacing={8}>\n                      {linkName.map((name, i) => {\n                        return (\n                          <Grid item key={i}>\n                            <Tooltip title={this.props.capitalize(name)}>\n                              <IconButton onClick={() => this.addLink(name)} label={name}>\n                                <i className={classes.contactButton + \" fa fa-\" + this.getIcon(name)}/>\n                              </IconButton>\n                            </Tooltip>\n                          </Grid>\n                        )\n                      })}\n                    </Grid>\n                  </ClickAwayListener>\n                </Paper>\n              </Grid>\n            </Grow>)}\n        </Popper>\n      </Grid>\n    )\n  }\n}\n\nexport default inject('commonStore', 'recordStore')(\n  observer(\n    withStyles(styles)(AddContactField)\n  )\n);\n","import React from 'react'\nimport {inject, observer} from \"mobx-react\";\nimport {withStyles, Grid, TextField, InputAdornment, IconButton, Typography} from '@material-ui/core';\nimport {Clear} from '@material-ui/icons';\nimport AddContactField from '../../utils/fields/AddContactField';\nimport ProfileService from \"../../../services/profile.service\";\nimport {FormattedMessage} from \"react-intl\";\n\nconst Entities = require('html-entities').XmlEntities;\nconst entities = new Entities();\n\nconst styles = theme => ({\n  link: {\n    animation: 'linkPop ease 1s',\n    animationFillMode: 'forwards',\n  },\n  '@keyframes linkPop': {\n    from: { width: 0},\n    to: { width: '100%' }\n  },\n  defaultLink: {\n    width: '100%',\n  }\n});\n\n\nclass OnboardContacts extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      links: this.props.recordStore.values.record.links || [],\n      newLinkIndex: null,\n    }\n\n  }\n  \n  componentDidMount() {\n    this.setDefaultLinks();\n\n    // observe(this.props.recordStore.values, 'record', (change) => {\n    //   this.setState({links: this.props.recordStore.values.record.links}, () => {\n    //     this.forceUpdate();\n    //   });\n    // })\n  }\n  \n  handleLinksChange = (e, link, index) => {\n    link.value = e.target.value;\n    \n    let links = this.state.links;\n    links[index].value = e.target.value;\n    this.props.recordStore.values.record.links = links;\n    this.setState({links});\n  }\n  \n  deleteLink = (linkToRemove) => {\n    this.props.recordStore.values.record.links = this.props.recordStore.values.record.links.filter(item => {\n      return !(item.type === linkToRemove.type && item.value === linkToRemove.value);\n    });\n    \n    this.setState({links: this.state.links.filter(item => !(item.type === linkToRemove.type && item.value === linkToRemove.value) )});\n    this.props.handleSave(['links']);\n  }\n  \n  addLink = (link) => {\n    this.props.recordStore.values.record.links.push(link);\n    let links = this.state.links;\n    links.push(link);\n    this.setState({links: links, newLinkIndex: links.length-1});\n  }\n  \n  getLinkByType = (typeWanted) => {\n    return (this.props.recordStore.values.record.links.find(link => link.type === typeWanted));\n  }\n  \n  setTypeInput = (type) => {\n    switch (type) {\n      case 'email':\n        return type = 'email';\n      case 'phone':\n        return type = 'tel';\n      default:\n        return type = 'text';\n    }\n  }\n  \n  setTypePattern = (pattern) => {\n    switch (pattern) {\n      case 'email':\n        return pattern = \"[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,4}$\";\n      case 'phone':\n        return pattern = '/^(\\\\([0-9]{10}\\\\)/';\n      default:\n        return pattern = 'text';\n    }\n  }\n  \n  capitalize = (string) =>\n  {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  }\n  \n  setDefaultLinks = () => {\n    let types = ['email', 'phone', 'linkedin'];\n    let links = this.state.links;\n    for (let type of types) {\n      if (!this.getLinkByType(type)) {\n        if(links.findIndex(link => link.type === type) === -1){\n          links.push({\"type\": type, \"value\": \"\"});\n        }\n      }\n    }\n    this.setState({links});\n  };\n  \n  render() {\n    const {links, newLinkIndex} = this.state;\n    const {classes} = this.props;\n    ProfileService.transformLinks(this.props.recordStore.values.record);\n    return (\n      <Grid container style={{minHeight: 'calc(100vh - 73px)', background: this.props.theme.palette.primary.main}} direction=\"column\" alignItems=\"center\">\n        <Grid item xs={12} sm={8} md={6} lg={4} style={{width: '100%'}}>\n          <Grid item style={{padding: 8}}>\n            <Typography variant=\"h4\" style={{textAlign: 'center', padding: 8, color:this.props.theme.palette.primary.dark}}>\n              <FormattedMessage id={'onboard.yourContact'}/>\n            </Typography>\n          </Grid>\n            {links && links.map((link, i) => {\n              link.value = entities.decode(link.value);\n              return (\n                <Grid item key={i} style={{padding: 8}}>\n                  <TextField\n                    className={( (newLinkIndex && i === newLinkIndex) ?  classes.link : classes.defaultLink)}\n                    label={this.capitalize(link.type)}\n                    type={this.setTypeInput(link.type)}\n                    pattern={this.setTypePattern(link.type)}\n                    variant={\"outlined\"}\n                    value={link.value}\n                    onChange={(e) => this.handleLinksChange(e, link, i)}\n                    onBlur={() => this.props.handleSave(['links'])}\n                    placeholder={this.capitalize(link.type)}\n                    InputProps={{\n                      pattern:this.setTypePattern(link.type),\n                      startAdornment: (\n                        <InputAdornment position=\"start\" style={{fontSize: 24}}>\n                          <i className={\"fa fa-\" + link.icon || link.type}/>\n                        </InputAdornment>\n                      ),\n                      endAdornment: (\n                        <IconButton position=\"end\" onClick={() => {\n                          this.deleteLink(link)\n                        }}>\n                          <Clear fontSize=\"default\"/>\n                        </IconButton>\n                      )\n                    }}\n                  />\n                </Grid>\n              )\n            })}\n            <Grid item style={{width: '100%', padding: 8}}>\n              <AddContactField parent={this} handleSave={this.props.handleSave} addLink={this.addLink} capitalize={this.capitalize}/>\n            </Grid>\n        </Grid>\n      </Grid>\n    );\n  }\n}\n\nexport default inject('commonStore', 'recordStore')(\n  observer(\n    withStyles(styles, {withTheme: true})(OnboardContacts)\n  )\n);\n","import React from 'react'\nimport { withStyles, Typography } from '@material-ui/core';\nimport { inject, observer } from \"mobx-react\";\nimport { observe } from 'mobx';\n\nimport Wings from './Wing';\nimport ProfileService from '../../../services/profile.service';\nimport { FormattedMessage, FormattedHTMLMessage } from 'react-intl';\n\nconst styles = theme => ({\n});\n\nclass UserWings extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      observer: ()=> {},\n      newTag: null,\n      currentHashtagsLength: this.props.recordStore.values.record.hashtags.length,\n    };\n  }\n\n  componentDidMount() {\n    setTimeout(() => this.props.scrollUserWingsToBottom(), 100);\n    this.setState({observer: observe(this.props.recordStore.values, 'record', (change) => {\n      if(change.newValue.hashtags.length > this.state.currentHashtagsLength) {\n        setTimeout(() => this.props.scrollUserWingsToBottom(), 100);\n        this.setState({newTag: change.newValue.hashtags[change.newValue.hashtags.length - 1].tag, currentHashtagsLength: change.newValue.hashtags.length});\n      } else {\n        this.setState({newTag: null, currentHashtagsLength: change.newValue.hashtags.length});\n      }\n    }) });\n  }\n\n  componentWillUnmount() {\n    // destroy observe\n    this.state.observer();\n  }\n\n  shoudlRenderWing = (hashtag) => {\n    if(!hashtag) return false;\n    return true;\n  } \n\n  shouldAnimateWing = (hashtag) => {\n    if(hashtag.tag === this.state.newTag) {\n      return true;\n    }\n    return false;\n  }\n\n  render() {\n    const {record} = this.props.recordStore.values;\n    const {theme} = this.props;\n\n    if(!record) return null;\n\n    return (\n      <div>\n        <Typography variant=\"h4\" style={{textAlign: 'center', color:theme.palette.primary.dark}} ><FormattedMessage id=\"onboard.userWings\" values={{wingsCount: record.hashtags.length}} /></Typography>\n        <div className=\"\" style={{padding: 8, paddingTop: 10}}>\n          {record && record.hashtags && record.hashtags.length > 0 && record.hashtags.map((hashtag, i) => {\n            if(!this.shoudlRenderWing(hashtag)) return null;\n            let displayedName = (hashtag.name_translated ? (hashtag.name_translated[this.state.locale] || hashtag.name_translated['en-UK']) || hashtag.name || hashtag.tag : hashtag.name)\n            \n            if(!this.shouldAnimateWing(hashtag)) {\n              return (\n                <div className=\"\" key={i} style={{display: 'inline-block'}} >\n                  <Wings  src={ProfileService.getPicturePath(hashtag.picture)}\n                    label={ProfileService.htmlDecode(displayedName)} key={hashtag.tag}\n                    className={''} \n                    onDelete={(e) => {this.props.handleRemoveWing(e, hashtag.tag)}} />\n                </div>\n              )\n            } else {\n              return (\n                <div className=\"\" key={i} style={{display: 'inline-block'}} >\n                  <Wings  src={ProfileService.getPicturePath(hashtag.picture)}\n                    label={ProfileService.htmlDecode(displayedName)} key={hashtag.tag}\n                    className={'animated'} \n                    style={{background: theme.palette.primary.main}}\n                    onDelete={(e) => {this.props.handleRemoveWing(e, hashtag.tag)}} />\n                </div>\n              )\n            }\n            \n          })}\n          {record && record.hashtags && record.hashtags.length === 0 && (\n            <Typography variant=\"h6\">\n              <FormattedHTMLMessage id=\"onboard.noWings\" />\n            </Typography>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default inject('commonStore', 'recordStore')(\n  observer(\n    withStyles(styles, {withTheme: true})(UserWings)\n  )\n);\n","export const styles = theme => ({\n  suggestionsContainer: {\n    position: 'relative',\n    textAlign: 'left',\n    overflow: 'hidden',\n    overflowX: 'auto',\n    width: '100%',\n    paddingBottom: 16,\n    marginTop: 3,\n    scrollbarWidth: 'thin',\n    scrollbarColor:  'rgba(0, 0, 0, 0.26) transparent',\n  },\n  suggestionList: {\n    whiteSpace: 'nowrap',\n    padding: 0,\n    margin:0,\n    height: 52,\n    listStyleType: 'none',\n    paddingLeft: 8,\n    paddingRight: 8,\n    '& li ': {\n      display: 'inline-block',\n    }\n  },\n  suggestion: {\n    color: theme.palette.secondary.dark,\n  },\n  suggestionSelected: {\n    backgroundColor: theme.palette.secondary.main + ' !important',\n    color: 'white !important',\n    '&:hover': {\n      backgroundColor: theme.palette.secondary.main + ' !important',\n      color: 'white !important',\n    }\n  },\n  animateIn: {\n    // opacity: 0,\n    transform: 'scale(0)',\n    animation: ' 250ms ease-in easeIn',\n    animationFillMode: 'forwards',\n  },\n  animateOut: {\n    animation: ' 250ms ease-out easeOut',\n    animationFillMode: 'forwards',\n  },\n  '@keyframes easeOut': {\n    from: {\n      opacity: 1,\n      width: 100,\n      transform: 'scale(1)'\n    },\n    '50%': {\n      opacity: 0.5,\n      width: 50,\n      transform: 'scale(0.30)'\n    },\n    to: {\n      opacity: 0,\n      width: 0,\n      transform: 'scale(0)'\n\n    }\n  },\n  '@keyframes easeIn': {\n    from: { transform: 'scale(0)' },\n    to: { transform: 'scale(1)' }\n  },\n  transparentGradientBoxRight: {\n    position: 'absolute',\n    right:0,\n    top:0,\n    width: 16,\n    height: '100%',\n    backgroundImage: 'linear-gradient(to right, rgba(0,0,0,0), '+theme.palette.primary.main+')',\n    zIndex: 2,\n  },\n  transparentGradientBoxLeft: {\n    position: 'absolute',\n    left:0,\n    top:0,\n    width: 16,\n    height: '100%',\n    // eslint-disable-next-line\n    backgroundImage: '-moz-linear-gradient(to right, '+theme.palette.primary.main+', rgba(0,0,0,0))',\n    // eslint-disable-next-line\n    backgroundImage: '-webkit-gradient(to right, '+theme.palette.primary.main+', rgba(0,0,0,0))',\n    // eslint-disable-next-line\n    backgroundImage: '-webkit-linear-gradient(to right, '+theme.palette.primary.main+', rgba(0,0,0,0))',\n    // eslint-disable-next-line\n    backgroundImage: '-o-linear-gradient(to right, '+theme.palette.primary.main+', rgba(0,0,0,0))',\n    // eslint-disable-next-line\n    backgroundImage: '-ms-linear-gradient(to right, '+theme.palette.primary.main+', rgba(0,0,0,0))',\n    // eslint-disable-next-line\n    backgroundImage: 'linear-gradient(to right, '+theme.palette.primary.main+', rgba(0,0,0,0))',\n    zIndex: 2,\n  },\n  scrollLeft: {\n    left: -64,\n  },\n  scrollRight: {\n    right: -64,\n  },\n  scrollButton: {\n    position: 'absolute',\n    top: '50%',\n    transform: 'translateY(-50%)',\n    border: 'none',\n    color: 'rgba(0, 0, 0, 0.26)',\n    fontSize: 45,\n    padding: 0,\n    overflow: 'hidden',\n    minWidth: 0,\n    width: 56,\n  }\n});","export const styles = theme => ({\n  firstWingsList: {\n    listStyleType: 'none',\n    padding: 8,\n    paddingTop: 0,\n    position: 'relative',\n    left:0,\n    right:0,\n    margin: 'auto',\n    width: 'calc(100% - 16px)',\n    whiteSpace: 'nowrap',\n    overflowX: 'auto',\n    scrollbarWidth: 'thin',\n    scrollbarColor:  'rgba(0, 0, 0, 0.26) transparent',\n  },\n  firstWing: {\n    textAlign: 'center',\n    cursor: 'pointer',\n    display: 'inline-block',\n    width: 159,\n    height: 159,\n    [theme.breakpoints.down('sm')]: {\n      width: 130,\n      height: 130,\n    },\n    overflow: 'hidden',\n    padding: 16,\n    margin: 8,\n    marginTop:0,\n    WebkitTransition: 'all .6s ease-in-out',\n    MozTransition: 'all .6s ease-in-out',\n    OTransition: 'all .6s ease-in-out',\n    transition: 'all .6s ease-in-out',\n    borderRadius: 30,\n    '& img': {\n      width: 145,\n      height: 145,\n      borderRadius: 75,\n      [theme.breakpoints.down('sm')]: {\n        width: 100,\n        height: 100,\n        borderRadius: 50,\n      },\n      outline: 'none',\n    },\n    '& div': {\n      position: 'relative',\n      height: '100%',\n      width: '100%',\n    },\n    '& div div': {\n      position:'absolute',\n      left:0,\n      right:0,\n      margin: 'auto',\n      bottom: 0,\n      zIndex: 2,\n      fontWeight: '600',\n      height: 'initial',\n    }\n  },\n  scrollLeft: {\n    left: -64,\n  },\n  scrollRight: {\n    right: -64,\n  },\n  scrollButton: {\n    position: 'absolute',\n    top: '50%',\n    transform: 'translateY(-50%)',\n    border: 'none',\n    color: 'rgba(0, 0, 0, 0.26)',\n    fontSize: 45,\n    padding: 0,\n    overflow: 'hidden',\n    minWidth: 0,\n    width: 56,\n  }\n});","import React from 'react'\nimport { withStyles, Grid } from '@material-ui/core';\nimport { inject, observer } from \"mobx-react\";\nimport SearchField from '../../algolia/SearchField';\nimport UserWings from '../../utils/wing/UserWings';\nimport WingsSuggestion from '../../algolia/WingsSuggestion';\nimport Typography from '@material-ui/core/Typography';\nimport OnboardFirstWings from './OnboardFirstWings';\nimport {FormattedMessage} from \"react-intl\";\n\nconst styles = theme => ({\n  userWingsPosition: {\n    paddingTop: 16, \n    height: 'calc(100% - 320px)', \n    [theme.breakpoints.down('sm')]: {\n      height: 'calc(100% - 280px)',\n    },\n    overflowY: 'auto'\n  }\n});\n\nclass OnboardWings extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeStepOne: this.props.activeStep,\n      scrollableClass: Math.floor(Math.random() * 99999)\n    };\n  }\n\n  scrollUserWingsToBottom = () => {\n    try{\n    var elt = document.getElementById(this.state.scrollableClass);\n    elt.scrollTop = elt.scrollHeight;    \n    }catch(e) {\n      // log\n    }\n  }\n\n  addAndSave = (hashtagRecord) => {\n    let record = this.props.recordStore.values.record;\n    record.hashtags.push(hashtagRecord);\n    this.props.recordStore.setRecord(record);\n    this.props.handleSave(['hashtags']);\n  }\n\n  handleAddWing = (e, element) => {\n    if  (e) e.preventDefault();\n    this.props.recordStore.setRecordTag(element.tag);\n    this.props.recordStore.setOrgId(this.props.organisationStore.values.organisation._id);\n    if(this.props.recordStore.values.record.hashtags.find(elt => elt.tag === element.tag)) return Promise.resolve();\n    return this.props.recordStore.getRecordByTag()\n    .then(hashtagRecord => {\n      this.addAndSave(hashtagRecord);\n    }).catch(() => {\n      let newRecord= {\n        tag: element.tag,\n        name: element.name || (element.tag).substr(1)\n      };\n      this.props.recordStore.postRecord(newRecord)\n      .then((hashtagRecord) => {\n        this.addAndSave(hashtagRecord);\n      }).catch();\n    });\n  }\n\n  handleRemoveWing = (e, tag) => {\n    e.preventDefault();\n    let record = this.props.recordStore.values.record;\n    let newHashtags = record.hashtags.filter(hashtag => hashtag.tag !== tag);\n    record.hashtags = newHashtags;\n    this.props.recordStore.setRecord(record);\n    this.props.handleSave(['hashtags']);\n  }\n\n  renderTitleByStep = () => {\n    if (this.isFirstWings()) {\n      return (\n        <Typography variant=\"h4\" style={{textAlign: 'center', padding: 8, color:this.props.theme.palette.primary.dark}} >\n          <FormattedMessage id={'onboard.chooseYourFirstWings'}/>\n        </Typography>\n      );\n    } else if (this.isFeaturedWings()) {\n      return (\n        <Typography variant=\"h4\" style={{textAlign: 'center', padding: 8, color:this.props.theme.palette.primary.dark}} >{this.getFeaturedWings() ? this.getFeaturedWings().intro :<FormattedMessage id={'onboard.chooseYourWings'}/>}</Typography>\n      );\n    } else {\n      return (\n        <Typography variant=\"h4\" style={{textAlign: 'center', padding: 8, color:this.props.theme.palette.primary.dark}} ><FormattedMessage id={'onboard.chooseYourWings'}/></Typography>\n      );\n    }\n  }\n\n  renderByStep = () => {\n    if (this.isFirstWings()) {\n      return (\n        <Grid container item xs={12} sm={8} md={6} lg={4} >\n          <Grid item xs={12} style={{padding: 8}}>\n            {this.renderTitleByStep()}\n          </Grid>\n          <Grid item xs={12}>\n            <OnboardFirstWings handleAddWing={this.handleAddWing} />\n          </Grid>\n        </Grid>\n      );\n    } else {\n      return (\n        <Grid container item xs={12} sm={8} md={6} lg={4} >\n          <Grid item xs={12} style={{padding: 8}}>\n            {this.renderTitleByStep()}\n          </Grid>\n          <Grid item xs={12} style={{padding: 16, paddingBottom: 0, paddingTop:0}}>\n            <SearchField  hashtagOnly handleAddWing={this.handleAddWing} \n                          wingsFamily={this.isFeaturedWings() ? this.props.activeStepLabel : null} />\n          </Grid>\n          <Grid item xs={12} >\n            <WingsSuggestion  handleAddWing={this.handleAddWing} handleSave={this.props.handleSave} \n                              wingsFamily={this.isFeaturedWings() ? this.props.activeStepLabel : null} \n                              SuggestionsController={this.props.SuggestionsController} stepLabel={this.props.activeStepLabel} />\n          </Grid>\n        </Grid>\n      );\n    }\n  }\n\n  isFirstWings = () => (this.props.activeStepLabel === 'firstWings');\n  isFeaturedWings = () => (this.props.activeStepLabel && this.props.activeStepLabel.charAt(0) === '#');\n  getFeaturedWings = () => this.props.organisationStore.values.organisation.featuredWingsFamily.filter(fam => fam.tag === this.props.activeStepLabel)[0];\n\n  render() {\n    const {classes} = this.props;\n    return (\n        <Grid container direction=\"column\" style={{height: 'calc(100vh - 73px)', background: 'white', overflow: 'hidden'}}>\n          <Grid item style={{background: this.props.theme.palette.primary.main, maxWidth: '100%', position: 'relative', zIndex: 2,\n            boxShadow: 'rgba(0, 0, 0, 0.2) 0px 1px 8px 0px, rgba(0, 0, 0, 0.14) 0px 3px 4px 0px, rgba(0, 0, 0, 0.12) 0px 3px 3px -2px',\n            }} \n            justify=\"center\" direction=\"row\" container > \n            {this.renderByStep()}\n          </Grid>\n\n          <Grid item justify=\"center\" direction=\"row\" container className={classes.userWingsPosition} id={this.state.scrollableClass}>\n            <Grid container  item xs={12} sm={8} md={6} lg={4}>\n              <Grid item xs={12} >\n                <UserWings handleRemoveWing={this.handleRemoveWing} wingsFamily={this.isFeaturedWings() ? this.getFeaturedWings() : null}\n                            scrollUserWingsToBottom={this.scrollUserWingsToBottom} />\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n    );\n  }\n}\n\nexport default inject('commonStore', 'recordStore', 'organisationStore')(\n  observer(\n    withStyles(styles, {withTheme: true})(OnboardWings)\n  )\n);\n","import React from 'react';\nimport { withStyles } from '@material-ui/core';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport classNames from 'classnames';\nimport Fab from '@material-ui/core/Fab';\nimport CheckIcon from '@material-ui/icons/Check';\nimport SaveIcon from '@material-ui/icons/Save';\nimport green from '@material-ui/core/colors/green';\n\nconst styles = {\n  fabProgress: {\n    color: green[500],\n    position: 'absolute',\n    top: -6,\n    left: -6,\n    zIndex: 1,\n  },\n  buttonSuccess: {\n    backgroundColor: green[500],\n    color: 'white',\n    '&:hover': {\n      backgroundColor: green[500],\n    }\n  },\n};\n\nclass LoaderFeedback extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      success: false,\n      loading: false,\n    };\n  }\n\n  componentDidMount() {\n    this.feedback();\n  }\n\n  feedback = async () => {\n    this.setState({loading: true}, () => {\n      setTimeout(() => {this.setState({loading: false, success: true})}, 750);\n    })\n  }\n\n  render() {\n\n    const {success, loading} = this.state;\n    const {classes} = this.props;\n\n    const buttonClassname = classNames({\n      [classes.buttonSuccess]: success,\n    });\n\n    return (\n      <div {...this.props}>\n        <Fab color=\"inherit\" className={buttonClassname}>\n          {success ? <CheckIcon /> : <SaveIcon />}\n        </Fab>\n        {loading && <CircularProgress size={68} className={classes.fabProgress} />}\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(LoaderFeedback);\n","import React from 'react'\nimport { withStyles, Grid } from '@material-ui/core';\nimport { inject, observer } from \"mobx-react\";\nimport MobileStepper from '@material-ui/core/MobileStepper';\nimport Button from '@material-ui/core/Button';\nimport KeyboardArrowLeft from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRight from '@material-ui/icons/KeyboardArrowRight';\nimport { Redirect } from 'react-router-dom';\n\nimport OnboardIntro from './steps/OnboardIntro';\nimport OnboardContacts from './steps/OnboardContacts';\nimport OnboardWings from './steps/OnboardWings';\nimport SlackService from '../../services/slack.service';\n\nimport { withSnackbar } from 'notistack';\nimport LoaderFeedback from '../utils/buttons/LoaderFeedback';\n\nimport SwipeableViews from 'react-swipeable-views';\nimport { virtualize, bindKeyboard } from 'react-swipeable-views-utils';\nimport {FormattedMessage} from \"react-intl\";\nimport classNames from 'classnames';\n\nconst VirtualizeSwipeableViews = bindKeyboard(virtualize(SwipeableViews));\n\nlet timeoutArray = [];\n\nconst styles = theme => ({\n  root: {\n    background: theme.palette.primary.dark\n  },\n  stepperButton: {\n    background: 'none',\n    boxShadow: 'none',\n    padding: '8px 16px',\n    color:'white',\n    '&:hover' : {\n      background: 'rgba(255, 255, 255, 0.12)',\n    },\n    '&:first-child()': {\n      width: 40,\n    }\n  },\n  stepperButtonHighlighted: {\n    background: theme.palette.secondary.main,\n    '&:hover' : {\n      background: theme.palette.secondary.dark,\n    },\n  }\n});\n\nclass OnboardStepper extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeStep: this.props.initStep || 0,\n      steps: this.makeSteps(),\n      canNext: true\n    };\n  }\n\n  componentDidMount() {\n    this.initializeSuggestions(this.state.steps[this.state.activeStep]);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if(nextProps.initStep !== this.props.initStep) {\n      this.setState({activeStep: nextProps.initStep}, () => {this.forceUpdate()});\n    }\n  }\n\n  /**\n   * @description Make steps array thanks to organisation data\n   */\n  makeSteps = () => {\n    var steps = ['intro', 'contacts', 'firstWings', 'wings'];\n    if (this.props.organisationStore.values.organisation && this.props.organisationStore.values.organisation.featuredWingsFamily) {\n      var familySteps = this.props.organisationStore.values.organisation.featuredWingsFamily.map(\n        fam => fam.tag\n      );\n      steps = steps.concat(familySteps);\n    }\n    return steps;\n  }\n\n  initializeSuggestions = (currentStep) => {\n    if(currentStep && (currentStep === 'wings' || currentStep.charAt(0) === '#')) {\n      this.props.SuggestionsController.initSuggestions(currentStep, this.props.algoliaKey);\n    }\n  }\n\n  handleNext = () => {\n    if(this.props.edit){ \n      this.props.recordStore.setOrgId(this.props.organisationStore.values.organisation._id);\n      this.props.recordStore.getRecordByUser().then().catch();\n      return this.setState({redirectTo: \n                        '/' + this.props.commonStore.locale + \n                        '/' + this.props.organisationStore.values.orgTag + \n                        '/' + this.props.recordStore.values.record.tag }, () => {this.forceUpdate()});\n    }\n\n    this.initializeSuggestions(this.state.steps[this.state.activeStep+1]);\n    \n    if ((this.state.activeStep === (this.state.steps.length - 1))) {\n      // click on finish\n      let user = this.props.userStore.values.currentUser;\n      try {\n        SlackService.notify('#alerts', 'We have a new User! ' +\n                            (user.email ? user.email.value : (user.google? user.google.email : user._id)) +\n                            ' in ' + this.props.organisationStore.values.organisation.tag);\n      }catch(e) {\n        // log\n      }\n\n      this.welcomeUser();\n      this.setState({ redirectTo: '/' + this.props.commonStore.locale + '/' + this.props.organisationStore.values.orgTag + '/congrats' }, ()=> {this.forceUpdate()});\n    } else {\n      this.setState(state => ({\n        activeStep: state.activeStep + 1,\n      }), () => {this.forceUpdate()});\n    }\n  };\n\n  welcomeUser = () => {\n    this.props.userStore.welcomeCurrentUser(this.props.organisationStore.values.organisation._id);\n  }\n\n  shouldComponentUpdate(nextState) {\n    if(this.state.showFeedback !== nextState.showFeedback) return true;\n    return false;\n  }\n\n  handleBack = () => {\n    if(this.props.edit) return this.setState({redirectTo: \n      '/' + this.props.commonStore.locale + \n      '/' + this.props.organisationStore.values.orgTag + \n      '/' + this.props.recordStore.values.record.tag }, () => {this.forceUpdate()});\n\n    this.initializeSuggestions(this.state.steps[this.state.activeStep-1])\n\n    this.setState(state => ({\n      activeStep: state.activeStep - 1,\n    }), () => {this.forceUpdate()});\n  };\n\n  getStepComponent(steps, activeStep) {\n    switch (steps[activeStep]) {\n      case 'intro':\n        return OnboardIntro;\n      case 'contacts':\n        return OnboardContacts;\n      // case 'firstWings':\n      //   return OnboardFirstWings;\n      default:\n        return OnboardWings;\n    }\n  }\n\n  handleSave = async (arrayOfLabels) => {\n    this.props.recordStore.setRecordId(this.props.recordStore.values.record._id);\n    return await this.props.recordStore.updateRecord(arrayOfLabels).then((record) => {\n      //this.props.enqueueSnackbar('Your data has been saved successfully', {variant: 'success'});\n      timeoutArray.forEach(tm => { clearTimeout(tm) });\n      timeoutArray = [];\n      this.setState({ showFeedback: true }, () => {\n        timeoutArray.push(setTimeout(() => { this.setState({ showFeedback: false }) }, 2000));\n      })\n    }).catch((e) => {\n      console.error(e);\n      this.props.enqueueSnackbar('Your data can\\'t be saved, please check the errors', { variant: 'warning' });\n    });\n  }\n\n  handleStepChange = activeStep => {\n    this.setState({ activeStep });\n  };\n\n  getNextButtonText = () => {\n    if(this.props.edit) return <FormattedMessage id={'onboard.edit.save'}/>\n    else if (this.state.activeStep === (this.state.steps.length -1)) return <FormattedMessage id={'onboard.stepperFinish'}/>\n    else return <FormattedMessage id={'onboard.stepperNext'}/>\n  }\n\n  shouldNextBeHighlighted = (activeStepLabel) => {\n    let record = this.props.recordStore.values.record;\n    switch (activeStepLabel) {\n      case 'intro':\n        if(record.intro && record.intro.length > 1 && record.name && record.name.length > 1) return true;\n        else return false;\n      case 'contacts':\n        if(record.links && record.links.length > 0) return true;\n        return false;\n      case 'firstWings':\n        if(record.hashtags && record.hashtags.length > 0) return true;\n        return false;\n      case 'wings':\n        if(record.hashtags && record.hashtags.length > 9) return true;\n        return false;\n      default:\n        return false;\n    }\n  }\n\n  render() {\n    const { theme, classes, edit } = this.props;\n    const { organisation, orgTag } = this.props.organisationStore.values;\n    const {locale} = this.props.commonStore;\n    const { activeStep, steps, canNext, showFeedback, redirectTo } = this.state;\n    // let StepComponent = this.getStepComponent(steps, activeStep);\n    let wantedUrl = '/' + locale + '/' + (organisation.tag || orgTag) + '/onboard/' + steps[activeStep].replace('#', '%23');\n    if (redirectTo && window.location.pathname !== redirectTo) return (<Redirect push to={redirectTo} />);\n    return (\n      <Grid style={{ height: '100vh' }} item>\n        { ( (window.location.pathname !== wantedUrl) && (window.location.pathname !== wantedUrl + '/edit') && !edit ) && (\n          <Redirect push to={wantedUrl} />\n        )}\n        <div style={{ width: '100%', background: '#2B2D3C', borderBottom: '1px solid rgba(0, 0, 0, 0.12)'}}>\n          <Grid item xs={12} sm={8} md={6} lg={4} style={{ position: 'relative', left: 0, right: 0, margin: 'auto'}} >\n            <MobileStepper\n              variant=\"dots\"\n              steps={3}\n              position=\"static\"\n              activeStep={(edit ? -1 : Math.min(activeStep, 2))}\n              style={{ maxWidth: '100%' }}\n              className={classes.root}\n              nextButton={\n                <Button size=\"small\" onClick={this.handleNext} disabled={!canNext} \n                        className={classNames(classes.stepperButton, (this.shouldNextBeHighlighted(steps[activeStep]) ? classes.stepperButtonHighlighted : null ))   } >\n                  {this.getNextButtonText()}\n                  {theme.direction === 'rtl' ? <KeyboardArrowLeft /> : <KeyboardArrowRight />}\n                </Button>\n              }\n              backButton={\n                <Button size=\"small\" onClick={this.handleBack} disabled={activeStep === 0} className={classes.stepperButton} >\n                  {theme.direction === 'rtl' ? <KeyboardArrowRight /> : <KeyboardArrowLeft />}\n                  <FormattedMessage id={'onboard.stepperBack'}/>\n                </Button>\n              }\n            />\n          </Grid>\n        </div>\n\n        <VirtualizeSwipeableViews\n          index={activeStep}\n          onChangeIndex={this.handleStepChange}\n          style={{height: 'calc(100vh - 73px)'}}\n          disabled={true}\n          slideRenderer={(params) => {\n            const { index } = params;\n            let StepComponent = this.getStepComponent(steps, index);\n            return(\n              <Grid item style={{ height: '100%' }} key={index} >\n                <StepComponent handleSave={this.handleSave} activeStep={activeStep} activeStepLabel={steps[index]} \n                              SuggestionsController={this.props.SuggestionsController} />\n              </Grid>\n            )\n          }}\n        >\n        </VirtualizeSwipeableViews>\n\n\n\n        {showFeedback && (\n          <LoaderFeedback\n            value={Date.now()}\n            style={{\n              position: 'fixed',\n              bottom: 16,\n              zIndex: 999,\n              left: 0,\n              right: 0,\n              margin: 'auto',\n              width: 60,\n              textAlign: 'center',\n            }} />\n        )}\n\n      </Grid>\n    );\n  }\n}\n\nexport default inject('commonStore', 'recordStore', 'organisationStore', 'userStore')(\n  observer(\n    withSnackbar(\n      withStyles(styles, { withTheme: true })(OnboardStepper)\n    )\n  )\n);\n","import commonStore from '../stores/common.store';\nimport recordStore from '../stores/record.store';\nimport AlgoliaService from './algolia.service';\nimport { observable, decorate } from 'mobx';\n\nclass SuggestionsService {\n\n  constructor(){\n    this._currentSuggestions = [];\n    this._bank = [];\n    this._workInProgress = false;\n    this._user = [];\n    this._randomNumber = 0;\n\n    this._newSuggestions = [];\n  }\n\n  async init(algoliaKey){\n    await AlgoliaService.setAlgoliaKey(algoliaKey);\n    this._bank = await this.syncBank(null);\n  }\n\n  /**\n * @description Sync wings bank with current state bank\n */\n  syncBank = async (filters) => AlgoliaService.loadBank(filters).then(() => { return commonStore.getLocalStorage('wingsBank', true) });\n\n\n  getCurrentSuggestions = () => {\n    this._currentSuggestions = this.removeUserWings(this._currentSuggestions);\n    return this._currentSuggestions;\n  }\n\n  makeInitialSuggestions = async (wingsFamily, id) => { \n    this._currentSuggestions = [];\n    this._newSuggestions = [];\n    if (!wingsFamily) {\n      await this.fetchSuggestions(null, true, 15);\n      await this.fetchSuggestions(null, false, 10);\n      if(this._currentSuggestions.length < 10) {\n        await this.fetchPublicHashtags(10);\n      }\n\n      this.populateSuggestionsData();\n      let query = this.formatHashtagsQuery();\n      if (query)\n        this.syncBank(query)\n          .then((bank) => {\n            this._bank = bank;\n            this.populateSuggestionsData();\n          }).catch(e => {console.log(e)})\n      else {\n      }\n    } else {\n      await this.fetchWingsFamily(wingsFamily);\n    }\n  }\n\n  fetchWingsFamily = (wingsFamily) => {\n    return AlgoliaService.fetchHits('type:hashtag AND hashtags.tag:' + wingsFamily, null, null, null)\n      .then(content => {\n        if (content) {\n          this._currentSuggestions = content.hits;\n        }\n      }).catch();\n  }\n\n  addHitsToSuggestions = (hits, nbHitToAdd) => {\n    let suggestions = this._currentSuggestions;\n    for (let i = 0; i < nbHitToAdd; i++) {\n\n      let suggestionToAdd = hits.splice(i, 1)[0];\n      if(!suggestionToAdd) continue;\n\n      suggestionToAdd.tag = suggestionToAdd.value || suggestionToAdd.tag;\n      if(suggestionToAdd && !this.isInSuggestions(suggestionToAdd.tag) && !this.isInUserWings(suggestionToAdd.tag)){\n        // console.log('>>>>>>>>> ADD >>>>>>>>>> '  + suggestionToAdd.tag)\n        suggestions.push(suggestionToAdd);\n        this._newSuggestions.push(suggestionToAdd);\n      } else if (suggestionToAdd && !this.isInUserWings(suggestionToAdd.tag)) {\n        this._newSuggestions.push(suggestionToAdd);\n      }\n      else i--;\n    }\n    return suggestions;\n  }\n\n  fetchPublicHashtags = (nbHitToAdd) => {\n    return AlgoliaService.fetchHashtags()\n    .then(content => {\n      if (!content.hits || content.hits.length === 0) return;\n      this._currentSuggestions = this.addHitsToSuggestions(this.removeUserWings(content.hits), nbHitToAdd);\n    }).catch((e) => { console.log(e) });\n  }\n\n  /**\n   * @description Fetch suggestions and add them to suggestions list thanks to Algolia\n   */\n  fetchSuggestions = (lastSelection, privateOnly, nbHitToAdd) => {\n    return AlgoliaService.fetchFacetValues(lastSelection, privateOnly, 'type:person', null)\n      .then(content => {\n        if (!content.facetHits || content.facetHits.length === 0) return;\n        this._currentSuggestions = this.addHitsToSuggestions(this.removeUserWings(content.facetHits), nbHitToAdd);\n      }).catch((e) => { console.log(e) });\n  }\n\n  isInSuggestions = (tag) => (this._currentSuggestions.filter(suggestion => suggestion.tag === tag).length > 0);\n\n  isInUserWings = (tag) => (recordStore.values.record.hashtags.filter(hashtag => hashtag.tag === tag).length > 0);\n\n  /**\n   * @description Remove user Wings for Wings suggestions\n   */\n  removeUserWings = (suggestions) => {\n    let suggestionsToReturn = suggestions;\n    suggestions.forEach(suggestion => {\n      let suggestionTag = suggestion.value || suggestion.tag;\n      try {\n        if (recordStore.values.record.hashtags.findIndex(hashtag => {return (hashtag.tag === (suggestionTag))}) > -1) {\n          let index = suggestionsToReturn.findIndex(sugInRet => (sugInRet.tag === suggestionTag) || (sugInRet.value === suggestionTag));\n          if (index > -1) suggestionsToReturn.splice(index, 1);\n        }\n      } catch (e) {\n      }\n    });\n    return suggestionsToReturn;\n  }\n\n  /**\n   * @description Fetch and add new suggestions after user choose a Wing\n   * @param filters Record object selected\n   * @param index Index of the object in the suggestions displayed list\n   */\n  updateSuggestions = async (filters, index) => {\n    this._newSuggestions = [];\n    await this.fetchSuggestions(filters, true, 2, index);\n    await this.fetchSuggestions(null, true, 2, index);\n    await this.fetchSuggestions(filters, false, 2, index);\n    await this.fetchSuggestions(null, false, 1, index);\n    if(this._newSuggestions.length < 3) {\n      await this.fetchPublicHashtags(4);\n    }\n\n    this.populateSuggestionsData(true);\n    let query = this.formatHashtagsQuery();\n    if (query)\n      await this.syncBank(query)\n        .then((bank) => {\n          this._bank = bank;\n          this.populateSuggestionsData(true);\n        });\n  }\n\n  /**\n   * @description Get complete Wing data by tag thanks to current Wings bank\n   */\n  getData = (tag) => {\n    if (this._bank)\n      return this._bank.find(bankElt => bankElt.tag === tag);\n    else\n      return null;\n  }\n\n  /**\n   * @description Populate all suggestions data thanks to current Wings bank\n   */\n  populateSuggestionsData = (isNewSuggestions) => {\n    if(!isNewSuggestions) {\n      let suggestions = this._currentSuggestions;\n      // eslint-disable-next-line\n      this._currentSuggestions.map((suggestion, i) => {\n        suggestions[i] = this.getData(suggestion.tag) || suggestion;\n      });\n      this._currentSuggestions = suggestions;\n    } else {\n      let suggestions = this._newSuggestions;\n      // eslint-disable-next-line\n      this._newSuggestions.map((suggestion, i) => {\n        suggestions[i] = this.getData(suggestion.tag) || suggestion;\n      });\n      this._newSuggestions = suggestions;\n    }\n  }\n\n  /**\n * @description Format query to fetch missing Wings data with Algolia\n */\n  formatHashtagsQuery = () => {\n    let query = '';\n    this._currentSuggestions.forEach(suggestion => {\n      if (!suggestion.objectID)\n        query += (query !== '' ? ' OR' : '') + ' tag:' + suggestion.tag;\n    });\n    return query;\n  }\n\n}\n\ndecorate(SuggestionsService, {\n  _randomNumber: observable,\n  _newSuggestions: observable\n});\n\nexport default new SuggestionsService();\n","import { observable, decorate, action } from 'mobx';\nimport SuggestionsService from './suggestions.service';\n\nclass SuggestionsControllerService {\n\n  constructor(){\n    this._currentSuggestions = {\n      all: [],\n      even: [],\n      odd: [],\n    };\n\n    this._newSuggestions = {\n      all: [],\n      even: [],\n      odd: [],\n    };\n\n    this._observeUpdate = Math.random();\n  }\n\n  getCurrentSuggestions = () => {\n    return this._currentSuggestions;\n  }\n\n  reset = () => {\n    this._currentSuggestions = {\n      all: [],\n      even: [],\n      odd: [],\n    };\n\n    this._newSuggestions = {\n      all: [],\n      even: [],\n      odd: [],\n    };\n\n    // this.logData('in reset');\n  }\n\n  initSuggestions = (wingsFamily, algoliaKey) => {\n    this.reset();\n    SuggestionsService.init(algoliaKey)\n    .then(()=> {\n      SuggestionsService.makeInitialSuggestions((wingsFamily.charAt(0) === '#' ? wingsFamily : null))\n      .then(() => {\n        this._currentSuggestions.all = SuggestionsService.getCurrentSuggestions();\n        this.makeInitialSuggestionsList();\n        this._observeUpdate = Math.random();\n        // this.logData('in init suggestions');\n      });\n    });\n  }\n\n  makeNewSuggestions = async (element, index) => {\n    let indexRemoved = this._currentSuggestions.all.findIndex(suggestion => suggestion.tag === element.tag);\n    if(indexRemoved !== -1){\n      this._currentSuggestions.all.splice(indexRemoved, 1); \n      if(this._currentSuggestions.even[index] && this._currentSuggestions.even[index].tag === element.tag)\n        this._currentSuggestions.even.splice(index, 1);\n      if(this._currentSuggestions.odd[index] && this._currentSuggestions.odd[index].tag === element.tag)\n        this._currentSuggestions.odd.splice(index, 1);\n    }\n    await SuggestionsService.updateSuggestions(element, indexRemoved)\n    .then(() => {\n      this._newSuggestions.all = SuggestionsService._newSuggestions;\n      if(this._newSuggestions.all.length === 0){\n        return;\n      }\n      this.makeNewSuggestionsList();\n\n      let counter = 0;\n      this._newSuggestions.all.forEach( (newS) => {\n        let indexInCurrent = this._currentSuggestions.all.findIndex(sug => (sug.tag === newS.tag))\n        if(indexInCurrent === -1){\n          this._currentSuggestions.all.splice(indexRemoved + counter, 0, newS);\n          counter++;\n        }else if( true || indexInCurrent > indexRemoved){\n          // if indexInCurrent > indexRemoved => move the suggestions\n          // console.log('>>>>>>>>>>>>>>>>>>>>>>>>>>>>> move suggestion')\n          // console.log(newS.tag + ' from ' + indexInCurrent + ' to ' + (indexRemoved));\n          this._currentSuggestions.all.splice(indexInCurrent, 1);\n          this._currentSuggestions.all.splice(indexRemoved, 0, newS);\n          counter++;\n        }\n      });\n      this.makeInitialSuggestionsList();\n      this._observeUpdate = Math.random();\n      // this.logData('in create new suggestions');\n    })\n  }\n\n  makeInitialSuggestionsList = () => {\n    this._currentSuggestions.even = [];\n    this._currentSuggestions.odd = [];\n    // eslint-disable-next-line\n    this._currentSuggestions.all.map((suggestion, i) => {\n      if(i%2 === 0) {\n        this._currentSuggestions.even.push(suggestion);\n      } else {\n        this._currentSuggestions.odd.push(suggestion);\n      }\n    });\n  }\n\n  makeNewSuggestionsList = () => {\n    this._newSuggestions.even = [];\n    this._newSuggestions.odd = [];\n    // eslint-disable-next-line\n    this._newSuggestions.all.map((suggestion, i) => {\n      if(i%2 === 0) {\n        this._newSuggestions.even.push(suggestion);\n      } else {\n        this._newSuggestions.odd.push(suggestion);\n      }\n    });\n  }\n\n  logData = (log) => {\n    console.log('--- --- --- ---')\n    if(log) console.log(log);\n    console.log('currentSuggestions all : ' + this._currentSuggestions.all.length);\n    console.log('currentSuggestions even : ' + this._currentSuggestions.even.length);\n    console.log('currentSuggestions odd : ' + this._currentSuggestions.odd.length);\n    \n    console.log('newSuggestions all : ' + this._newSuggestions.all.length);\n    console.log('newSuggestions even : ' + this._newSuggestions.even.length);\n    console.log('newSuggestions odd : ' + this._newSuggestions.odd.length);    \n    this.logSuggestionsTag()\n    console.log('--- --- --- ---')\n  }\n\n  logSuggestionsTag = () => {\n    this._newSuggestions.all.forEach(elt => {\n      console.log(elt.tag);\n    })\n  }\n\n}\n\ndecorate(SuggestionsControllerService, {\n  _currentSuggestions: observable,\n  _newSuggestions: observable,\n  _observeUpdate: observable,\n  makeNewSuggestions: action,\n  makeInitialSuggestionsList: action,\n  getCurrentSuggestions: action,\n});\n\nexport default new SuggestionsControllerService();\n","import React from 'react'\nimport { inject, observer } from \"mobx-react\";\nimport { observe } from 'mobx';\nimport OnboardWelcome from '../components/onboard/OnboardWelcome';\nimport OnboardStepper from '../components/onboard/OnboardStepper';\nimport { withStyles } from '@material-ui/core';\nimport SuggestionsController from '../services/suggestionsController.service';\nimport ReactGA from 'react-ga';\nReactGA.initialize(process.env.REACT_APP_GOOGLE_ANALYTICS_ID);\n\nconst styles = {\n  logo: {\n    width: '6.5rem',\n    height: '6.5rem',\n    boxShadow: '0 5px 15px -1px darkgrey, 0 0 0 5px transparent',\n    bottom: '3.6rem',\n    marginBottom: '-7rem',\n    zIndex: 2,\n  }\n};\n\nclass OnboardPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      inOnboarding: false,\n      observer: ()=>{},\n      stepNumber: 0,\n      editMode: this.props.edit || false,\n      renderComponent: (this.props.edit ? false : true)\n    };\n\n    // clear wings bank\n    this.props.commonStore.setLocalStorage('wingsBank', [], true);\n  }\n\n  componentDidMount() {\n    this.props.history.listen((location, action) => {\n      ReactGA.pageview(window.location.pathname);\n      // The react router dom params are updated async\n      setTimeout(() => this.populateStep(this.props.match.params.step), 10);\n    });\n\n    this.setState({observer: observe(this.props.recordStore.values, 'record', (change) => {\n      this.forceUpdate();\n    })});\n    if(this.props.match && this.props.match.params && this.props.match.params.recordId && this.props.edit) {\n      this.props.recordStore.setRecordId(this.props.match.params.recordId);\n      this.props.recordStore.getRecord()\n      .then(() => {this.setState({renderComponent: true})}).catch(err => console.log(err));\n    } else {\n      this.getRecordForUser()\n      .then(() => {this.setState({renderComponent: true})}).catch(err => console.log(err));\n    }\n    if (this.props.match && this.props.match.params && this.props.match.params.step) {\n      this.populateStep(this.props.match.params.step);\n    }\n  }\n\n  componentWillUnmount() {\n    this.state.observer();\n  }\n\n  populateStep = (stepLabel) => {\n    switch (stepLabel) {\n      case 'intro':\n        this.setState({stepNumber: 0, inOnboarding: true});\n        break;\n      case 'contacts':\n        this.setState({stepNumber: 1, inOnboarding: true});\n        break;\n      case 'firstWings':\n        this.setState({stepNumber: 2, inOnboarding: true});\n        break;\n      case 'wings':\n        this.setState({stepNumber: 3, inOnboarding: true});\n        break;\n      default:\n        if(stepLabel && (stepLabel.replace('%23', '#')).charAt(0) === '#') {\n          this.setState({stepNumber: 3, inOnboarding: true});\n        }\n        break;\n    }\n  }\n\n  getRecordForUser = () => {\n    if(!this.props.recordStore.values.orgId) {\n      this.props.recordStore.setOrgId(this.props.organisationStore.values.organisation._id);\n    }\n    return this.props.recordStore.getRecordByUser();\n  }\n\n  handleEnterToOnboard = () => {\n    this.setState({inOnboarding: true});\n  }\n\n  render() {\n    const {inOnboarding, stepNumber, editMode, renderComponent} = this.state;\n\n    if(!renderComponent) return null;\n\n    if(!inOnboarding) {\n      return (\n        <OnboardWelcome handleEnterToOnboard={this.handleEnterToOnboard} />\n      );\n    } else {\n      return (\n        <div>\n          <main>\n            <OnboardStepper initStep={stepNumber} SuggestionsController={SuggestionsController} edit={editMode} />\n          </main>\n        </div>\n      );\n    }\n  }\n}\n\nexport default inject('commonStore', 'organisationStore', 'recordStore', 'userStore')(\n  observer(\n    withStyles(styles, {withTheme: true})(OnboardPage)\n  )\n);\n","import React from \"react\";\nimport { Route, Switch, Redirect, withRouter } from 'react-router-dom';\nimport UrlService from '../services/url.service';\nimport AuthPage from '../pages/auth/AuthPage';\nimport PasswordForgot from \"../pages/auth/PasswordForgot\";\nimport PasswordReset from \"../pages/auth/PasswordReset\";\nimport { inject, observer } from 'mobx-react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport EmailService from '../services/email.service';\nimport SearchPage from \"../pages/SearchPage\";\nimport SlackService from '../services/slack.service';\nimport ReactGA from 'react-ga';\nimport OnboardPage from \"../pages/OnboardPage\";\nReactGA.initialize(process.env.REACT_APP_GOOGLE_ANALYTICS_ID);\n\nclass MainRouteOrganisationRedirect extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      redirectTo: null,\n      locale: this.props.commonStore.getCookie('locale') || this.props.commonStore.locale,\n      renderComponent: false,\n      invitationCode: ((this.props.match.params && this.props.match.params.invitationCode) ? this.props.match.params.invitationCode : null ),\n    };\n\n    // if there is a wings to add, we should save it\n    if(this.props.hashtagsFilter && this.props.match.params && this.props.match.params.action &&  (this.props.match.params.action === 'add' || this.props.match.params.action === 'filter' ) ) {\n      this.persistWingToAdd((this.props.match.params.action));\n    }\n  }\n\n  componentWillReceiveProps(props) {\n    if (props.history.action === 'PUSH' && ( (props.match.params.organisationTag !== this.props.organisationStore.values.orgTag) || (!this.props.organisationStore.values.fullOrgFetch) ) ) {\n      this.setState({ renderComponent: false }, () => {\n        this.manageAccessRight().then(() => {\n          this.setState({ renderComponent: true });\n        }).catch((err) => {\n          ReactGA.event({category: 'Error',action: 'Redirect to error layout', value: 500});\n          SlackService.notifyError(err, '32', 'quentin', 'MainRouteOrganisationRedirect.js');\n          this.setState({redirectTo: '/' + this.state.locale + '/error/500/routes'});\n        });\n      });\n    }\n  }\n\n  persistWingToAdd = (isAction) => {\n    try {\n      let hashtags = this.props.match.params.hashtags;\n      if(hashtags && hashtags.charAt(0) !== '@') this.props.commonStore.setCookie('hashtagsFilter', hashtags);\n      if(isAction) this.props.commonStore.setCookie('actionInQueue', this.props.match.params.action);\n    }catch(e) {\n      // error\n    }\n  }\n\n  componentDidMount() {\n    this.manageAccessRight().then(() => {\n      this.setState({ renderComponent: true });\n    }).catch((err) => {\n      ReactGA.event({category: 'Error',action: 'Redirect to error layout', value: 500});\n      SlackService.notifyError(err, '42', 'quentin', 'MainRouteOrganisationRedirect.js');\n      this.setState({redirectTo: '/' + this.state.locale + '/error/500/routes'});\n    });\n  }\n\n  /**\n   * @description Perform the authorization process to access the organisation or not\n   * @param {Organisation} organisation \n   */\n  canUserAccessOrganisation(organisation) {\n    if (!organisation) return false;\n    if (organisation.public) {\n      return true;\n    } else {\n      if (!this.props.authStore.isAuth()) return false;\n      if(!this.props.userStore.values.currentUser._id) return false;\n      if (this.props.userStore.values.currentUser.superadmin) return true;\n      if(this.props.userStore.values.currentUser.orgsAndRecords.length === 0 || !this.props.userStore.values.currentUser.orgsAndRecords) return false;\n      return (this.props.userStore.values.currentUser.orgsAndRecords.find(orgAndRecord => orgAndRecord.organisation === organisation._id) !== undefined);\n    }\n  }\n\n  /**\n   * @description Redirect user who is auth but hasn't access to current organisation\n   */\n  async redirectUserAuthWithoutAccess() {\n    if (this.props.userStore.values.currentUser.orgsAndRecords && this.props.userStore.values.currentUser.orgsAndRecords.length > 0) {\n      let orgId = this.props.userStore.values.currentUser.orgsAndRecords[0].organisation;\n      if(orgId) {\n        this.props.organisationStore.setOrgId(orgId);\n        await this.props.organisationStore.getOrganisation()\n        .then(organisation => {\n          this.redirectUserAuthWithAccess(organisation, true);\n        }).catch(() => {return;})\n      } else {\n        // Redirect to \"create new Wingzy\"\n        window.location.href = UrlService.createUrl(process.env.REACT_APP_HOST_BACKFLIP, '/new/presentation', undefined);\n        await this.wait(3000);\n      }\n    } else {\n      // Redirect to \"create new Wingzy\"\n      window.location.href = UrlService.createUrl(process.env.REACT_APP_HOST_BACKFLIP, '/new/presentation', undefined);\n      await this.wait(3000);\n    }\n  }\n\n  /**\n   * @description Redirect user who is auth and has access to organisation provided\n   * @param {Organisation} organisation \n   * @param {Boolean} isNewOrg \n   */\n  async redirectUserAuthWithAccess(organisation, isNewOrg) {\n    let currentOrgAndRecord = this.props.userStore.values.currentUser.orgsAndRecords.find(orgAndRecord => orgAndRecord.organisation === organisation._id);\n    if ( (!currentOrgAndRecord && !this.props.userStore.values.currentUser.superadmin) || (currentOrgAndRecord && !currentOrgAndRecord.welcomed)) {\n      // user need to onboard in organisation\n      this.setState({redirectTo: '/' + this.state.locale + '/' + organisation.tag + '/onboard'});\n      //window.location.href = UrlService.createUrl(process.env.REACT_APP_HOST_BACKFLIP, '/onboard/intro', organisation.tag, 'first=true');\n      //await this.wait(3000);\n    } else if (currentOrgAndRecord) {\n      this.props.recordStore.setRecordId(currentOrgAndRecord.record);\n      await this.props.recordStore.getRecord()\n        .then(() => {\n          if (isNewOrg) this.setState({ redirectTo: '/' + this.state.locale + '/' + organisation.tag });\n        }).catch(() => {\n          this.setState({redirectTo: '/' + this.state.locale + '/' + organisation.tag + '/onboard'});\n          //window.location.href = UrlService.createUrl(process.env.REACT_APP_HOST_BACKFLIP, '/onboard/intro', organisation.tag, 'first=true');\n        });\n    }\n  }\n\n  /**\n   * @description Manage access right of the user and redirect him if needed.\n   */\n  manageAccessRight = async () => {\n    if (this.props.match && this.props.match.params && this.props.match.params.organisationTag) {\n      let organisation = this.props.organisationStore.values.organisation;\n      if (!(this.props.organisationStore.values.orgTag === this.props.match.params.organisationTag)) {\n        this.props.organisationStore.setOrgTag(this.props.match.params.organisationTag);\n        organisation = await this.props.organisationStore.getOrganisationForPublic()\n                      .catch((err) => {\n                        SlackService.notifyError('Someone try to access : ' + this.props.match.params.organisationTag + ' and got 404.', \n                                                  '110', 'quentin', 'MainRouteOrganisationRedirect.js');\n                        ReactGA.event({category: 'Error',action: 'Redirect to error layout', value: 404});\n                        this.setState({redirectTo: '/' + this.state.locale + '/error/404/organisation'});\n                      });\n      }\n\n      if (!this.canUserAccessOrganisation(organisation) && this.props.authStore.isAuth()) {\n        await this.redirectUserAuthWithoutAccess();\n      } else if (this.props.authStore.isAuth()) {\n        this.props.organisationStore.setOrgId(organisation._id);\n        organisation = await this.props.organisationStore.getOrganisation()\n                      .catch((err) => {\n                        if(err.status === 403 && err.response.body.message === 'Email not validated') {\n                          EmailService.confirmLoginEmail(organisation.tag);\n                          this.setState({redirectTo: '/' + this.state.locale + '/error/' + err.status + '/email'});\n                        }\n                        return;\n                      });\n        await this.redirectUserAuthWithAccess(organisation, false).catch(() => {return;});\n      }\n    } else if (this.props.authStore.isAuth()) {\n      await this.redirectUserAuthWithoutAccess();\n    }\n  }\n\n  async wait(ms) {\n    return new Promise((r, j)=>setTimeout(r, ms));\n  }\n\n  resetRedirectTo() {\n    this.setState({ redirectTo: null });\n  }\n  render() {\n    const { redirectTo, renderComponent, invitationCode } = this.state;\n    const { locale } = this.props.commonStore;\n    const { orgTag, organisation } = this.props.organisationStore.values;\n    let isAuth = this.props.authStore.isAuth();\n    if (redirectTo) {\n      this.resetRedirectTo();\n      if (window.location.pathname !== redirectTo) {\n        return (<Redirect to={redirectTo} />);\n      }\n    }\n    \n    if (renderComponent && isAuth) {\n      if(this.props.hashtagsFilter && this.props.match.params && this.props.match.params.action &&  (this.props.match.params.action === 'add' || this.props.match.params.action === 'filter' ) )\n        return <Redirect to={'/' + locale + '/' + orgTag} />;\n      return (\n        <div>\n          <Switch>\n            <Route exact path=\"/:locale(en|fr|en-UK)/:organisationTag/password/forgot\" component={PasswordForgot} />\n            <Route exact path=\"/:locale(en|fr|en-UK)/:organisationTag/password/reset/:token/:hash\" component={PasswordReset} />\n            <Route exact path=\"/:locale(en|fr|en-UK)/:organisationTag/password/create/:token/:hash/:email\" component={PasswordReset} />\n            <Route path=\"/:locale(en|fr|en-UK)/:organisationTag/signin/google/callback\" component={AuthPage} />\n            <Route path=\"/:locale(en|fr|en-UK)/:organisationTag/signup/:invitationCode?\" component={() => { return <AuthPage initialTab={1} /> }} />\n            <Route path=\"/:locale(en|fr|en-UK)/:organisationTag/signin/:invitationCode?\" component={AuthPage} />\n\n            {/* Main route with orgTag */}\n            <Route exact path=\"/:locale(en|fr|en-UK)/:organisationTag/onboard/:step?\" component={OnboardPage} />\n            <Route exact path=\"/:locale(en|fr|en-UK)/:organisationTag/onboard/:step/edit\" component={(props) => <OnboardPage edit={true} {...props} />} />\n            <Route exact path=\"/:locale(en|fr|en-UK)/:organisationTag/onboard/:step/edit/:recordId\" component={(props) => <OnboardPage edit={true} {...props} />} />\n\n            <Route exact path=\"/:locale(en|fr|en-UK)/:organisationTag/:profileTag?\" component={SearchPage} />\n            <Route path=\"/:locale(en|fr|en-UK)/:organisationTag/:action?\" component={SearchPage} />\n          </Switch>\n        </div>\n      );\n    } else if (renderComponent) {\n      return (\n        <div>\n          <Switch>\n            <Route exact path=\"/:locale(en|fr|en-UK)/:organisationTag/password/forgot\" component={PasswordForgot} />\n            <Route exact path=\"/:locale(en|fr|en-UK)/:organisationTag/password/reset/:token/:hash\" component={PasswordReset} />\n            <Route exact path=\"/:locale(en|fr|en-UK)/:organisationTag/password/create/:token/:hash/:email\" component={PasswordReset} />\n            <Route path=\"/:locale(en|fr|en-UK)/:organisationTag/signin/google/callback\" component={AuthPage} />\n            <Route path=\"/:locale(en|fr|en-UK)/:organisationTag/signup/:invitationCode?\" component={() => { return <AuthPage initialTab={1} /> }} />\n            <Route path=\"/:locale(en|fr|en-UK)/:organisationTag/signin/:invitationCode?\" component={AuthPage} />\n\n            {/* Main route with orgTag */}\n            {organisation && organisation.public && (\n              <Route exact path=\"/:locale(en|fr|en-UK)/:organisationTag/:profileTag\" component={SearchPage} />\n            )}\n            {organisation && organisation.public && (\n              <Route exact path=\"/:locale(en|fr|en-UK)/:organisationTag\" component={SearchPage} />\n            )}\n\n            <Redirect to={'/' + locale + (orgTag ? '/' + orgTag : '') + '/signin' + (invitationCode ? '/' + invitationCode : '') +  window.location.search} />\n          </Switch>\n        </div>\n      );\n    } else {\n      return (\n        <div style={{ position: 'absolute', top: '50%', transform: 'translateY(-50%)', textAlign: 'center', width: '100%' }}>\n          <CircularProgress color='secondary' />\n        </div>\n      );\n    }\n  }\n}\n\nexport default inject('commonStore', 'authStore', 'organisationStore', 'userStore', 'recordStore')(\n  withRouter(observer(\n    MainRouteOrganisationRedirect\n  ))\n);\n","import React from 'react'\nimport { Grid, withStyles, Typography } from '@material-ui/core';\nimport { inject, observer } from \"mobx-react\";\nimport Header from '../components/header/Header';\nimport { FormattedHTMLMessage } from 'react-intl';\nimport ProfileService from '../services/profile.service';\nimport UrlService from '../services/url.service';\nimport ReactGA from 'react-ga';\nReactGA.initialize(process.env.REACT_APP_GOOGLE_ANALYTICS_ID);\n\nconst styles = theme =>  ({\n  layout: {\n    height: 'calc(100vh - 72px)',\n    flexGrow: 1\n  },\n  title: {\n    fontSize: '4rem'\n  },\n  subLayout: {\n    height: 'auto'\n  }\n});\n\nclass ErrorPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      locale: this.props.commonStore.getCookie('locale') || this.props.commonStore.locale,\n      errorCode: null,\n      errorType: null,\n    };\n  }\n\n  componentDidMount() {\n    ReactGA.pageview(window.location.pathname);\n    if(this.props.match && this.props.match.params) {\n      this.setState({errorCode: this.props.match.params.errorCode, errorType: this.props.match.params.errorType});\n    }\n  }\n\n  render() {\n    const {classes} = this.props;\n    const { errorCode, errorType} = this.state;\n    const {currentUser} = this.props.userStore.values;\n    const { orgTag} = this.props.organisationStore.values;\n\n    return (\n      <div>\n        <Header />\n        <main>\n          <Grid container className={classes.layout} alignItems={'center'} justify={'center'}>\n            <Grid item xs={12} md={6}>\n              <Grid\n                container\n                spacing={16}\n                className={classes.subLayout}\n                alignItems={'center'}\n                direction={'column'}\n                justify={'center'}\n              >\n                <Grid item>\n                  <img className={classes.bigPicture} src={ProfileService.getEmojiUrl('🧰')} alt=\"bigPicture\" />\n                </Grid>\n                <Grid item>\n                  <Typography variant={'h1'} className={classes.title}>{errorCode} Oops</Typography>\n                </Grid>\n                <Grid item>\n                  {errorType === 'email' && (\n                    <Typography variant={'subheading'}>\n                      <FormattedHTMLMessage id=\"errorPage.emailNotValidated\" values={{email: currentUser.email.value}} />\n                    </Typography>\n                  )}\n                  {(errorType === 'organisation' && errorCode === '404') && (\n                    <Typography variant={'subheading'}>\n                      <FormattedHTMLMessage id=\"errorPage.organisationNotFound\" values={{newOrgLink: UrlService.createUrl(process.env.REACT_APP_HOST_BACKFLIP, '/new/presentation', null, null), orgTag: orgTag}} />\n                    </Typography>\n                  )}\n                  {(errorCode === '500' && errorType === 'routes') && (\n                    <Typography variant={'subheading'}>\n                      <FormattedHTMLMessage id=\"errorPage.unhandledError\" />\n                    </Typography>\n                    )}\n                </Grid>\n              </Grid>\n            </Grid>\n          </Grid>\n        </main>\n      </div>\n    );\n  }\n}\n\nexport default inject('commonStore', 'organisationStore', 'authStore', 'recordStore', 'userStore')(\n  observer(\n    withStyles(styles, {withTheme: true})(ErrorPage)\n  )\n);\n","import React from \"react\";\nimport { Route, Switch, Redirect, withRouter } from 'react-router-dom';\nimport MainRouteOrganisationRedirect from './MainRouteOrganisationRedirect';\nimport PasswordForgot from \"../pages/auth/PasswordForgot\";\nimport PasswordReset from \"../pages/auth/PasswordReset\";\nimport { inject, observer } from 'mobx-react';\nimport AuthPage from \"../pages/auth/AuthPage\";\nimport ErrorPage from \"../pages/ErrorPage\";\nclass MainRouteOrganisation extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isAuth: this.props.authStore.isAuth()\n    };\n\n    // set locale\n    if (this.props.match && this.props.match.params && this.props.match.params.locale) {\n      this.props.commonStore.locale = this.props.match.params.locale;\n      this.props.commonStore.populateLocale();\n    }\n  }\n\n  render() {\n    const { isAuth } = this.state;\n    const { locale } = this.props.match.params;\n    return (\n      <div>\n        <Switch>\n          {/* All routes without orgTag */}\n          <Route exact path=\"/:locale(en|fr|en-UK)/password/forgot\" component={PasswordForgot} />\n          <Route exact path=\"/:locale(en|fr|en-UK)/password/reset/:token/:hash\" component={PasswordReset} />\n          <Route exact path=\"/:locale(en|fr|en-UK)/password/create/:token/:hash/:email\" component={PasswordReset} />\n          <Route path=\"/:locale(en|fr|en-UK)/signup\" component={() => { return <AuthPage initialTab={1} /> }} />\n          <Route path=\"/:locale(en|fr|en-UK)/signin\" component={AuthPage} />\n          <Route exact path=\"/:locale(en|fr|en-UK)/error/:errorCode/:errorType\" component={ErrorPage} />\n\n          {/* Route which will need organisationTag */}\n\n          {/* Main route with orgTag */}\n          <Route exact path=\"/:locale(en|fr|en-UK)/:organisationTag/onboard/:step/edit/:recordId\" component={MainRouteOrganisationRedirect} />\n          <Route exact path=\"/:locale(en|fr|en-UK)/:organisationTag/onboard/:step/edit\" component={MainRouteOrganisationRedirect} />\n          <Route exact path=\"/:locale(en|fr|en-UK)/:organisationTag/onboard/:step?\" component={MainRouteOrganisationRedirect} />\n\n          <Route path=\"/:locale(en|fr|en-UK)/:organisationTag/:hashtags/:action/:invitationCode\" component={(props) => <MainRouteOrganisationRedirect hashtagsFilter={true} {...props} />} />\n          <Route path=\"/:locale(en|fr|en-UK)/:organisationTag/:hashtags/:action\" component={(props) => <MainRouteOrganisationRedirect hashtagsFilter={true} {...props} />} />\n\n          <Route path=\"/:locale(en|fr|en-UK)/:organisationTag\" component={MainRouteOrganisationRedirect} />\n          <Route path=\"/:locale(en|fr|en-UK)\" component={MainRouteOrganisationRedirect} />\n\n          {isAuth && (\n            <Redirect to={\"/\" + locale} />\n          )}\n          {!isAuth && (\n            <Redirect to={\"/\" + locale + \"/signin\"} />\n          )}\n        </Switch>\n      </div>\n    );\n  }\n}\n\nexport default inject('commonStore', 'authStore')(\n  withRouter(observer(\n    MainRouteOrganisation\n  ))\n);\n","import React, {Component} from 'react';\nimport styled, { keyframes } from \"styled-components\";\n\nconst animation = keyframes`\n  from {\n    opacity 0;\n  }\n  to {\n    opacity 1;\n  }\n`;\n\nconst Modal = styled.div`\n  z-index: 99999;\n  box-sizing: border-box;\n  width: calc(100% - 32px);\n  position: fixed;\n  bottom: 0;\n  margin: 16px;\n  padding: 16px;\n  background: rgb(50,50,50);\n  color: rgb(200,200,200);\n  cursor: pointer;\n  animation: ${animation} 1s linear;\n  text-align:center;\n  & a {\n    color: white;\n    font-weight: 600;\n  }\n`;\n\nexport default class ReloadModal extends Component {\n\n  constructor() {\n    super();\n    this.state = {\n      show: false\n    };\n  }\n\n  componentDidMount() {\n    // Handle global event.\n    window.addEventListener(\"newContentAvailable\", () => {\n      this.setState({\n        show: true\n      });\n    });\n  }\n  onClick = () => {\n    window.location.reload(true);\n  };\n\n  render() {\n    if (!this.state.show) {\n      return null;\n    }\n    // <Modal> is common fixed component.\n    return (\n      <Modal onClick={this.onClick}>\n        <span> New Content Available. Restart to update.</span>\n      </Modal>\n    );\n  }\n}","import React from \"react\";\nimport { Route, Switch, Redirect, withRouter } from 'react-router-dom';\nimport MainRouteOrganisation from './MainRouteOrganisation';\nimport { inject, observer } from 'mobx-react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport ReloadModal from '../components/utils/reloader/ReloadModal';\n\nclass MainRoute extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      locale: this.props.commonStore.getCookie('locale') || this.props.commonStore.locale,\n      renderComponent: !this.props.authStore.isAuth()\n    }\n\n    // Remove for the moment, this cookie will be usefull to persist filters if needed\n    this.props.commonStore.removeCookie('searchFilters');\n  }\n\n  componentDidMount() {\n    this.getUser();\n  }\n\n  async getUser() {\n    if (this.props.authStore.isAuth()) {\n      await this.props.userStore.getCurrentUser().catch(() => { return; });\n      if (!this.state.renderComponent) this.setState({ renderComponent: true });\n    }\n  }\n\n  render() {\n    const { renderComponent, locale } = this.state;\n    const endUrl = window.location.pathname + window.location.search;\n    const { currentUser } = this.props.userStore.values;\n    if (!currentUser && this.props.authStore.isAuth()) this.getUser();\n\n    if (renderComponent) {\n      return (\n        <div>\n          <ReloadModal />\n          <Switch>\n            <Route path=\"/:locale(en|fr|en-UK)\" component={MainRouteOrganisation} />\n            <Redirect from=\"*\" to={\"/\" + (locale ? locale : 'en') + endUrl} />\n          </Switch>\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          <ReloadModal/>\n          <div style={{ position: 'absolute', top: '50%', transform: 'translateY(-50%)', textAlign: 'center', width: '100%' }}>\n            <CircularProgress color='secondary' />\n          </div>\n        </div>\n      );\n    }\n  }\n}\n\nexport default inject('authStore', 'userStore', 'commonStore')(\n  withRouter(observer(\n    MainRoute\n  ))\n);\n","import React, { Component } from 'react';\nimport { BrowserRouter } from \"react-router-dom\";\nimport MainRoute from './routes/MainRoute';\nimport './components/header/header.css';\nimport { SnackbarProvider } from 'notistack';\n\nclass App extends Component {\n\n  render() {\n    return (\n      <BrowserRouter>\n        <SnackbarProvider maxSnack={3}>\n          <MainRoute />\n        </SnackbarProvider>\n      </BrowserRouter>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\nrequire('dotenv').config();\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === '[::1]' ||\n  // 127.0.0.1/8 is considered localhost for IPv4.\n  window.location.hostname.match(\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n  )\n);\n\nconsole.log('public url:' + process.env.PUBLIC_URL);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n            'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n\n              // show notification\n              const event = new Event(\"newContentAvailable\");\n              window.dispatchEvent(event);\n\n              console.log(\n                'New content is available and will be used when all ' +\n                'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport 'core-js/fn/promise/finally';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { Provider } from 'mobx-react';\nimport authStore from './stores/auth.store';\nimport userStore from './stores/user.store';\nimport recordStore from './stores/record.store';\nimport commonStore from './stores/common.store';\nimport organisationStore from './stores/organisation.store';\nimport suggestionsController from './services/suggestionsController.service';\nimport HttpsRedirect from 'react-https-redirect';\nimport { MuiThemeProvider } from \"@material-ui/core\";\nimport theme from \"./theme\";\nimport { addLocaleData, IntlProvider } from \"react-intl\";\nimport locale_en from 'react-intl/locale-data/en';\nimport locale_fr from 'react-intl/locale-data/fr';\nimport messages_fr from \"./translations/fr.json\";\nimport messages_en from \"./translations/en.json\";\n\naddLocaleData([...locale_en, ...locale_fr]);\n\nconst messages = {\n  'fr': messages_fr,\n  'en': messages_en\n};\n\nconst stores = {\n  authStore,\n  userStore,\n  recordStore,\n  commonStore,\n  organisationStore,\n  suggestionsController\n};\n\nlet locale = commonStore.locale;\nif (locale === 'en-UK') locale = 'en';\n\nReactDOM.render(\n  <HttpsRedirect>\n    <Provider {...stores}>\n      <MuiThemeProvider theme={theme}>\n        <IntlProvider locale={locale} messages={messages[locale]}>\n          <App />\n        </IntlProvider>\n      </MuiThemeProvider>\n    </Provider>\n  </HttpsRedirect>\n  , document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.register();\n","module.exports = __webpack_public_path__ + \"static/media/placeholder_person.f524a61d.png\";","let slack = require('slack-notify')('https://hooks.slack.com/services/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');\nconst FILENAME = 'slack_helper.js';\n\n/**\n * @description Send errors data to many channels in order to monitor them.\n */\nclass SlackService {\n\n    static notifyError(err, line, developerName = null, filename = FILENAME){\n        let slackObject = {channel : '#errors'+(developerName?'-'+developerName:''), text : filename + ':line:'+line+ ' - ' + err + \n                                                                                            '                                      ' +\n                                                                                            '{Navigator data : ('+\n                                                                                              window.navigator.appCodeName+'|'+\n                                                                                              window.navigator.appVersion+'|'+\n                                                                                              window.navigator.cookieEnabled+')}'};\n        slack.send(slackObject);\n    }\n    static notify(channel, message){\n        slack.send({\n            channel: channel,\n            text: message\n        });\n    }\n}\n\nexport default SlackService;","import { observable, action, decorate } from \"mobx\";\nimport agent from '../agent';\nimport commonStore from \"./common.store\";\nimport userStore from \"./user.store\";\n\nclass OrganisationStore {\n  inProgress = false;\n  errors = null;\n  values = {\n    orgTag: '',\n    orgId: '',\n    organisation: {},\n    currentUserOrganisations: [],\n    fullOrgFetch: false\n  };\n\n  setOrgTag(orgTag) {\n    this.values.orgTag = orgTag;\n  }\n\n  setOrgId(orgId) {\n    this.values.orgId = orgId;\n  }\n\n  setOrganisation(organisation) {\n    this.values.organisation = organisation;\n  }\n\n  setFullOrgFetch(val) {\n    this.values.fullOrgFetch = val;\n  }\n\n\n  reset() {\n    this.values.organisation = {};\n    this.values.orgTag = '';\n  }\n\n  getOrganisation() {\n    if (this.values.orgId) {\n      this.inProgress = true;\n      this.errors = null;\n\n      return agent.Organisation.get(this.values.orgId)\n        .then(data => {\n          this.setOrganisation(data.organisation);\n          this.setFullOrgFetch(true);\n          return this.getAlgoliaKey(true).then(() => {\n            return this.values.organisation;\n          });\n        })\n        .catch(action((err) => {\n          this.errors = err.response && err.response.body && err.response.body.errors;\n          throw err;\n        }))\n        .finally(action(() => { this.inProgress = false; }));\n    } else {\n      return Promise.resolve();\n    }\n  }\n\n  async getCurrentUserOrganisations() {\n    if (userStore.values.currentUser && userStore.values.currentUser.orgsAndRecords.length > 0) {\n      this.values.currentUserOrganisations = [];\n      await this.asyncForEach(userStore.values.currentUser.orgsAndRecords, async (orgAndRecord) => {\n        let org = await agent.Organisation.get(orgAndRecord.organisation).catch();\n        if(org && org.organisation && !this.values.currentUserOrganisations.some(currentOrg => currentOrg.tag === org.organisation.tag)) {\n          this.values.currentUserOrganisations.push(org.organisation);\n        }\n      });\n    }\n  }\n\n  async asyncForEach(array, callback) {\n    for (let index = 0; index < array.length; index++) {\n      await callback(array[index], index, array);\n    }\n  }\n\n  getAlgoliaKey(forceUpdate) {\n    this.inProgress = true;\n    this.errors = null;\n\n    if ((commonStore.algoliaKey || commonStore.getCookie('algoliaKey')) && !forceUpdate) return Promise.resolve(commonStore.algoliaKey);\n    if (commonStore.algoliaKeyOrganisation === this.values.organisation.tag && !forceUpdate) return Promise.resolve(commonStore.algoliaKey);\n\n    return agent.Organisation.getAlgoliaKey(this.values.organisation._id, this.values.organisation.public)\n      .then(data => {\n        if (data) {\n          commonStore.setAlgoliaKey(data.public_key, this.values.organisation.tag);\n          return data.public_key.value;\n        }\n        return null;\n      })\n      .catch(action((err) => {\n        this.errors = err.response && err.response.body && err.response.body.errors;\n        throw err;\n      }))\n      .finally(action(() => { this.inProgress = false; }));\n  }\n\n  getOrganisationForPublic() {\n      if (!this.values.orgTag) return Promise.resolve();\n\n      this.inProgress = true;\n      this.errors = null;\n\n      return agent.Organisation.getForPublic(this.values.orgTag)\n        .then(data => {\n          this.setOrganisation(data.organisation);\n          this.setFullOrgFetch(false);\n          if(this.values.organisation.public) {\n            return this.getAlgoliaKey(true).then(() => {\n              return this.values.organisation;\n            });\n          } else {\n            return this.values.organisation;\n          }\n\n        })\n        .catch(action((err) => {\n          this.errors = err.response && err.response.body && err.response.body.errors;\n          throw err;\n        }))\n        .finally(action(() => { this.inProgress = false; }));\n  }\n\n  isKeyStillValid() {\n    if (commonStore.algoliaKey && commonStore.algoliaKeyValidity) {\n      let valid_until_date = new Date(parseInt(commonStore.algoliaKeyValidity));\n      return (((new Date()).getTime() + 3600000) < valid_until_date.getTime());\n    }\n    return false;\n  }\n\n}\n\ndecorate(OrganisationStore, {\n  inProgress: observable,\n  errors: observable,\n  values: observable,\n  reset: action,\n  setOrganisation: action,\n  setFullOrgFetch: action,\n  setOrgTag: action,\n  setOrgId: action,\n  getOrganisation: action,\n  getAlgoliaKey: action,\n  getOrganisationForPublic: action,\n  getCurrentUserOrganisations: action\n});\n\nexport default new OrganisationStore();","import { observable, action, decorate } from \"mobx\";\nimport agent from '../agent';\nimport userStore from './user.store';\n\nclass RecordStore {\n  inProgress = false;\n  errors = null;\n  values = {\n    orgId: '',\n    recordId: '',\n    recordTag: '',\n    record: {},\n    otherRecord: {},\n  };\n\n  setOrgId(orgId) {\n    this.values.orgId = orgId;\n  }\n  setRecordTag(recordTag) {\n    if(recordTag)\n      recordTag = recordTag.replace('#', '%23');\n    this.values.recordTag = recordTag;\n  }\n  setRecordId(recordId) {\n    this.values.recordId = recordId;\n  }\n  setRecord(record) {\n    this.values.record = record;\n  }\n  setOtherRecord(record) {\n    this.values.otherRecord = record;\n  }\n\n  reset() {\n    this.values.orgId = '';\n    this.values.recordId = '';\n    this.values.record = {};\n  }\n\n  getRecord() {\n    if (!this.values.recordId) return Promise.reject(new Error('No record Id'));\n    this.inProgress = true;\n    this.errors = null;\n\n    return agent.Record.get(this.values.recordId)\n      .then(data => {\n        this.values.record = (data ? data.record : {});\n        return this.values.record;\n      })\n      .catch(action((err) => {\n        this.errors = err.response && err.response.body && err.response.body.errors;\n        throw err;\n      }))\n      .finally(action(() => { this.inProgress = false; }));\n  }\n\n  getRecordByTag() {\n    if (!this.values.recordTag) return Promise.reject(new Error('No record Tag'));\n    this.inProgress = true;\n    this.errors = null;\n\n    return agent.Record.getByTag(this.values.recordTag, this.values.orgId)\n      .then(data => {\n        this.values.otherRecord = (data ? data.record : {});\n        return this.values.otherRecord;\n      })\n      .catch(action((err) => {\n        this.errors = err.response && err.response.body && err.response.body.errors;\n        throw err;\n      }))\n      .finally(action(() => { this.inProgress = false; }));\n  }\n\n  getRecordByUser() {\n    if (!userStore.values.currentUser._id || !this.values.orgId) return Promise.reject(new Error('Bad parameters'));\n    this.inProgress = true;\n    this.errors = null;\n\n    return agent.Record.getByUser(userStore.values.currentUser._id, this.values.orgId)\n      .then(data => {\n        this.values.record = (data ? data.record : null);\n        return this.values.record;\n      })\n      .catch(action((err) => {\n        this.errors = err.response && err.response.body && err.response.body.errors;\n        throw err;\n      }))\n      .finally(action(() => { this.inProgress = false; }));\n  }\n\n  /**\n   * @description Post new record\n   */\n  postRecord(record) {\n    this.inProgress = true;\n    this.errors = null;\n\n    return agent.Record.post(this.values.orgId, record || this.values.record)\n      .then(data => {\n        if(!record)\n          this.values.record = data.record;\n        return data.record; \n      })\n      .catch(action((err) => {\n        this.errors = err.response && err.response.body && err.response.body.errors;\n        throw err;\n      }))\n      .finally(action(() => { this.inProgress = false; }));\n  }\n\n  /**\n   * @description Update record\n   */\n  updateRecord(arrayOfFields) {\n    this.inProgress = true;\n    this.errors = null;\n\n    let recordToUpdate = this.buildRecordToUpdate(arrayOfFields);\n\n    return agent.Record.put(this.values.orgId, this.values.recordId, recordToUpdate)\n      .then(data => { this.values.record = (data ? data.record : {}); return this.values.record;})\n      .catch(action((err) => {\n        this.errors = err.response && err.response.body && err.response.body.errors;\n        throw err;\n      }))\n      .finally(action(() => { this.inProgress = false; }));\n  }\n\n  buildRecordToUpdate(arrayOfFields) {\n    let recordToUpdate = {};\n    if (!arrayOfFields) {\n      recordToUpdate = this.values.record;\n    } else {\n      arrayOfFields.forEach(field => {\n        recordToUpdate[field] = this.values.record[field];\n      });\n    }\n    return recordToUpdate;\n  }\n\n  /**\n   * @description Delete my record\n   */\n  deleteRecord() {\n    this.inProgress = true;\n    this.errors = null;\n\n    return agent.Record.delete(this.values.recordId)\n      .then(data => {\n        this.values.record = {};\n        this.values.recordId = '';\n      })\n      .catch(action((err) => {\n        this.errors = err.response && err.response.body && err.response.body.errors;\n        throw err;\n      }))\n      .finally(action(() => { this.inProgress = false; }));\n  }\n\n}\n\ndecorate(RecordStore, {\n  inProgress: observable,\n  errors: observable,\n  values: observable,\n  setOrgId: action,\n  reset: action,\n  setRecordTag: action,\n  setRecordId: action,\n  setRecord: action,\n  getRecord: action,\n  getRecordByTag: action,\n  postRecord: action,\n  updateRecord: action,\n  deleteRecord: action\n});\n\nexport default new RecordStore();"],"sourceRoot":""}